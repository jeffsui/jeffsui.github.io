<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>凭海临风的IT江湖</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://pinghailinfeng.gitee.io/"/>
  <updated>2025-06-03T07:36:48.709Z</updated>
  <id>https://pinghailinfeng.gitee.io/</id>
  
  <author>
    <name>Jeff Sui</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Faster Linter Tool Ruff Usage</title>
    <link href="https://pinghailinfeng.gitee.io/2025/06/03/Faster-Linter-Tool-Ruff-Usage/"/>
    <id>https://pinghailinfeng.gitee.io/2025/06/03/Faster-Linter-Tool-Ruff-Usage/</id>
    <published>2025-06-03T06:41:17.000Z</published>
    <updated>2025-06-03T07:36:48.709Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Faster-Linter-Tool-Ruff-Usage"><a href="#Faster-Linter-Tool-Ruff-Usage" class="headerlink" title="Faster Linter Tool Ruff Usage"></a>Faster Linter Tool Ruff Usage</h1><p><img src="https://cdn.pixabay.com/photo/2023/04/18/17/41/ai-generated-7935669_1280.jpg" alt></p><a id="more"></a><h2 id="Linter-是什么"><a href="#Linter-是什么" class="headerlink" title="Linter 是什么"></a>Linter 是什么</h2><p>Linter 是一种静态代码分析工具，用于检查源代码中的错误、潜在问题、风格违规以及不良实践。它的名字来源于最早的 C 语言静态分析工具 lint，后来逐渐演化为泛指所有语言的类似工具。</p><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Ruff 一个用 Rust 编写的极快的 Python linter 和代码格式化程序。</p><p>⚡️ 比现有的 linters（如 Flake8）和格式化程序（如 Black）快 10-100 倍<br>🐍 可通过以下方式安装pip<br>🛠️pyproject.toml支持<br>🤝 Python 3.13 兼容性<br>📦 内置缓存，避免重新分析未改变的文件<br>🔧 修复支持，用于自动更正错误（例如，自动删除未使用的导入）</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>一般 ruff 会与 uv 配合使用</p><p>使用 uv 安装（推荐）<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uv add --dev ruff</span><br></pre></td></tr></table></figure></p><p>使用 pip 安装<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install ruff</span><br></pre></td></tr></table></figure></p><h2 id="入门实践"><a href="#入门实践" class="headerlink" title="入门实践"></a>入门实践</h2><h3 id="代码格式化"><a href="#代码格式化" class="headerlink" title="代码格式化"></a>代码格式化</h3><p>让我们创建一个 main.py 文件<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></span><br><span class="line">  print(<span class="string">'hello world!'</span>)</span><br></pre></td></tr></table></figure></p><p>格式化代码<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uv run ruff format main.py</span><br></pre></td></tr></table></figure></p><p>查看结果<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"hello world!"</span>)</span><br></pre></td></tr></table></figure></p><p>我们看到，缩进已经正确变成了四个空格，而不是两个，单引号也变成了双引号，但是我们并不想设置如此严格的规则，因为这会引起那些喜欢使用单引号的开发者的抗拒</p><p>让我们设置参数，使得引号保持原状<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 修改pyproject.toml 或 ruff.toml</span></span><br><span class="line"></span><br><span class="line">[tool.ruff.format]</span><br><span class="line">quote-style = "preserve"</span><br></pre></td></tr></table></figure></p><p>or<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[format]</span><br><span class="line">quote-style = "preserve"</span><br></pre></td></tr></table></figure></p><h3 id="代码检查"><a href="#代码检查" class="headerlink" title="代码检查"></a>代码检查</h3><p>ruff check 命令是 Ruff 工具中的一个子命令，用于对代码进行静态分析，检查代码中的错误、潜在问题以及风格违规。它类似于其他静态分析工具（如 flake8 或 pylint），主要功能如下：</p><h4 id="代码错误检查"><a href="#代码错误检查" class="headerlink" title="代码错误检查"></a>代码错误检查</h4><ul><li>检查语法错误、未定义的变量、未使用的导入等问题。</li><li>例如，ruff check 可以检测到未使用的变量或导入模块。</li></ul><h4 id="代码风格检查"><a href="#代码风格检查" class="headerlink" title="代码风格检查"></a>代码风格检查</h4><ul><li>根据 PEP 8 等 Python 代码风格指南，检查代码格式问题。</li><li>例如，检查缩进、行长度、空格使用等。</li></ul><h4 id="潜在问题检测"><a href="#潜在问题检测" class="headerlink" title="潜在问题检测"></a>潜在问题检测</h4><ul><li>检测可能导致运行时错误的代码模式。</li><li>例如，未处理的异常、不安全的操作等。</li></ul><h3 id="实战一下"><a href="#实战一下" class="headerlink" title="实战一下"></a>实战一下</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time, datetime</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"hello world!"</span>)</span><br></pre></td></tr></table></figure><p>我们可以看到 导入的库，没有使用到。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uvx ruff check main.py</span><br><span class="line"><span class="meta">#</span><span class="bash"> 你会看到抛出很多错误</span></span><br></pre></td></tr></table></figure></p><p>修复它<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uvx ruff check --fix main.py</span><br></pre></td></tr></table></figure></p><p>查看结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"hello world!"</span>)</span><br></pre></td></tr></table></figure><p>你会看到未使用的库不见了。</p><h2 id="规则"><a href="#规则" class="headerlink" title="规则"></a>规则</h2><p>Ruff 支持 800 多个 lint 规则，其中许多规则受到 Flake8、isort、pyupgrade 等流行工具的启发。无论规则的来源如何，Ruff 都会将每条规则重新实现为 Rust 的第一方功能。</p><h3 id="设置常用规则"><a href="#设置常用规则" class="headerlink" title="设置常用规则"></a>设置常用规则</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[tool.ruff.lint]</span><br><span class="line">select = [</span><br><span class="line">    "E", # pycodestyle errors</span><br><span class="line">    "W", # pycodestyle warnings</span><br><span class="line">    "F", # pyflakes</span><br><span class="line">    "I", # isort</span><br><span class="line">    "B", # flake8-bugbear</span><br><span class="line">    "C4", # flake8-comprehensions</span><br><span class="line">    "UP", # pyupgrade</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>让我们逐条解释一下，这些配置项的作用</p><blockquote><p>“E” - pycodestyle 错误<br>作用：启用 pycodestyle 工具中定义的错误检查规则。</p></blockquote><p>示例规则：</p><ul><li>E101：缩进错误（例如混合使用空格和制表符）。</li><li>E112：期望缩进的代码块没有缩进。</li><li>E113：意外的缩进。</li></ul><p>用途：帮助确保代码符合 PEP 8 的基本格式要求。</p><blockquote><p>“W” - pycodestyle 警告<br>作用：启用 pycodestyle 工具中定义的警告检查规则。</p></blockquote><p>示例规则：</p><ul><li>W291：行尾有多余的空格。</li><li>W292：文件末尾缺少换行符。</li><li>W293：空白行包含空格。<br>用途：检查代码中的格式问题，这些问题通常不会导致程序错误，但会影响代码的可读性。</li></ul><blockquote><p>“F” - pyflakes<br>作用：启用 pyflakes 工具中定义的规则，用于检查代码中的逻辑错误和潜在问题。</p></blockquote><p>示例规则：</p><ul><li>F401：导入的模块未使用。</li><li>F821：未定义的变量。</li><li>F841：定义了但未使用的局部变量。<br>用途：帮助发现代码中的低级错误和潜在问题。</li></ul><blockquote><p>“I” - isort<br>作用：启用 isort 工具中定义的规则，用于检查导入语句的格式和排序。</p></blockquote><p>示例规则：</p><ul><li>I001：导入语句未按字母顺序排序。</li><li>I002：导入语句未分组（例如标准库、第三方库、本地库）。<br>用途：确保导入语句的格式一致且符合规范。</li></ul><blockquote><p>“B” - flake8-bugbear<br>作用：启用 flake8-bugbear 工具中定义的规则，用于检查代码中的潜在错误和不良实践。</p></blockquote><p>示例规则：</p><ul><li>B002：在 except 语句中使用了裸异常（except:）。</li><li>B006：在函数参数中使用了可变默认值（如 def func(arg=[])）。</li><li>B007：定义了但未使用的循环变量。<br>用途：帮助避免常见的编程陷阱和不良实践。</li></ul><blockquote><p>“C4” - flake8-comprehensions<br>作用：启用 flake8-comprehensions 工具中定义的规则，用于检查列表、字典和集合推导式的使用。</p></blockquote><p>示例规则：</p><ul><li>C400：不必要的列表推导式（可以直接使用生成器表达式）。</li><li>C401：不必要的集合推导式。</li><li>C402：不必要的字典推导式。<br>用途：优化推导式的使用，使代码更简洁高效。</li></ul><blockquote><p>“UP” - pyupgrade<br>作用：启用 pyupgrade 工具中定义的规则，用于检查并建议升级到更新的 Python 语法。</p></blockquote><p>示例规则：</p><ul><li>UP006：建议使用 class MyClass: 而不是 class MyClass(object):（Python 3 中不需要显式继承 object）。</li><li>UP007：建议使用 TypeVar 而不是 typing.TypeVar。</li><li>UP008：建议使用 super() 而不是 super(MyClass, self)。<br>用途：帮助代码保持与最新 Python 版本的兼容性，并利用新特性。</li></ul><h3 id="设置忽略文件及文件夹"><a href="#设置忽略文件及文件夹" class="headerlink" title="设置忽略文件及文件夹"></a>设置忽略文件及文件夹</h3><p>通过配置 exclude，你可以排除那些不需要被 Ruff 处理的文件或目录，从而减少不必要的检查或格式化操作。</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"># 排除的文件或目录</span><br><span class="line">exclude = [</span><br><span class="line">    "build/",       # 构建输出目录</span><br><span class="line">    "dist/",        # 分发文件目录</span><br><span class="line">    "*.egg-info/",  # Python 包的元数据目录</span><br><span class="line">    "__pycache__/", # Python 缓存文件目录</span><br><span class="line">    ".pytest_cache/", # pytest 缓存目录</span><br><span class="line">    ".mypy_cache/", # mypy 缓存目录</span><br><span class="line">    ".venv/",       # 虚拟环境目录</span><br><span class="line">    "venv/",        # 虚拟环境目录</span><br><span class="line">    "env/",         # 虚拟环境目录</span><br><span class="line">    "tests/data/",  # 测试数据目录</span><br><span class="line">    "**/*.json",    # 所有 JSON 文件</span><br><span class="line">    "**/*.csv",     # 所有 CSV 文件</span><br><span class="line">    "**/*.xml",     # 所有 XML 文件</span><br><span class="line">    "migrations/",  # Django 迁移文件目录</span><br><span class="line">    "**/generated/", # 自动生成的代码目录</span><br><span class="line">    "vendor/",      # 第三方库目录</span><br><span class="line">    "lib/",         # 第三方库目录</span><br><span class="line">    ".*",           # 所有隐藏文件和目录</span><br><span class="line">    ".git/",        # Git 目录</span><br><span class="line">    ".github/",     # GitHub 配置目录</span><br><span class="line">    ".idea/",       # PyCharm 配置目录</span><br><span class="line">    ".vscode/",     # VS Code 配置目录</span><br><span class="line">    "**/__init__.py", # 所有 __init__.py 文件</span><br><span class="line">    "setup.py",     # 项目的 setup.py 文件</span><br><span class="line">    "requirements.txt", # 依赖文件</span><br><span class="line">    "*.log",        # 所有日志文件</span><br><span class="line">    "**/*.ipynb",   # 所有 Jupyter Notebook 文件</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="配合预提交"><a href="#配合预提交" class="headerlink" title="配合预提交"></a>配合预提交</h2><p>pre-commit是一个用于管理和运行 Git 预提交钩子（Git pre-commit hooks）的框架。它允许你在代码提交到 Git 仓库之前自动运行一系列检查或任务，例如代码格式化、静态分析、测试等，以确保代码质量和一致性。</p><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uv add pre-commit</span><br><span class="line">uvx pre-commit installl</span><br><span class="line">uvx pre-commit install</span><br></pre></td></tr></table></figure><p>设置 pre-commit 配置文件<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># See https://pre-commit.com for more information</span></span><br><span class="line"><span class="comment"># See https://pre-commit.com/hooks.html for more hooks</span></span><br><span class="line"><span class="attr">repos:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">repo:</span> <span class="string">https://github.com/pre-commit/pre-commit-hooks</span></span><br><span class="line">    <span class="attr">rev:</span> <span class="string">v4.4.0</span></span><br><span class="line">    <span class="attr">hooks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">check-added-large-files</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">check-toml</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">check-yaml</span></span><br><span class="line">        <span class="attr">args:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">--unsafe</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">repo:</span> <span class="string">https://github.com/charliermarsh/ruff-pre-commit</span></span><br><span class="line">    <span class="attr">rev:</span> <span class="string">v0.2.2</span></span><br><span class="line">    <span class="attr">hooks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">ruff</span></span><br><span class="line">        <span class="attr">args:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">--fix</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">ruff-format</span></span><br><span class="line"></span><br><span class="line"><span class="attr">ci:</span></span><br><span class="line">  <span class="attr">autofix_commit_msg:</span> <span class="string">🎨</span> <span class="string">[pre-commit.ci]</span> <span class="string">Auto</span> <span class="string">format</span> <span class="string">from</span> <span class="string">pre-commit.com</span> <span class="string">hooks</span></span><br><span class="line">  <span class="attr">autoupdate_commit_msg:</span> <span class="string">⬆</span> <span class="string">[pre-commit.ci]</span> <span class="string">pre-commit</span> <span class="string">autoupdate</span></span><br></pre></td></tr></table></figure></p><p>当我们使用 git commit的时候就会自动根据 Ruff 配置规则，检查 python 代码。</p><h2 id="我的vsc-ruff配置"><a href="#我的vsc-ruff配置" class="headerlink" title="我的vsc ruff配置"></a>我的<code>vsc</code> <code>ruff</code>配置</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">"[python]": &#123;                                        // 仅对 python 文件生效</span><br><span class="line">    "editor.defaultFormatter": "charliermarsh.ruff", // 默认使用 Ruff 格式化</span><br><span class="line">    "editor.formatOnSave": true,                     // 保存时自动格式化</span><br><span class="line">    "editor.codeActionsOnSave": &#123;</span><br><span class="line">        "source.fixAll.ruff": "explicit",            // 保存时自动修复可修复的 lint 错误</span><br><span class="line">        "source.organizeImports.ruff": "explicit",   // 保存时自动排序 import 语句</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">"notebook.formatOnSave.enabled": true,               // notebook 保存时自动格式化</span><br><span class="line">"notebook.codeActionsOnSave": &#123;</span><br><span class="line">    "source.fixAll": true,                           // notebook 保存时自动修复可修复的 lint 错误</span><br><span class="line">    "source.organizeImports": true                   // notebook 保存时自动排序 import 语句</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://docs.astral.sh/ruff/" target="_blank" rel="noopener">Ruff 官方文档</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Faster-Linter-Tool-Ruff-Usage&quot;&gt;&lt;a href=&quot;#Faster-Linter-Tool-Ruff-Usage&quot; class=&quot;headerlink&quot; title=&quot;Faster Linter Tool Ruff Usage&quot;&gt;&lt;/a&gt;Faster Linter Tool Ruff Usage&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://cdn.pixabay.com/photo/2023/04/18/17/41/ai-generated-7935669_1280.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="python" scheme="https://pinghailinfeng.gitee.io/categories/python/"/>
    
      <category term="工具篇" scheme="https://pinghailinfeng.gitee.io/categories/python/%E5%B7%A5%E5%85%B7%E7%AF%87/"/>
    
    
      <category term="python" scheme="https://pinghailinfeng.gitee.io/tags/python/"/>
    
      <category term="rust" scheme="https://pinghailinfeng.gitee.io/tags/rust/"/>
    
      <category term="linter" scheme="https://pinghailinfeng.gitee.io/tags/linter/"/>
    
  </entry>
  
  <entry>
    <title>Using pathlib module in python3</title>
    <link href="https://pinghailinfeng.gitee.io/2025/06/03/Using-Pathlib-module-in-python3/"/>
    <id>https://pinghailinfeng.gitee.io/2025/06/03/Using-Pathlib-module-in-python3/</id>
    <published>2025-06-03T03:00:30.000Z</published>
    <updated>2025-06-03T03:18:36.545Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Using-pathlib-module-in-Python3"><a href="#Using-pathlib-module-in-Python3" class="headerlink" title="Using pathlib module in Python3"></a>Using pathlib module in Python3</h1><p><img src="https://cdn.pixabay.com/photo/2024/12/11/22/48/path-9261477_1280.png" alt></p><a id="more"></a><p>在 Python 中，<code>pathlib</code> 模块（从 Python 3.4 开始引入）是对传统 <code>os.path</code> 模块的面向对象封装，它提供了更简洁、直观和现代的方式来处理文件路径和目录操作。相比 <code>os.path</code>，<code>pathlib</code> 不仅语法更优雅，而且在某些场景下也具有更高的效率和更好的可读性。</p><p>官网文档: <a href="https://docs.python.org/zh-cn/3.11/library/pathlib.html" target="_blank" rel="noopener">pathlib</a></p><h2 id="✅-一、pathlib-的高效方法总结"><a href="#✅-一、pathlib-的高效方法总结" class="headerlink" title="✅ 一、pathlib 的高效方法总结"></a>✅ 一、<code>pathlib</code> 的高效方法总结</h2><p>以下是一些 <code>pathlib.Path</code> 类中常用且效率较高的方法：</p><table><thead><tr><th>方法/属性</th><th>功能说明</th><th>效率优势</th></tr></thead><tbody><tr><td><code>Path.exists()</code></td><td>判断路径是否存在</td><td>更直观，替代 <code>os.path.exists()</code></td></tr><tr><td><code>Path.is_file()</code></td><td>判断是否是文件</td><td>替代 <code>os.path.isfile()</code>，无需拼接路径字符串</td></tr><tr><td><code>Path.is_dir()</code></td><td>判断是否是目录</td><td>替代 <code>os.path.isdir()</code></td></tr><tr><td><code>Path.glob(pattern)</code> / <code>Path.rglob(pattern)</code></td><td>查找匹配的文件（递归）</td><td>替代 <code>glob.glob()</code> 和 <code>os.walk()</code>，更灵活</td></tr><tr><td><code>Path.iterdir()</code></td><td>遍历目录下的所有文件和子目录</td><td>替代 <code>os.listdir()</code>，返回 Path 对象，便于链式调用</td></tr><tr><td><code>Path.read_text(encoding=...)</code></td><td>读取文本文件内容</td><td>封装了 open/read/close，简单安全</td></tr><tr><td><code>Path.write_text(data, encoding=...)</code></td><td>写入文本文件</td><td>同上，自动管理资源</td></tr><tr><td><code>Path.mkdir(parents=True, exist_ok=True)</code></td><td>创建多层目录</td><td>替代 <code>os.makedirs(..., exist_ok=True)</code>，更简洁</td></tr><tr><td><code>Path.resolve()</code></td><td>返回绝对路径并解析符号链接</td><td>替代 <code>os.path.abspath()</code> + <code>os.path.realpath()</code></td></tr><tr><td><code>Path.with_suffix()</code> / <code>Path.with_name()</code></td><td>修改文件名或后缀</td><td>非常方便，避免手动字符串拼接</td></tr></tbody></table><h2 id="✅-二、与-os-path-的对比"><a href="#✅-二、与-os-path-的对比" class="headerlink" title="✅ 二、与 os.path 的对比"></a>✅ 二、与 <code>os.path</code> 的对比</h2><table><thead><tr><th>功能</th><th><code>os.path</code> 方式</th><th><code>pathlib</code> 方式</th><th>优势说明</th></tr></thead><tbody><tr><td>拼接路径</td><td><code>os.path.join(&#39;a&#39;, &#39;b&#39;)</code></td><td><code>Path(&#39;a&#39;) / &#39;b&#39;</code></td><td>使用 <code>/</code> 运算符更直观</td></tr><tr><td>获取父目录</td><td><code>os.path.dirname(path)</code></td><td><code>Path(path).parent</code></td><td>属性访问更简洁</td></tr><tr><td>文件扩展名</td><td><code>os.path.splitext(path)[1]</code></td><td><code>Path(path).suffix</code></td><td>更语义化</td></tr><tr><td>路径是否存在</td><td><code>os.path.exists(path)</code></td><td><code>Path(path).exists()</code></td><td>更 OOP，代码结构清晰</td></tr><tr><td>遍历目录</td><td><code>os.listdir(path)</code></td><td><code>Path(path).iterdir()</code></td><td>返回 Path 对象，易于进一步操作</td></tr><tr><td>递归查找</td><td><code>os.walk()</code></td><td><code>Path.glob(&#39;**/*&#39;)</code> 或 <code>rglob()</code></td><td>更简洁易读</td></tr><tr><td>读写文件</td><td><code>open(path, &#39;r&#39;).read()</code></td><td><code>Path.read_text()</code> / <code>write_text()</code></td><td>更简洁安全，自动关闭文件</td></tr></tbody></table><h2 id="✅-三、为什么-pathlib-效率更高？"><a href="#✅-三、为什么-pathlib-效率更高？" class="headerlink" title="✅ 三、为什么 pathlib 效率更高？"></a>✅ 三、为什么 <code>pathlib</code> 效率更高？</h2><ol><li><strong>面向对象设计</strong>：路径作为对象来处理，可以链式调用多个方法。</li><li><strong>减少字符串操作</strong>：避免手动拼接路径，提高安全性与可维护性。</li><li><strong>内置方法丰富</strong>：许多功能无需额外导入模块（如 <code>glob</code>, <code>os</code> 等）。</li><li><strong>跨平台兼容性强</strong>：自动适配 Windows、Linux、macOS 的路径格式。</li><li><strong>性能不输 os.path</strong>：底层实现基于 <code>os</code>，但逻辑更清晰，实际性能相当甚至更优（尤其在大量文件操作时）。</li></ol><h2 id="✅-四、示例对比"><a href="#✅-四、示例对比" class="headerlink" title="✅ 四、示例对比"></a>✅ 四、示例对比</h2><h3 id="示例-1：遍历一个目录中的-txt-文件"><a href="#示例-1：遍历一个目录中的-txt-文件" class="headerlink" title="示例 1：遍历一个目录中的 .txt 文件"></a>示例 1：遍历一个目录中的 <code>.txt</code> 文件</h3><ul><li><p><code>os.path</code> 版本：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> filename <span class="keyword">in</span> os.listdir(<span class="string">'mydir'</span>):</span><br><span class="line">    path = os.path.join(<span class="string">'mydir'</span>, filename)</span><br><span class="line">    <span class="keyword">if</span> os.path.isfile(path) <span class="keyword">and</span> path.endswith(<span class="string">'.txt'</span>):</span><br><span class="line">        print(path)</span><br></pre></td></tr></table></figure></li><li><p><code>pathlib</code> 版本：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> Path(<span class="string">'mydir'</span>).iterdir():</span><br><span class="line">    <span class="keyword">if</span> file.is_file() <span class="keyword">and</span> file.suffix == <span class="string">'.txt'</span>:</span><br><span class="line">        print(file)</span><br></pre></td></tr></table></figure></li></ul><h3 id="示例-2：递归查找所有-py-文件"><a href="#示例-2：递归查找所有-py-文件" class="headerlink" title="示例 2：递归查找所有 .py 文件"></a>示例 2：递归查找所有 <code>.py</code> 文件</h3><ul><li><p><code>os.path</code> + <code>os.walk()</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(<span class="string">'.'</span>):</span><br><span class="line">    <span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">        <span class="keyword">if</span> file.endswith(<span class="string">'.py'</span>):</span><br><span class="line">            print(os.path.join(root, file))</span><br></pre></td></tr></table></figure></li><li><p><code>pathlib</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> Path(<span class="string">'.'</span>).rglob(<span class="string">'*.py'</span>):</span><br><span class="line">    print(file)</span><br></pre></td></tr></table></figure></li></ul><h2 id="✅-五、建议使用场景"><a href="#✅-五、建议使用场景" class="headerlink" title="✅ 五、建议使用场景"></a>✅ 五、建议使用场景</h2><table><thead><tr><th>场景</th><th>推荐方式</th></tr></thead><tbody><tr><td>新项目开发</td><td>🟢 <code>pathlib</code>（推荐）</td></tr><tr><td>维护旧代码</td><td>🔵 可继续使用 <code>os.path</code>，逐步迁移到 <code>pathlib</code></td></tr><tr><td>高频路径操作</td><td>🟢 <code>pathlib</code> 更清晰、不易出错</td></tr><tr><td>简单脚本</td><td>🔵 根据习惯选择，两者皆可</td></tr></tbody></table><h2 id="✅-六、总结"><a href="#✅-六、总结" class="headerlink" title="✅ 六、总结"></a>✅ 六、总结</h2><table><thead><tr><th>对比维度</th><th><code>os.path</code></th><th><code>pathlib</code></th></tr></thead><tbody><tr><td>风格</td><td>函数式</td><td>面向对象</td></tr><tr><td>可读性</td><td>一般</td><td>好</td></tr><tr><td>易用性</td><td>较低</td><td>高</td></tr><tr><td>性能</td><td>相当</td><td>相当</td></tr><tr><td>推荐程度</td><td>❌ 已逐渐淘汰</td><td>✅ 官方推荐新代码使用</td></tr></tbody></table><p>如果你正在写新的 Python 代码，<strong>强烈建议使用 <code>pathlib</code></strong>，它不仅更现代、更易维护，而且很多库也开始原生支持 <code>Path</code> 对象（如 <code>shutil</code>, <code>json</code>, <code>pandas</code> 等），未来趋势明显。</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Using-pathlib-module-in-Python3&quot;&gt;&lt;a href=&quot;#Using-pathlib-module-in-Python3&quot; class=&quot;headerlink&quot; title=&quot;Using pathlib module in Python3&quot;&gt;&lt;/a&gt;Using pathlib module in Python3&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://cdn.pixabay.com/photo/2024/12/11/22/48/path-9261477_1280.png&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="python" scheme="https://pinghailinfeng.gitee.io/categories/python/"/>
    
      <category term="standard_library" scheme="https://pinghailinfeng.gitee.io/categories/python/standard-library/"/>
    
    
      <category term="python" scheme="https://pinghailinfeng.gitee.io/tags/python/"/>
    
      <category term="pathlib" scheme="https://pinghailinfeng.gitee.io/tags/pathlib/"/>
    
  </entry>
  
  <entry>
    <title>uv usage guide</title>
    <link href="https://pinghailinfeng.gitee.io/2025/05/13/uv-usage-guide/"/>
    <id>https://pinghailinfeng.gitee.io/2025/05/13/uv-usage-guide/</id>
    <published>2025-05-13T06:37:25.000Z</published>
    <updated>2025-05-13T07:05:32.546Z</updated>
    
    <content type="html"><![CDATA[<h1 id="UV-简易使用指南"><a href="#UV-简易使用指南" class="headerlink" title="UV 简易使用指南"></a>UV 简易使用指南</h1><p><img src="https://cdn.pixabay.com/photo/2022/08/16/10/24/lightning-7389933_1280.jpg" alt></p><a id="more"></a><h2 id="UV-简介"><a href="#UV-简介" class="headerlink" title="UV 简介"></a>UV 简介</h2><p>今天介绍的<code>uv</code> 是 <code>Astral</code> 公司推出的一款基于 <code>Rust</code> 编写的 <code>Python</code> 包管理工具，旨在成为 “Python 的 Cargo”。</p><p>它提供了快速、可靠且易用的包管理体验，在性能、兼容性和功能上都有出色表现，为<code>Python</code>项目的开发和管理带来了新的选择。</p><h2 id="为什么用uv"><a href="#为什么用uv" class="headerlink" title="为什么用uv"></a>为什么用<code>uv</code></h2><p>与其他Python中的包管理工具相比，uv更像是一个全能选手，它的优势在于：</p><ul><li>速度快：得益于Rust，uv工具的速度让人惊艳，比如安装依赖，速度比其他工具快很多</li><li>功能全面：uv 是“一站式服务”的工具，从安装 Python、管理虚拟环境，到安装和管理包，再到管理项目依赖，它统统都能处理得很好</li><li>前景光明：背后有风投公司Astral支持，且采用了MIT许可，即使未来出现问题，社区也有应对的办法</li><li>使用uv，也可以像NodeJS或者Rust项目那样方便的管理依赖</li></ul><h2 id="如何安装"><a href="#如何安装" class="headerlink" title="如何安装"></a>如何安装</h2><p>安装<code>uv</code> 非常简单，可以使用官方提供的安装脚本，也可以通过<code>pip</code>来安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">macOS/Linux: curl -LsSf https://astral.sh/uv/install.sh | sh</span><br><span class="line"></span><br><span class="line">Windows: powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"</span><br><span class="line"></span><br><span class="line">使用 pip 安装：pip install uv</span><br></pre></td></tr></table></figure><p>安装之后,可以通过<code>uv help</code> 命令检查是否安装成功</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">An extremely fast Python package manager.</span><br><span class="line"></span><br><span class="line">Usage: uv [OPTIONS] &lt;COMMAND&gt;</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  run                        Run a command or script</span><br><span class="line">  init                       Create a new project</span><br><span class="line">  add                        Add dependencies to the project</span><br><span class="line">  remove                     Remove dependencies from the project</span><br><span class="line">  sync                       Update the project's environment</span><br><span class="line">  lock                       Update the project's lockfile</span><br><span class="line">  export                     Export the project's lockfile to an alternate format</span><br><span class="line">  tree                       Display the project's dependency tree</span><br><span class="line">  tool                       Run and install commands provided by Python packages</span><br><span class="line">  python                     Manage Python versions and installations</span><br><span class="line">  pip                        Manage Python packages with a pip-compatible interface</span><br><span class="line">  venv                       Create a virtual environment</span><br><span class="line">  build                      Build Python packages into source distributions and wheels</span><br><span class="line">  publish                    Upload distributions to an index</span><br><span class="line">  cache                      Manage uv's cache</span><br><span class="line">  self                       Manage the uv executable</span><br><span class="line">  version                    Display uv's version</span><br><span class="line">  generate-shell-completion  Generate shell completion</span><br><span class="line">  help                       Display documentation for a command</span><br></pre></td></tr></table></figure><h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><p>用一个简单的<code>new_app</code>项目演示如何管理<code>python</code>项目</p><p>使用uv之前，创建一个Python项目对我来说就是创建一个文件夹而已。</p><p>使用uv之后，终于有了一些项目的感觉，对于uv，我使用时间也不长，疏漏或错误的地方欢迎指正！</p><p>接下来，从创建一个项目开始，演示我使用uv时常用的一些功能。</p><p>首先，介绍uv工具主要使用的两个文件：</p><ul><li>pyproject.toml：定义项目的主要依赖，包括项目名称、版本、描述、支持的 Python 版本等信息</li><li>uv.lock：记录项目的所有依赖，包括依赖的依赖，且跨平台，确保在不同环境下安装的一致性。这个文件由 uv 自动管理，不要手动编辑</li></ul><h3 id="3-1-创建项目"><a href="#3-1-创建项目" class="headerlink" title="3.1 创建项目"></a>3.1 创建项目</h3><p>接下来，创建一个项目，使用<code>uv init &lt;project dir&gt;</code>命令。</p><p>通过<code>init</code>创建项目之后，<code>uv</code>工具贴心地帮助我们生成了一些默认文件。</p><p>其中 <code>hello.py</code> 只是一段演示用的代码，</p><p>随后我们可以根据实际的项目需要删除这个代码文件，换成自己的实际代码。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">bot_name = <span class="string">'Bob'</span></span><br><span class="line">print(<span class="string">f"Hello, I am <span class="subst">&#123;bot_name&#125;</span> How can I assist you?"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    user_input:str = input(<span class="string">'You:'</span>).lower()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> user_input <span class="keyword">in</span> [<span class="string">'hi'</span>,<span class="string">'hello'</span>]:</span><br><span class="line">        print(<span class="string">f"bot: Hi, how can I help you?"</span>)</span><br><span class="line">    <span class="keyword">elif</span> user_input <span class="keyword">in</span> [<span class="string">'bye'</span>,<span class="string">'goodbye'</span>]:</span><br><span class="line">        print(<span class="string">f"bot: Goodbye, have a nice day!"</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">elif</span> user_input <span class="keyword">in</span> [<span class="string">"+"</span>,<span class="string">'add'</span>]:</span><br><span class="line">        print(<span class="string">f"<span class="subst">&#123;bot_name&#125;</span>: I can add two numbers for you."</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            num1 = float(input(<span class="string">"Enter the first number: "</span>))</span><br><span class="line">            num2 = float(input(<span class="string">"Enter the second number: "</span>))</span><br><span class="line">            result = num1 + num2</span><br><span class="line">            print(<span class="string">f"<span class="subst">&#123;bot_name&#125;</span>: The sum of <span class="subst">&#123;num1&#125;</span> and <span class="subst">&#123;num2&#125;</span> is <span class="subst">&#123;result&#125;</span>"</span>)</span><br><span class="line">        <span class="keyword">except</span> ValueError:</span><br><span class="line">            print(<span class="string">f"<span class="subst">&#123;bot_name&#125;</span>: Please enter valid numbers."</span>)</span><br><span class="line">    <span class="keyword">elif</span> user_input <span class="keyword">in</span> [<span class="string">"-"</span>,<span class="string">'minus'</span>]:</span><br><span class="line">        print(<span class="string">f"<span class="subst">&#123;bot_name&#125;</span>: I can minus two numbers for you."</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            num1 = float(input(<span class="string">"Enter the first number: "</span>))</span><br><span class="line">            num2 = float(input(<span class="string">"Enter the second number: "</span>))</span><br><span class="line">            result = num1 - num2</span><br><span class="line">            print(<span class="string">f"<span class="subst">&#123;bot_name&#125;</span>: The sum of <span class="subst">&#123;num1&#125;</span> and <span class="subst">&#123;num2&#125;</span> is <span class="subst">&#123;result&#125;</span>"</span>)</span><br><span class="line">        <span class="keyword">except</span> ValueError:</span><br><span class="line">            print(<span class="string">f"<span class="subst">&#123;bot_name&#125;</span>: Please enter valid numbers."</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">f"<span class="subst">&#123;bot_name&#125;</span>: I'm sorry, I don't understand that command."</span>)</span><br></pre></td></tr></table></figure><p>注意，<code>uv init</code>创建项目之后，会自动将项目使用Git来管理。</p><h3 id="3-2-同步项目依赖："><a href="#3-2-同步项目依赖：" class="headerlink" title="3.2 同步项目依赖："></a>3.2 同步项目依赖：</h3><p><code>uv sync</code><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Using CPython 3.11.4 interpreter at: C:\Python311\python.exe</span><br><span class="line">Creating virtual environment at: .venv</span><br><span class="line">Resolved 1 package in 22ms</span><br><span class="line">Audited in 0.00ms</span><br></pre></td></tr></table></figure></p><h3 id="3-3-运行项目："><a href="#3-3-运行项目：" class="headerlink" title="3.3 运行项目："></a>3.3 运行项目：</h3><p><code>uv run &lt;script file&gt;</code></p><h3 id="3-4-添加依赖："><a href="#3-4-添加依赖：" class="headerlink" title="3.4 添加依赖："></a>3.4 添加依赖：</h3><p><code>uv add &lt;package&gt;</code></p><h3 id="3-5-删除依赖："><a href="#3-5-删除依赖：" class="headerlink" title="3.5 删除依赖："></a>3.5 删除依赖：</h3><p><code>uv remove &lt;package&gt;</code></p><h3 id="3-6-区分开发环境和生产环境："><a href="#3-6-区分开发环境和生产环境：" class="headerlink" title="3.6 区分开发环境和生产环境："></a>3.6 区分开发环境和生产环境：</h3><ul><li><p>添加开发依赖：<br><code>uv add --group dev &lt;package&gt;</code></p></li><li><p>添加生产依赖：<br><code>uv add --group production &lt;package&gt;</code></p></li></ul><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ol><li><code>UV</code> 设置环境变量解决<code>Failed to hardlink files</code>警告</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">warning: Failed to hardlink files; falling back to full copy. This may lead to degraded performance.</span><br><span class="line">         If the cache and target directories are on different filesystems, hardlinking may not be supported.</span><br><span class="line">         If this is intentional, set `export UV_LINK_MODE=copy` or use `--link-mode=copy` to suppress this warning.</span><br></pre></td></tr></table></figure><p>解决方案,设置<code>UV_CACHE_DIR</code>环境变量<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UV_CACHE_DIR = D:/AppData/uv/cache</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;UV-简易使用指南&quot;&gt;&lt;a href=&quot;#UV-简易使用指南&quot; class=&quot;headerlink&quot; title=&quot;UV 简易使用指南&quot;&gt;&lt;/a&gt;UV 简易使用指南&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://cdn.pixabay.com/photo/2022/08/16/10/24/lightning-7389933_1280.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="python" scheme="https://pinghailinfeng.gitee.io/categories/python/"/>
    
    
      <category term="python" scheme="https://pinghailinfeng.gitee.io/tags/python/"/>
    
      <category term="uv" scheme="https://pinghailinfeng.gitee.io/tags/uv/"/>
    
  </entry>
  
  <entry>
    <title>docker service start failed</title>
    <link href="https://pinghailinfeng.gitee.io/2025/04/09/docker-service-start-failed/"/>
    <id>https://pinghailinfeng.gitee.io/2025/04/09/docker-service-start-failed/</id>
    <published>2025-04-09T14:28:05.000Z</published>
    <updated>2025-04-09T14:34:58.674Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Docker-服务启动失败排查指南"><a href="#Docker-服务启动失败排查指南" class="headerlink" title="Docker 服务启动失败排查指南"></a>Docker 服务启动失败排查指南</h1><p><img src="https://cdn.pixabay.com/photo/2025/03/31/15/31/mountains-9504977_1280.jpg" alt></p><a id="more"></a><h2 id="1-当前状态"><a href="#1-当前状态" class="headerlink" title="1. 当前状态"></a>1. 当前状态</h2><ul><li>❌ 服务禁用：disabled（开机不启动）</li><li>🔴 启动失败：failed (Result: start-limit)（触发系统保护机制，阻止重复崩溃）</li><li>⏳ 最后一次尝试：2025-04-10 03:20:22（2分钟前）</li></ul><h2 id="2-核心错误"><a href="#2-核心错误" class="headerlink" title="2. 核心错误"></a>2. 核心错误</h2><ul><li>📛 进程退出码：status=1/FAILURE</li><li>🔧 可疑配置：ExecStart=/usr/bin/dockerd -H fd://…（参数可能异常）</li><li>📜 日志线索：containerd.sock（容器运行时通信异常）</li></ul><h2 id="3-紧急处理"><a href="#3-紧急处理" class="headerlink" title="3. 紧急处理"></a>3. 紧急处理</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. 查看实时崩溃日志（按q退出）</span></span><br><span class="line">journalctl -u docker.service --since "2 minutes ago" -f</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. 检查依赖服务状态</span></span><br><span class="line">systemctl status containerd</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3. 强制重置服务配置（慎用）</span></span><br><span class="line">sudo systemctl reset-failed docker.service</span><br></pre></td></tr></table></figure><h2 id="4-高频故障方向"><a href="#4-高频故障方向" class="headerlink" title="4.高频故障方向"></a>4.高频故障方向</h2><p>▶️ Containerd 未运行 → sudo systemctl start containerd ▶️ 存储驱动冲突 → 检查/etc/docker/daemon.json ▶️ 端口占用 → netstat -tulpn | grep 2375</p><p>建议优先执行 journalctl -xe | grep -i -C10 “dockerd” 查看崩溃前10行上下文日</p><h2 id="5-问题解决"><a href="#5-问题解决" class="headerlink" title="5. 问题解决"></a>5. 问题解决</h2><p><code>vi /etc/docker/daemon.json</code> 后发现 json 数据少了一个空格</p><p>囧………</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Docker-服务启动失败排查指南&quot;&gt;&lt;a href=&quot;#Docker-服务启动失败排查指南&quot; class=&quot;headerlink&quot; title=&quot;Docker 服务启动失败排查指南&quot;&gt;&lt;/a&gt;Docker 服务启动失败排查指南&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://cdn.pixabay.com/photo/2025/03/31/15/31/mountains-9504977_1280.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="https://pinghailinfeng.gitee.io/categories/linux/"/>
    
    
      <category term="docker" scheme="https://pinghailinfeng.gitee.io/tags/docker/"/>
    
      <category term="linux" scheme="https://pinghailinfeng.gitee.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>ssm integration</title>
    <link href="https://pinghailinfeng.gitee.io/2024/10/15/ssm-integration/"/>
    <id>https://pinghailinfeng.gitee.io/2024/10/15/ssm-integration/</id>
    <published>2024-10-15T02:59:08.000Z</published>
    <updated>2024-10-15T03:02:59.527Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ssm-整合"><a href="#ssm-整合" class="headerlink" title="ssm 整合"></a>ssm 整合</h1><h2 id="一、-使用maven-脚手架webapp"><a href="#一、-使用maven-脚手架webapp" class="headerlink" title="一、 使用maven 脚手架webapp"></a>一、 使用maven 脚手架<code>webapp</code></h2><p><img src="https://cdn.wallpapersafari.com/11/31/lWawE4.jpg" alt></p><a id="more"></a><h2 id="二、maven-pom-xml"><a href="#二、maven-pom-xml" class="headerlink" title="二、maven pom.xml"></a>二、maven <code>pom.xml</code></h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mavenssm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>mavenssm Maven Webapp<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>4.3.13.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mybatis.version</span>&gt;</span>3.2.6<span class="tag">&lt;/<span class="name">mybatis.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slf4j.version</span>&gt;</span>1.7.7<span class="tag">&lt;/<span class="name">slf4j.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">log4j.version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">log4j.version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- spring --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-oxm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context-support<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javaee-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.30<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbcp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbcp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;log4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.41<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>mavenssm<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其中<code>spring-mabatis</code><br>MyBatis-Spring 会帮助你将 MyBatis 代码无缝地整合到 Spring 中,版本依赖一览</p><table><thead><tr><th>Mybatis-spring</th><th>Mybatis</th><th>Springframework</th><th>SpringBatch</th><th>Java</th></tr></thead><tbody><tr><td>3.0</td><td>3.5+</td><td>6.0+</td><td>4.0+</td><td>Java16+</td></tr><tr><td>2.0</td><td>3.5+</td><td>5.0+</td><td>4.0+</td><td>Java8+</td></tr><tr><td>1.3</td><td>3.4+</td><td>3.2.2+</td><td>2.1+</td><td>Java6+</td></tr></tbody></table><h3 id="连接池这里用的是druid"><a href="#连接池这里用的是druid" class="headerlink" title="连接池这里用的是druid"></a>连接池这里用的是druid</h3><h2 id="三、配置文件信息"><a href="#三、配置文件信息" class="headerlink" title="三、配置文件信息"></a>三、配置文件信息</h2><h3 id="3-1-核心配置文件applicationContext-xml"><a href="#3-1-核心配置文件applicationContext-xml" class="headerlink" title="3.1 核心配置文件applicationContext.xml"></a>3.1 核心配置文件<code>applicationContext.xml</code></h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans-4.2.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context/spring-context-4.2.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/aop/spring-aop-4.2.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置spring包扫描 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.fd"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 添加属性文件配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:config/db.properties"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--连接池--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span>  <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">p:driverClass</span>=<span class="string">"$&#123;jdbc.driverClass&#125;"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">p:jdbcUrl</span>=<span class="string">"$&#123;jdbc.jdbcUrl&#125;"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">p:user</span>=<span class="string">"$&#123;jdbc.user&#125;"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">p:password</span>=<span class="string">"$&#123;jdbc.password&#125;"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-2-web-xml"><a href="#3-2-web-xml" class="headerlink" title="3.2 web.xml"></a>3.2 web.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入SpringMVC的核心控制器DispatchServlet--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">&lt;!--配置SpringMVC的核心配置文件--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring/springmvc-context.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--配置Spring监听器启动,在服务器启动的时候最先启动--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span></span><br><span class="line">           org.springframework.web.context.ContextLoaderListener</span><br><span class="line">       <span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--配置SpringMVC核心配置文件--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring/spring-context.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- 访问DispatcherServlet对应的路径 --&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--配置Servlet映射,默认/ 不是/*--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span> <span class="comment">&lt;!--/不过滤jsp防止死循环--&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-3-SpringMVC-核心配置文件"><a href="#3-3-SpringMVC-核心配置文件" class="headerlink" title="3.3 SpringMVC 核心配置文件"></a>3.3 SpringMVC 核心配置文件</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version='1.0' encoding='UTF-8'?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">           http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">           http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">           http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置SpringMVC包的扫描,因为当前springmvc也是使用了容器,所以它扫描的组件不能和spring扫描的组件重复--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.fd.controller"</span> <span class="attr">use-default-filters</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--所以要使用排除法,SpringMVC只扫描自己的controller包--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span> <span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Controller"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 视图解析器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- jsp所在的位置--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/jsp/"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- jsp文件的后缀名--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置默认的servlet--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--启用注解驱动--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-4-Mybatis配置-TBD"><a href="#3-4-Mybatis配置-TBD" class="headerlink" title="3.4 Mybatis配置(TBD)"></a>3.4 <code>Mybatis</code>配置(TBD)</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-5-configuration-properties"><a href="#3-5-configuration-properties" class="headerlink" title="3.5 configuration.properties"></a>3.5 configuration.properties</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">jdbc.driver</span> = <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">jdbc.url</span> = <span class="string">jdbc:mysql://localhost:3306/ssm_build?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf8</span></span><br><span class="line"><span class="meta">jdbc.username</span> = <span class="string">root</span></span><br><span class="line"><span class="meta">jdbc.password</span> = <span class="string">root</span></span><br></pre></td></tr></table></figure><h2 id="四、参考资料"><a href="#四、参考资料" class="headerlink" title="四、参考资料"></a>四、参考资料</h2><p><a href="https://blog.csdn.net/CrankZ/article/details/82874158" target="_blank" rel="noopener">连接池</a><br><a href="https://mybatis.org/spring/zh_CN/index.html" target="_blank" rel="noopener">spring-mybatis官网</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ssm-整合&quot;&gt;&lt;a href=&quot;#ssm-整合&quot; class=&quot;headerlink&quot; title=&quot;ssm 整合&quot;&gt;&lt;/a&gt;ssm 整合&lt;/h1&gt;&lt;h2 id=&quot;一、-使用maven-脚手架webapp&quot;&gt;&lt;a href=&quot;#一、-使用maven-脚手架webapp&quot; class=&quot;headerlink&quot; title=&quot;一、 使用maven 脚手架webapp&quot;&gt;&lt;/a&gt;一、 使用maven 脚手架&lt;code&gt;webapp&lt;/code&gt;&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https://cdn.wallpapersafari.com/11/31/lWawE4.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://pinghailinfeng.gitee.io/categories/java/"/>
    
    
      <category term="ssm" scheme="https://pinghailinfeng.gitee.io/tags/ssm/"/>
    
      <category term="spring" scheme="https://pinghailinfeng.gitee.io/tags/spring/"/>
    
      <category term="mybatis" scheme="https://pinghailinfeng.gitee.io/tags/mybatis/"/>
    
  </entry>
  
  <entry>
    <title>TypeScript 01 Type Erasure</title>
    <link href="https://pinghailinfeng.gitee.io/2023/11/20/TypeScript-01-Type-Erasure/"/>
    <id>https://pinghailinfeng.gitee.io/2023/11/20/TypeScript-01-Type-Erasure/</id>
    <published>2023-11-20T02:12:16.000Z</published>
    <updated>2023-11-20T02:58:06.720Z</updated>
    
    <content type="html"><![CDATA[<h1 id="TypeScript-学习笔记01-类型擦除"><a href="#TypeScript-学习笔记01-类型擦除" class="headerlink" title="TypeScript 学习笔记01 类型擦除"></a>TypeScript 学习笔记01 类型擦除</h1><p><img src="https://www.positronx.io/wp-content/uploads/2018/11/positronx-banner-1152-1.jpg" alt></p><a id="more"></a><h2 id="TypeScript-环境搭建"><a href="#TypeScript-环境搭建" class="headerlink" title="TypeScript 环境搭建"></a>TypeScript 环境搭建</h2><h3 id="TypeScript-编译环境"><a href="#TypeScript-编译环境" class="headerlink" title="TypeScript 编译环境"></a>TypeScript 编译环境</h3><ul><li>esbuild (不检查ts语法)</li><li>swc (不检查ts语法)</li><li>neno<ul><li>一个在线<code>neno</code>环境 <a href="https://www.mycompiler.io/new/deno" target="_blank" rel="noopener">https://www.mycompiler.io/new/deno</a></li></ul></li><li>babel –presets @babel/preset-typescript 1.ts</li><li>nodejs</li></ul><p>下面是nodejs环境下 typescript 环境搭建过程</p><h3 id="安装-TypeScript"><a href="#安装-TypeScript" class="headerlink" title="安装 TypeScript"></a>安装 TypeScript</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g typescript</span><br></pre></td></tr></table></figure><p><code>-g</code> 表示全局安装<br>node新版本会有一个warning,可以忽略</p><p><code>npm WARN config global --global, --local are deprecated. Use --location=global instead&quot; occurs because the --global option was deprecated in an older version of npm</code></p><h2 id="类型擦除-Type-Erasure"><a href="#类型擦除-Type-Erasure" class="headerlink" title="类型擦除 (Type Erasure)"></a>类型擦除 (Type Erasure)</h2><h3 id="什么是类型擦除"><a href="#什么是类型擦除" class="headerlink" title="什么是类型擦除"></a>什么是类型擦除</h3><blockquote><p>粗略地说，一旦 TypeScript 的编译器检查完您的代码，它就会擦除类型以生成生成的 “compiled” 代码。这意味着一旦你的代码被编译，生成的普通 JS 代码就没有类型信息。</p></blockquote><p>Roughly speaking, once TypeScript’s compiler is done with checking your code, it erases the types to produce the resulting “compiled” code. This means that once your code is compiled, the resulting plain JS code has no type information.</p><blockquote><p>这也意味着 TypeScript 永远不会根据它推断的类型更改程序的行为。最重要的是，虽然您可能会在编译期间看到类型错误，但类型系统本身与程序运行时的工作方式无关。</p></blockquote><p>This also means that TypeScript never changes the behavior of your program based on the types it inferred. The bottom line is that while you might see type errors during compilation, the type system itself has no bearing on how your program works when it runs.</p><blockquote><p>最后，TypeScript 不提供任何额外的运行时库。您的程序将使用与 JavaScript 程序相同的标准库（或外部库），因此无需学习额外的 TypeScript 特定框架。</p></blockquote><p>Finally, TypeScript doesn’t provide any additional runtime libraries. Your programs will use the same standard library (or external libraries) as JavaScript programs, so there’s no additional TypeScript-specific framework to learn.</p><p><a href="https://nodejs.cn/typescript/get-started/typescript-from-scratch/~/erased-types/" target="_blank" rel="noopener">typescript新手指引</a></p><h3 id="类型擦除-Type-Erasure-示例"><a href="#类型擦除-Type-Erasure-示例" class="headerlink" title="类型擦除 (Type Erasure) 示例"></a>类型擦除 (Type Erasure) 示例</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a:<span class="built_in">number</span> = <span class="number">1</span>+<span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a)</span><br></pre></td></tr></table></figure><p>执行编译<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc 1.ts</span><br></pre></td></tr></table></figure></p><p>执行编译后，会生成一个 1.js 文件<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">1</span> + <span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure></p><p>运行结果<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;3</span></span><br></pre></td></tr></table></figure></p><h3 id="TypeScript工作原理"><a href="#TypeScript工作原理" class="headerlink" title="TypeScript工作原理"></a>TypeScript工作原理</h3><p>TypeScript 编译器将 TypeScript 代码转换为 JavaScript 代码。 它使用类型信息来执行以下操作：</p><ul><li>验证代码中的类型</li><li>推断类型</li><li>生成 JavaScript 代码</li><li>生成与 JavaScript 代码兼容的类型信息</li><li>生成与 JavaScript 代码兼容的运行时</li><li>生成与 JavaScript 代码兼容的源映射</li><li>生成与 JavaScript 代码兼容的调试器支持</li><li>生成与 JavaScript 代码兼容的文档</li><li>生成与 JavaScript 代码兼容的测试</li><li>生成与 JavaScript 代码兼容的类型检查器支持<br>…..</li></ul><h2 id="如何查看ES6兼容表"><a href="#如何查看ES6兼容表" class="headerlink" title="如何查看ES6兼容表"></a>如何查看ES6兼容表</h2><p><a href="https://compat-table.github.io/compat-table/es6/" target="_blank" rel="noopener">ES6兼容性表在线查看</a></p><h2 id="几种在线编辑器"><a href="#几种在线编辑器" class="headerlink" title="几种在线编辑器"></a>几种在线编辑器</h2><ul><li>PlayCode.io</li><li>Stackblitz.com</li><li>Codesandbox.io</li><li>Codepen.io</li></ul><h2 id="VSCode-插件-持续更新"><a href="#VSCode-插件-持续更新" class="headerlink" title="VSCode 插件(持续更新)"></a>VSCode 插件(持续更新)</h2><ul><li>pretty-ts-errors<ul><li>一个查看typescript报错信息格式化擦插件(20231116)</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;TypeScript-学习笔记01-类型擦除&quot;&gt;&lt;a href=&quot;#TypeScript-学习笔记01-类型擦除&quot; class=&quot;headerlink&quot; title=&quot;TypeScript 学习笔记01 类型擦除&quot;&gt;&lt;/a&gt;TypeScript 学习笔记01 类型擦除&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://www.positronx.io/wp-content/uploads/2018/11/positronx-banner-1152-1.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="TypeScript" scheme="https://pinghailinfeng.gitee.io/categories/TypeScript/"/>
    
    
      <category term="TypeScript" scheme="https://pinghailinfeng.gitee.io/tags/TypeScript/"/>
    
  </entry>
  
  <entry>
    <title>Centos jira automatatic start</title>
    <link href="https://pinghailinfeng.gitee.io/2023/07/11/Centos-jira-automatatic-start/"/>
    <id>https://pinghailinfeng.gitee.io/2023/07/11/Centos-jira-automatatic-start/</id>
    <published>2023-07-11T07:23:17.000Z</published>
    <updated>2023-07-11T07:44:30.104Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Centos下jira自启动"><a href="#Centos下jira自启动" class="headerlink" title="Centos下jira自启动"></a>Centos下jira自启动</h1><p><img src="https://marlacummins.com/wp-content/uploads/2014/07/start.jpg" alt></p><a id="more"></a><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>jira版本:<code>atlassian-jira-6.3.6-standalone</code></p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><ol><li>启动脚本</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> chkconfig: 2345 10 90</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> description:jira server</span></span><br><span class="line"></span><br><span class="line">jira_home=/opt/atlassian/jira</span><br><span class="line">server_name=jira</span><br><span class="line"></span><br><span class="line">case "$1" in</span><br><span class="line">start)</span><br><span class="line">    echo "Starting $server_name "</span><br><span class="line">    $jira_home/bin/start-jira.sh</span><br><span class="line">    ;;</span><br><span class="line">stop)</span><br><span class="line">    echo "Stoping $server_name "</span><br><span class="line">    $jira_home/bin/stop-jira.sh</span><br><span class="line">    ;;</span><br><span class="line">restart)</span><br><span class="line">    stop</span><br><span class="line">    start</span><br><span class="line">    ;;</span><br><span class="line">status)</span><br><span class="line">    ps aux|grep $jira_home</span><br><span class="line">    ;;</span><br><span class="line">*)</span><br><span class="line">    echo 'Usage: %s &#123;start|stop|restart|status&#125;\n' "$prog"</span><br><span class="line">    exit 1</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure><ol start="2"><li>设置自启动</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 0.将jira.sh复制至/etc/init.d/目录下</span></span><br><span class="line">[root@localhost ~]# cp -a jira.sh /etc/init.d/jira</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1.给jira脚本给与执行权限</span></span><br><span class="line">[root@localhost ~]# chmod +x /etc/init.d/jira</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2.设置开机启动项</span></span><br><span class="line">[root@localhost ~]# chkconfig --add jira</span><br><span class="line">[root@localhost ~]# chkconfig --level 345 jira on</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Centos下jira自启动&quot;&gt;&lt;a href=&quot;#Centos下jira自启动&quot; class=&quot;headerlink&quot; title=&quot;Centos下jira自启动&quot;&gt;&lt;/a&gt;Centos下jira自启动&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://marlacummins.com/wp-content/uploads/2014/07/start.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="测试" scheme="https://pinghailinfeng.gitee.io/categories/%E6%B5%8B%E8%AF%95/"/>
    
    
      <category term="jira" scheme="https://pinghailinfeng.gitee.io/tags/jira/"/>
    
      <category term="项目管理" scheme="https://pinghailinfeng.gitee.io/tags/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/"/>
    
      <category term="Centos" scheme="https://pinghailinfeng.gitee.io/tags/Centos/"/>
    
  </entry>
  
  <entry>
    <title>zentao automatic start</title>
    <link href="https://pinghailinfeng.gitee.io/2023/07/11/zentao-automatic-start/"/>
    <id>https://pinghailinfeng.gitee.io/2023/07/11/zentao-automatic-start/</id>
    <published>2023-07-11T06:56:18.000Z</published>
    <updated>2023-07-11T07:34:02.976Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Centos禅道自启动"><a href="#Centos禅道自启动" class="headerlink" title="Centos禅道自启动"></a>Centos禅道自启动</h1><p><img src="https://wallpapercave.com/wp/wp5498747.jpg" alt></p><a id="more"></a><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><blockquote><p>有时候linux服务器关机还要手动启动禅道服务，很麻烦，就添加一行命令或一个脚步或设置开机自行启动</p></blockquote><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><h3 id="第一种方法"><a href="#第一种方法" class="headerlink" title="第一种方法"></a>第一种方法</h3><blockquote><p>/etc/rc.local 中添加 /opt/zbox/zbox start</p></blockquote><h3 id="第二种方法"><a href="#第二种方法" class="headerlink" title="第二种方法"></a>第二种方法</h3><blockquote><p>CentOS7设置自定义开机启动,添加自定义系统服务</p></blockquote><ol><li><p>建立service文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /lib/systemd/system/zentao.service</span><br></pre></td></tr></table></figure></li><li><p>内容如下:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=zentao</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/opt/zbox/zbox start</span><br><span class="line">ExecReload=/opt/zbox/zbox restart</span><br><span class="line">ExecStop=/opt/zbox/zbox stop</span><br><span class="line">PrivateTmp=true</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure></li><li><p>赋予权限</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 以754的权限保存在目录</span></span><br><span class="line">chmod u+x zentao.service</span><br></pre></td></tr></table></figure></li><li><p>查看服务状态</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stutus zentao</span><br></pre></td></tr></table></figure></li><li><p>设置开机启动</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable zentao.service</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Centos禅道自启动&quot;&gt;&lt;a href=&quot;#Centos禅道自启动&quot; class=&quot;headerlink&quot; title=&quot;Centos禅道自启动&quot;&gt;&lt;/a&gt;Centos禅道自启动&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://wallpapercave.com/wp/wp5498747.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="测试" scheme="https://pinghailinfeng.gitee.io/categories/%E6%B5%8B%E8%AF%95/"/>
    
    
      <category term="项目管理" scheme="https://pinghailinfeng.gitee.io/tags/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/"/>
    
      <category term="Centos" scheme="https://pinghailinfeng.gitee.io/tags/Centos/"/>
    
      <category term="禅道" scheme="https://pinghailinfeng.gitee.io/tags/%E7%A6%85%E9%81%93/"/>
    
  </entry>
  
  <entry>
    <title>Django Recursive generation</title>
    <link href="https://pinghailinfeng.gitee.io/2023/06/09/Django-Recursive-generation/"/>
    <id>https://pinghailinfeng.gitee.io/2023/06/09/Django-Recursive-generation/</id>
    <published>2023-06-09T07:45:37.000Z</published>
    <updated>2023-06-09T07:48:33.104Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Django-数据库逆向工程"><a href="#Django-数据库逆向工程" class="headerlink" title="Django 数据库逆向工程"></a>Django 数据库逆向工程</h1><p><img src="https://100offdeal.online/wp-content/uploads/2020/08/Python-Django-Framework.jpg" alt></p><a id="more"></a><h2 id="配置好数据库连接-MySQL为例"><a href="#配置好数据库连接-MySQL为例" class="headerlink" title="配置好数据库连接(MySQL为例)"></a>配置好数据库连接(MySQL为例)</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    'default': &#123;</span><br><span class="line">        'ENGINE': 'django.db.backends.mysql',</span><br><span class="line">        'NAME': 'database_name',</span><br><span class="line">        'HOST': '127.0.0.1',</span><br><span class="line">        'PORT': '3306',</span><br><span class="line">        'USER': 'your_database_name',</span><br><span class="line">        'PASSWORD': 'your_database_password',</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="安装MySQL依赖"><a href="#安装MySQL依赖" class="headerlink" title="安装MySQL依赖"></a>安装MySQL依赖</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install PyMySQL</span><br></pre></td></tr></table></figure><h2 id="项目下的-init-py添加如下代码"><a href="#项目下的-init-py添加如下代码" class="headerlink" title="项目下的__init__.py添加如下代码"></a>项目下的<code>__init__.py</code>添加如下代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line">pymysql.install_as_MySQLdb()</span><br></pre></td></tr></table></figure><h2 id="执行inspectdb-命令重定向到文件-就可以反向生成models中的model类"><a href="#执行inspectdb-命令重定向到文件-就可以反向生成models中的model类" class="headerlink" title="执行inspectdb 命令重定向到文件,就可以反向生成models中的model类"></a>执行inspectdb 命令重定向到文件,就可以反向生成models中的model类</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py inspectdb &gt; models.py</span><br></pre></td></tr></table></figure><p>如果指向一张表生成对应models中的model类<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py inspectdb table_name &gt; models.py</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Django-数据库逆向工程&quot;&gt;&lt;a href=&quot;#Django-数据库逆向工程&quot; class=&quot;headerlink&quot; title=&quot;Django 数据库逆向工程&quot;&gt;&lt;/a&gt;Django 数据库逆向工程&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://100offdeal.online/wp-content/uploads/2020/08/Python-Django-Framework.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="python" scheme="https://pinghailinfeng.gitee.io/categories/python/"/>
    
      <category term="django" scheme="https://pinghailinfeng.gitee.io/categories/python/django/"/>
    
    
      <category term="python" scheme="https://pinghailinfeng.gitee.io/tags/python/"/>
    
      <category term="逆向工程" scheme="https://pinghailinfeng.gitee.io/tags/%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>django field constraint</title>
    <link href="https://pinghailinfeng.gitee.io/2023/06/09/django-field-constraint/"/>
    <id>https://pinghailinfeng.gitee.io/2023/06/09/django-field-constraint/</id>
    <published>2023-06-09T07:32:41.000Z</published>
    <updated>2023-06-09T07:40:26.747Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Django中关于字段约束"><a href="#Django中关于字段约束" class="headerlink" title="Django中关于字段约束"></a>Django中关于字段约束</h1><p><img src="https://cbu01.alicdn.com/img/ibank/2015/577/026/2630620775_828955012.jpg" alt></p><a id="more"></a><h2 id="blank和null"><a href="#blank和null" class="headerlink" title="blank和null"></a>blank和null</h2><ul><li>blank=True、null=True。统一的表明了该字段（列）是可以为空的。</li><li>blank=False、null=False。统一的表面了该字段（列）不可以为空。</li><li>blank=True、null=False。这个设定的意义在于，某些字段并不希望用户在表单中创建（如slug），而是通过在save方法中根据其他字段生成。</li><li>blank=False、null=True。这个设定不允许表单中该字段为空，但是允许在更新时或者通过shell等非表单方式插入数据该字段为空。</li></ul><h2 id="DateField中auto-now-add和auto-now"><a href="#DateField中auto-now-add和auto-now" class="headerlink" title="DateField中auto_now_add和auto_now"></a>DateField中auto_now_add和auto_now</h2><ul><li><code>auto_now=True</code><blockquote><p>这个参数的默认值为false，设置为true时，能够在保存该字段时，将其值设置为当前时间，并且每次修改model，都会自动更新。因此这个参数在需要存储“最后修改时间”的场景下，十分方便。需要注意的是，设置该参数为true时，并不简单地意味着字段的默认值为当前时间，而是指字段会被“强制”更新到当前时间，你无法程序中手动为字段赋值；如果使用django再带的admin管理器，那么该字段在admin中是只读的</p></blockquote></li><li><code>auto_now_add</code><blockquote><p> 这个参数的默认值也为False，设置为True时，会在model对象第一次被创建时，将字段的值设置为创建时的时间，以后修改对象时，字段的值不会再更新。该属性通常被用在存储“创建时间”的场景下。与auto_now类似，auto_now_add也具有强制性，一旦被设置为True，就无法在程序中手动为字段赋值，在admin中字段也会成为只读的。</p></blockquote></li><li>如何将创建时间设置为“默认当前”并且可修改</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">import</span> django.utils.timezone <span class="keyword">as</span> timezone</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Doc</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    add_date = models.DateTimeField(<span class="string">'保存日期'</span>,default = timezone.now)</span><br><span class="line">    mod_date = models.DateTimeField(<span class="string">'最后修改日期'</span>, auto_now = <span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>备注：<br>前台页面从数据库取值,需要格式化字符串,添加<code>&lt;td&gt;\{\{ infor.updatetime|date:&quot;Y-m-d H:i:s&quot; \}\}&lt;/td&gt;</code>类似的过滤器。</p><h2 id="外键约束-on-delete"><a href="#外键约束-on-delete" class="headerlink" title="外键约束(on_delete)"></a>外键约束(on_delete)</h2><p>通常外键约束需要添加on_delete属性</p><ol><li><code>CASECADE</code>:级联(常用)<br>如果外键对应的那条数据被删除了，那么这条数据也会被删除<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app2 = models.ForeignKey(App1, on_delete=models.CASCADE)</span><br></pre></td></tr></table></figure></li></ol><p>2.<code>PROTECT</code>: 受保护<br>即只要这条数据引用了外键的那条数据，那么就不能删除外键的那条数据<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app2 = models.ForeignKey(App1, on_delete=models.PROTECT)</span><br></pre></td></tr></table></figure></p><p>3.<code>SET_NULL</code>: 设置为空<br>如果外键的那条数据被删除了，那么在本条数据上就将这个字段设置为空<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app2 = models.ForeignKey(App1, on_delete=models.SET_NULL, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure></p><p>4.<code>SET_DEFAULT</code> :设置默认值</p><p>如果外键的那条数据被删除了，那么本条数据上就将这个字段设置为默认值。</p><p>如果设置这个选项，前提是要指定这个字段一个默认值<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># app/models.py</span></span><br><span class="line">app2 = models.ForeignKey(App1, default=<span class="string">'test_default'</span>, on_delete=models.SET_DEFAULT)</span><br></pre></td></tr></table></figure></p><p>5.<code>SET()</code> : 设定函数处理</p><p>如果外键的那条数据被删除了。那么将会获取SET函数中的值(value)来作为这个外键的值。SET函数可以接收一个可以调用的对象（比如函数或者方法）。<br>如果是可以调用的对象，那么会将这个对象调用后的结果作为返回值return返回回去。可以不用指定默认值</p><p>6.<code>DO_NOTHING</code>: 不处理(不推荐)</p><p>原数据不会有任何操作，也就是说 App1 的某条数据被删除，App2 中的引用还在，其实就是外表的外键还在。 但其实这是一种不推荐的做法，因为如果访问到App2 中的这条数据，用到了 app1 这个字段，就会报错，因为有一条数据被删除了，那么外键表内就有一条数据的外键和主表的外键对应不上，找不到，就报错了。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># app/models.py</span></span><br><span class="line">app2 = models.ForeignKey(App1, default=<span class="string">'test_nothing'</span>, on_delete=models.DO_NOTHING)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Django中关于字段约束&quot;&gt;&lt;a href=&quot;#Django中关于字段约束&quot; class=&quot;headerlink&quot; title=&quot;Django中关于字段约束&quot;&gt;&lt;/a&gt;Django中关于字段约束&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://cbu01.alicdn.com/img/ibank/2015/577/026/2630620775_828955012.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="python" scheme="https://pinghailinfeng.gitee.io/categories/python/"/>
    
      <category term="django" scheme="https://pinghailinfeng.gitee.io/categories/python/django/"/>
    
    
      <category term="python" scheme="https://pinghailinfeng.gitee.io/tags/python/"/>
    
      <category term="django" scheme="https://pinghailinfeng.gitee.io/tags/django/"/>
    
      <category term="约束" scheme="https://pinghailinfeng.gitee.io/tags/%E7%BA%A6%E6%9D%9F/"/>
    
  </entry>
  
  <entry>
    <title>django migrations</title>
    <link href="https://pinghailinfeng.gitee.io/2023/06/09/django-migrations/"/>
    <id>https://pinghailinfeng.gitee.io/2023/06/09/django-migrations/</id>
    <published>2023-06-09T07:16:35.000Z</published>
    <updated>2023-06-09T07:29:54.390Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Django不删库数据迁移方案"><a href="#Django不删库数据迁移方案" class="headerlink" title="Django不删库数据迁移方案"></a>Django不删库数据迁移方案</h1><p><img src="https://gss0.baidu.com/-4o3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/bd3eb13533fa828b5a2504a7f51f4134970a5a74.jpg" alt></p><a id="more"></a><h2 id="不删库数据迁移方案"><a href="#不删库数据迁移方案" class="headerlink" title="不删库数据迁移方案"></a>不删库数据迁移方案</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 01 清空django_migrations所有记录</span></span><br><span class="line">delete FROM public.django_migrations</span><br><span class="line"><span class="meta">#</span><span class="bash"> 02  清空工程目录下的所有迁移文件</span></span><br><span class="line">find . -path "*/migrations/*.py" -not -name "__init__.py" -delete</span><br><span class="line">find . -path "*/migrations/*.pyc"  -delete</span><br><span class="line">******如果，你确定数据库与app的models.py同步，则不需要第03与04步骤*****</span><br><span class="line"><span class="meta">#</span><span class="bash"> 03 导出数据库表结构为模型文件</span></span><br><span class="line">python manage.py inspectdb &gt; ./db_models.py</span><br><span class="line"><span class="meta">#</span><span class="bash"> 04 核查每个app的模型文件与db_models.py中有无差异？有差异需要依据数据库修改app下的models.py文件</span></span><br><span class="line">- 这里需要备份每个app的models.py, 人工check与修改models.py保持与数据库同步。</span><br><span class="line"><span class="meta">#</span><span class="bash"> 05 创建本地迁移文件</span></span><br><span class="line">python manage.py makemigrations</span><br><span class="line"><span class="meta">#</span><span class="bash"> 06 提交迁移文件至数据库</span></span><br><span class="line">python manage.py migrate --fake</span><br><span class="line"><span class="meta">#</span><span class="bash"> 07 还原自己最新的app中的models.py文件</span></span><br><span class="line">- 手工替换一下</span><br><span class="line"><span class="meta">#</span><span class="bash"> 08 按常规操作进行数据库迁移与同步</span></span><br><span class="line">....................开始迁移与写代码吧...............</span><br></pre></td></tr></table></figure><h2 id="migrate"><a href="#migrate" class="headerlink" title="migrate"></a>migrate</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">位置参数:</span><br><span class="line">  app_label            指定同步的应用程序标签.</span><br><span class="line">  migration_name        Database state will be brought to the state after that</span><br><span class="line">                        migration. Use the name "zero" to unapply all</span><br><span class="line">                        migrations.</span><br><span class="line"></span><br><span class="line">可选参数:</span><br><span class="line">  -h, --help            show this help message and exit</span><br><span class="line">  --noinput, --no-input 告诉Django不要提示用户输入任何类型的信息。.</span><br><span class="line">  --database DATABASE   指定要同步的数据库。默认为“default”数据库.</span><br><span class="line">  --fake                将迁移标记为运行而不实际运行它们.</span><br><span class="line">  --fake-initial        检测表是否已经存在，假若已经应用了初始迁移。在使用此标志之前，请确保当前数据库架构与初始迁移匹配。Django只检查一个现有的表名。</span><br><span class="line">  --plan                显示将要执行的迁移操作的列表.</span><br><span class="line">  --run-syncdb     为不进行迁移的应用程序创建表。</span><br><span class="line">  --version             显示程序的版本号和退出</span><br><span class="line">                    -v &#123;0,1,2,3&#125;, --verbosity &#123;0,1,2,3&#125;</span><br><span class="line">                        Verbosity level; 0=minimal output, 1=normal output,</span><br><span class="line">                        2=verbose output, 3=very verbose output</span><br><span class="line">  --settings SETTINGS   设置模块的Python路径，例如“myproject.settings.main”如果未提供此选项，则将使用DJANGO_SETTINGS_MODULE环境变量。</span><br><span class="line">  --pythonpath Python path要添加到Python路径的目录，例如“/home/djangoprojects/myproject”。</span><br><span class="line">  --traceback           Raise on CommandError exceptions</span><br><span class="line">  --no-color            不要将命令输出着色。</span><br><span class="line">  --force-color        强制命令输出着色。</span><br></pre></td></tr></table></figure><h2 id="makemigrations"><a href="#makemigrations" class="headerlink" title="makemigrations"></a>makemigrations</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">位置参数:</span><br><span class="line">  app_label          指定要为其创建迁移的应用程序标签.</span><br><span class="line">可选参数:</span><br><span class="line">  --dry-run             只需显示将要进行的迁移；不要实际编写它们。</span><br><span class="line">  --merge               启用迁移冲突的修复。</span><br><span class="line">  --empty               创建空迁移.</span><br><span class="line">  --noinput, --no-input 告诉Django不要提示用户输入任何类型的信息.</span><br><span class="line">  -n NAME, --name 名称，将此名称用于迁移文件.</span><br><span class="line">  --no-header           不要向新迁移文件添加头注释。</span><br><span class="line">  --check               如果模型更改丢失迁移，则以非零状态退出.</span><br><span class="line">  --version             show program's version number and exit</span><br><span class="line">  -v &#123;0,1,2,3&#125;, --verbosity &#123;0,1,2,3&#125;</span><br><span class="line">                        Verbosity level; 0=minimal output, 1=normal output,</span><br><span class="line">                        2=verbose output, 3=very verbose output</span><br><span class="line">  --settings SETTINGS   The Python path to a settings module, e.g.</span><br><span class="line">                        "myproject.settings.main". If this isn't provided, the</span><br><span class="line">                        DJANGO_SETTINGS_MODULE environment variable will be</span><br><span class="line">                        used.</span><br><span class="line">  --pythonpath PYTHONPATH</span><br><span class="line">                        A directory to add to the Python path, e.g.</span><br><span class="line">                        "/home/djangoprojects/myproject".</span><br><span class="line">  --traceback           Raise on CommandError exceptions</span><br><span class="line">  --no-color            Don't colorize the command output.</span><br><span class="line">  --force-color         Force colorization of the command output.</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Django不删库数据迁移方案&quot;&gt;&lt;a href=&quot;#Django不删库数据迁移方案&quot; class=&quot;headerlink&quot; title=&quot;Django不删库数据迁移方案&quot;&gt;&lt;/a&gt;Django不删库数据迁移方案&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://gss0.baidu.com/-4o3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/bd3eb13533fa828b5a2504a7f51f4134970a5a74.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="python" scheme="https://pinghailinfeng.gitee.io/categories/python/"/>
    
      <category term="django" scheme="https://pinghailinfeng.gitee.io/categories/python/django/"/>
    
    
      <category term="python" scheme="https://pinghailinfeng.gitee.io/tags/python/"/>
    
      <category term="django" scheme="https://pinghailinfeng.gitee.io/tags/django/"/>
    
  </entry>
  
  <entry>
    <title>table tablespace schema etc</title>
    <link href="https://pinghailinfeng.gitee.io/2023/06/09/table-tablespace-schema-etc/"/>
    <id>https://pinghailinfeng.gitee.io/2023/06/09/table-tablespace-schema-etc/</id>
    <published>2023-06-09T07:05:50.000Z</published>
    <updated>2023-06-09T07:21:53.850Z</updated>
    
    <content type="html"><![CDATA[<h1 id="关于表空间、用户和schema相关概念"><a href="#关于表空间、用户和schema相关概念" class="headerlink" title="关于表空间、用户和schema相关概念"></a>关于表空间、用户和<code>schema</code>相关概念</h1><p><img src="https://typora-images.oss-cn-shenzhen.aliyuncs.com/mysql/%E7%8B%AC%E7%AB%8B%E8%A1%A8%E7%A9%BA%E9%97%B4.jpg" alt></p><a id="more"></a><blockquote><p>没办法,在码云发表,被屏蔽了,只能转这里了</p></blockquote><h2 id="数据库这个柜子"><a href="#数据库这个柜子" class="headerlink" title="数据库这个柜子"></a>数据库这个柜子</h2><p>　　解释数据库、表空间、数据文件、表、数据的最好办法就是想象一个装满东西的柜子。</p><p>　　从物理方面来讲：数据库是柜子，柜中的抽屉是表空间，抽屉中的文件夹是数据文件，文件夹中的纸是表，写在纸上的信息就是数据。</p><p>　　从对象方面来讲：数据库是柜子，柜中的抽屉是Schema，抽屉中直接就是各种纸，这些纸就是表，写在纸上的信息就是数据。</p><p>　　如果从作为数据库实例和表之间的一层这个概念上面讲，Schema和表空间是一个层次的概念，他们都有一个很重要的特性，就是对表的独占性。Schema是表的逻辑集合，是所有应用访问表必须指定的对象（虽然一般大家都省略了，但是实际上一定是db.schema.table这种访问模式），同一张表不可能既属于这个Schema，又属于另一个Schema。表空间是表的物理集合，是所有磁盘读写必须访问的文件（大家一般也不用太管，主要是Oracle管，个性化的需求DBA管），同一张表也不可能既放在这个表空间，又放在那个表空间。</p><h2 id="关于用户"><a href="#关于用户" class="headerlink" title="关于用户"></a>关于用户</h2><p>　　<br>　　用户就是用户，用户就是打开抽屉，拿出纸来用的人。一般情况下，用户和Schema这种抽屉打交道会多一点，因为每个用户都有一个Oracle给他量身打造的Schema，而在实际的使用过程中，都是通过Schema来访问表，进行增删改查的操作。当然，在主人允许的情况下，客人也是可以打开自己的抽屉查文件的。而DBA，就是那个有万能钥匙的人。</p><p>　　表空间这个抽屉上面同样也贴了用户的名字，每个人可以设置自己的默认抽屉来放东西，如果不设置的话，Oracle也会给你一个公用的抽屉放东西。表空间这种抽屉是物理上的抽屉，是实际存在的，这个抽屉没有了，文件也就没有了。Schema这个抽屉呢，好像是跟着用户天生而来，天生而去的，是个神秘的抽屉。</p><h2 id="表空间"><a href="#表空间" class="headerlink" title="表空间"></a>表空间</h2><p>　　ORACLE数据库被划分成称作为表空间的逻辑区域——形成ORACLE数据库的逻辑结构。一个ORACLE数据库能够有一个或多个表空间,而一个表空间则对应着一个或多个物理的数据库文件。表空间是ORACLE数据库恢复的最小单位,容纳着许多数据库实体,如表、视图、索引、聚簇、回退段和临时段等。</p><h2 id="Schema"><a href="#Schema" class="headerlink" title="Schema"></a>Schema</h2><p>　　方案（Schema）为数据库对象的集合，为了区分各个集合，我们需要给这个集合起个名字，这些名字就是我们在企业管理器的方案下看到的许多类似用户名的节点，这些类似用户名的节点其实就是一个schema，schema里面包含了各种对象如tables, views, sequences, stored procedures, synonyms, indexes, clusters, and database links。 一个用户一般对应一个schema,该用户的schema名等于用户名，并作为该用户缺省schema。这也就是我们在企业管理器的方案下看到schema名都为数据库用户名的原因。</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;关于表空间、用户和schema相关概念&quot;&gt;&lt;a href=&quot;#关于表空间、用户和schema相关概念&quot; class=&quot;headerlink&quot; title=&quot;关于表空间、用户和schema相关概念&quot;&gt;&lt;/a&gt;关于表空间、用户和&lt;code&gt;schema&lt;/code&gt;相关概念&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://typora-images.oss-cn-shenzhen.aliyuncs.com/mysql/%E7%8B%AC%E7%AB%8B%E8%A1%A8%E7%A9%BA%E9%97%B4.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="数据库" scheme="https://pinghailinfeng.gitee.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="mysql" scheme="https://pinghailinfeng.gitee.io/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>word和pdf转换</title>
    <link href="https://pinghailinfeng.gitee.io/2022/12/06/word%E5%92%8Cpdf%E8%BD%AC%E6%8D%A2/"/>
    <id>https://pinghailinfeng.gitee.io/2022/12/06/word和pdf转换/</id>
    <published>2022-12-06T01:22:39.000Z</published>
    <updated>2023-06-09T06:19:44.680Z</updated>
    
    <content type="html"><![CDATA[<h1 id="使用Python-进行word和pdf转换"><a href="#使用Python-进行word和pdf转换" class="headerlink" title="使用Python 进行word和pdf转换"></a>使用Python 进行word和pdf转换</h1><p><img src="https://img.wmzhe.top/pics/f4/4c/f44ccd1b1ae065727d5f80ce8bdfdc6e.jpg" alt></p><a id="more"></a><h2 id="安装第三方库"><a href="#安装第三方库" class="headerlink" title="安装第三方库"></a>安装第三方库</h2><p><code>pip install docx2pdf</code></p><ul><li>WORD TO PDF</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> docx2pdf <span class="keyword">import</span> convert</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件位置</span></span><br><span class="line">path = <span class="string">'d:/word_list/'</span></span><br><span class="line"><span class="comment"># 定义空list,存放文件夹中的文件名</span></span><br><span class="line">files = []</span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> os.listdir(path):</span><br><span class="line">    <span class="keyword">if</span> file.endswith(<span class="string">".docx"</span>):</span><br><span class="line">        files.append(path+file)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">   a = convert(file,file.split(<span class="string">'.'</span>)[<span class="number">0</span>]+<span class="string">'.pdf'</span>) <span class="comment">#创建生成的pdf文件和文件名的文件名</span></span><br><span class="line">   time.sleep(<span class="number">1.2</span>)</span><br><span class="line"></span><br><span class="line">   print(file+<span class="string">'转换成功'</span>)</span><br></pre></td></tr></table></figure><ul><li>PDF TO WORD</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pdf2docx <span class="keyword">import</span> Converter</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment">#批量pdf转word</span></span><br><span class="line"></span><br><span class="line">path = <span class="string">'d:/pdf_list/'</span></span><br><span class="line"><span class="comment"># 定义空list,存放文件夹中的文件名</span></span><br><span class="line">files = []</span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> os.listdir(path):</span><br><span class="line">    <span class="keyword">if</span> file.endswith(<span class="string">".pdf"</span>):</span><br><span class="line">        files.append(path+file)</span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">    a = Converter(file)</span><br><span class="line">    a.convert(file.split(<span class="string">'.'</span>)[<span class="number">0</span>]+<span class="string">'.docx'</span>) <span class="comment">#创建生成的docx文件和文件名的文件名</span></span><br><span class="line">    a.close()</span><br><span class="line">    print(file+<span class="string">'转换成功'</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;使用Python-进行word和pdf转换&quot;&gt;&lt;a href=&quot;#使用Python-进行word和pdf转换&quot; class=&quot;headerlink&quot; title=&quot;使用Python 进行word和pdf转换&quot;&gt;&lt;/a&gt;使用Python 进行word和pdf转换&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://img.wmzhe.top/pics/f4/4c/f44ccd1b1ae065727d5f80ce8bdfdc6e.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="python" scheme="https://pinghailinfeng.gitee.io/categories/python/"/>
    
    
      <category term="python" scheme="https://pinghailinfeng.gitee.io/tags/python/"/>
    
      <category term="办公" scheme="https://pinghailinfeng.gitee.io/tags/%E5%8A%9E%E5%85%AC/"/>
    
  </entry>
  
  <entry>
    <title>fix FinalShell error channel is not opened</title>
    <link href="https://pinghailinfeng.gitee.io/2022/08/22/fix-FinalShell-error-channel-is-not-opened/"/>
    <id>https://pinghailinfeng.gitee.io/2022/08/22/fix-FinalShell-error-channel-is-not-opened/</id>
    <published>2022-08-22T06:04:49.000Z</published>
    <updated>2022-08-22T06:14:06.231Z</updated>
    
    <content type="html"><![CDATA[<h1 id="解决FinalShell-终端错误-channel-is-not-opened"><a href="#解决FinalShell-终端错误-channel-is-not-opened" class="headerlink" title="解决FinalShell 终端错误 channel is not opened"></a>解决FinalShell 终端错误 <code>channel is not opened</code></h1><p><img src="https://pic.zsucai.com/files/2020/1220/ffpic0224ddfere07725.jpg" alt></p><a id="more"></a><blockquote><p>打开虚拟机连接FinalShell出现久联不上的问题,显示显示连接上,不一会就断掉,报错为channel is not opened.</p></blockquote><h2 id="1-打开虚拟机-找到相关配置文件"><a href="#1-打开虚拟机-找到相关配置文件" class="headerlink" title="1.打开虚拟机:找到相关配置文件"></a>1.打开虚拟机:找到相关配置文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><h2 id="2-找到被注释的-UseDNS-yes去掉-更改为UseDNS-no-完成后ESC退出编辑模式-使用-wq-回车保存并退出"><a href="#2-找到被注释的-UseDNS-yes去掉-更改为UseDNS-no-完成后ESC退出编辑模式-使用-wq-回车保存并退出" class="headerlink" title="2.找到被注释的#UseDNS yes去掉#,更改为UseDNS no,完成后ESC退出编辑模式,使用 :wq 回车保存并退出"></a>2.找到被注释的<code>#UseDNS yes</code>去掉#,更改为<code>UseDNS no</code>,完成后ESC退出编辑模式,使用 :wq 回车保存并退出</h2><h2 id="3-重启sshd服务"><a href="#3-重启sshd服务" class="headerlink" title="3.重启sshd服务"></a>3.重启sshd服务</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sshd.service</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;解决FinalShell-终端错误-channel-is-not-opened&quot;&gt;&lt;a href=&quot;#解决FinalShell-终端错误-channel-is-not-opened&quot; class=&quot;headerlink&quot; title=&quot;解决FinalShell 终端错误 channel is not opened&quot;&gt;&lt;/a&gt;解决FinalShell 终端错误 &lt;code&gt;channel is not opened&lt;/code&gt;&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://pic.zsucai.com/files/2020/1220/ffpic0224ddfere07725.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="终端" scheme="https://pinghailinfeng.gitee.io/categories/%E7%BB%88%E7%AB%AF/"/>
    
    
      <category term="linux" scheme="https://pinghailinfeng.gitee.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>missing you</title>
    <link href="https://pinghailinfeng.gitee.io/2021/04/21/missing-you/"/>
    <id>https://pinghailinfeng.gitee.io/2021/04/21/missing-you/</id>
    <published>2021-04-21T14:49:36.000Z</published>
    <updated>2022-08-22T06:01:37.433Z</updated>
    
    <content type="html"><![CDATA[<h1 id="夜已深-天凉-想您了"><a href="#夜已深-天凉-想您了" class="headerlink" title="夜已深,天凉,想您了"></a>夜已深,天凉,想您了</h1><p><img src="https://bpic.588ku.com/element_origin_min_pic/19/04/11/e9a157f9c729af7aac211ce53eb1b8a7.jpg" alt></p><a id="more"></a><p>对一个人的思念可以到什么程度？可能只有真正失去的人才能懂吧。一晃父亲离开我们已经2年了…….</p><p>前段时间无意中看到迟尚斌因病逝世的消息,突然想起了父亲生前也是球迷。</p><p>回想起小时候,爸爸每周六都要看cctv5转播的意大利联赛,我也耳濡目染喜欢上了足球。</p><p>“足球是圆的,没到最后一刻,一切皆有可能。”马拉多纳、齐达内、博格坎普、伊基塔那些在球场上闪耀的球星,我只要听到他们的名字内心都莫名的激动。</p><p>然而父亲并没有让我踢足球,我记得又一次我自己拿了个破足球在球场上踢,爸爸默默走过来说:你也喜欢足球？我点了点头。知道为啥不让你踢足球吗？我摇了摇头。因为你太瘦了,足球对抗性太强,怕你受伤。我似懂非懂的点了点头。</p><p>我和父亲的话题也渐渐多了起来,从五大联赛到欧洲杯、世界杯到甲A联赛,基本上有关足球的东西都是茶余饭后的谈资。我熬夜看球,父亲慢慢熬不了夜,只能让我把白天录播的时间给他记下来,他白天没事的时候看。每次看到漂亮的进球总想和父亲分享,一转身,父亲已经睡着了。</p><p>父亲中年的时候担任分厂足球队的教练,我偷摸在场边看着父亲,整个人在球场上的感觉都不一样了。心里别提多自豪了。听妈妈说,你爸年轻的时候,不光是足球,篮球、排球都很厉害,刚开始还能踢前锋,伴随着年龄增长,就改踢中场,到最后只能踢后卫了。我没想到爸爸还有这么风光的经历。我眼中的父亲,话很少,很严厉,工作起来很认真。</p><p>说点高兴的事,爸爸告诉你个事儿,今年女足挺进了世界杯,贾秀全也是大连人。我想您在天上应该也会很开心的。</p><p>一天,媳妇调侃闺女说,你以后找对象会找你爸这样的吗？闺女说,不会啊,因为爸爸只有一个啊。我听到了,心里莫名感动。现在能理解为人父母那份不需要回报的心了。</p><p>挚爱亲朋的离开,与其悲伤,我们只能选择坚强。做好一个父亲,尽可能地呵护家人,我会照顾好自己，父亲不用再为我担心。</p><p>夜已深,父亲,我又想您了。</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;夜已深-天凉-想您了&quot;&gt;&lt;a href=&quot;#夜已深-天凉-想您了&quot; class=&quot;headerlink&quot; title=&quot;夜已深,天凉,想您了&quot;&gt;&lt;/a&gt;夜已深,天凉,想您了&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://bpic.588ku.com/element_origin_min_pic/19/04/11/e9a157f9c729af7aac211ce53eb1b8a7.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="杂记" scheme="https://pinghailinfeng.gitee.io/categories/%E6%9D%82%E8%AE%B0/"/>
    
    
      <category term="others" scheme="https://pinghailinfeng.gitee.io/tags/others/"/>
    
  </entry>
  
  <entry>
    <title>how to use maketrans in python3</title>
    <link href="https://pinghailinfeng.gitee.io/2021/04/09/how-to-use-maketrans-in-python3/"/>
    <id>https://pinghailinfeng.gitee.io/2021/04/09/how-to-use-maketrans-in-python3/</id>
    <published>2021-04-09T03:42:41.000Z</published>
    <updated>2022-08-18T08:03:08.618Z</updated>
    
    <content type="html"><![CDATA[<h1 id="如何在python3中使用maketrans"><a href="#如何在python3中使用maketrans" class="headerlink" title="如何在python3中使用maketrans"></a>如何在python3中使用maketrans</h1><p><img src="https://gss0.baidu.com/-4o3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/b999a9014c086e064153b48607087bf40bd1cb00.jpg" alt></p><a id="more"></a><h2 id="python3中的maketrans"><a href="#python3中的maketrans" class="headerlink" title="python3中的maketrans"></a>python3中的maketrans</h2><h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><blockquote><p>Python maketrans() 方法用于给 translate()方法创建字符映射转换表。</p><p>可以只接受一个参数，此时这个参数是个字典类型（暂不研究这种情况）。</p><p>对于接受两个参数的最简单的调用方式，第一个参数是字符串，表示需要转换的字符，第二个参数也是字符串，表示转换的目标。两个字符串的长度必须相同，为一一对应的关系。</p><p>在Python3中可以有第三个参数，表示要删除的字符，也是字符串。</p><p>一般 maketrans() 方法需要配合 translate() 方法一起使用。</p><p><strong>注：</strong>Python3.4 以后已经不需要从外部 string 模块中来调用 maketrans() 方法了，取而代之的是内建函数: bytearray.maketrans()、bytes.maketrans()、str.maketrans()。</p></blockquote><h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><ul><li>python3中</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str.maketrans(intab,outtab[,delchars])</span><br></pre></td></tr></table></figure><ul><li>python2中</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> string</span><br><span class="line">string.maketrans(intab,outtab)</span><br></pre></td></tr></table></figure><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><ul><li>intab – 需要转换的字符组成的字符串。</li><li>outtab – 转换的目标字符组成的字符串。</li><li>delchars – 可选参数，表示要删除的字符组成的字符串。</li></ul><h3 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h3><p>返回一个字符映射转换表供 translate()方法调用。</p><h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>借用 <a href="http://www.pythonchallenge.com/pc/def/map.html" target="_blank" rel="noopener">python挑战</a> 第一关</p><p>提示信息显示:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">K--&gt;M </span><br><span class="line">O--&gt;Q</span><br><span class="line">E--&gt;G</span><br></pre></td></tr></table></figure><p>每个字母向后移动两位就是加密之前的单词了,于是就有下面的方法。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> str = <span class="string">"g fmnc wms bgblr rpylqjyrc gr zw fylb. rfyrq ufyr amknsrcpq ypc dmp. bmgle gr gl zw fylb gq glcddgagclr ylb rfyr'q ufw rfgq rcvr gq qm jmle. sqgle qrpgle.kyicrpylq() gq pcamkkclbcb. lmu ynnjw ml rfc spj."</span></span><br><span class="line"> </span><br><span class="line">table=str.maketrans(<span class="string">'abcdefghijklmnopqrstuvwxyz'</span>,<span class="string">'cdefghijklmnopqrstuvwxyzab'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> str.translate(table)</span><br></pre></td></tr></table></figure><p>翻译过来: i hope you didnt translate it by hand. thats what computers are for. doing it in by hand is inefficient and that’s why this text is so long. using string.maketrans() is recommended. now apply on the url</p><p>通过转换得到下一关的地址</p><p><a href="http://www.pythonchallenge.com/pc/def/ocr.html" target="_blank" rel="noopener">http://www.pythonchallenge.com/pc/def/ocr.html</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;如何在python3中使用maketrans&quot;&gt;&lt;a href=&quot;#如何在python3中使用maketrans&quot; class=&quot;headerlink&quot; title=&quot;如何在python3中使用maketrans&quot;&gt;&lt;/a&gt;如何在python3中使用maketrans&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://gss0.baidu.com/-4o3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/b999a9014c086e064153b48607087bf40bd1cb00.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="python" scheme="https://pinghailinfeng.gitee.io/categories/python/"/>
    
    
      <category term="python" scheme="https://pinghailinfeng.gitee.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>ubuntu install nodejs config taobao source</title>
    <link href="https://pinghailinfeng.gitee.io/2021/04/07/ubuntu-install-nodejs-config-taobao-source/"/>
    <id>https://pinghailinfeng.gitee.io/2021/04/07/ubuntu-install-nodejs-config-taobao-source/</id>
    <published>2021-04-07T03:53:32.000Z</published>
    <updated>2022-08-18T08:03:08.618Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Ubuntu-npm-切换淘宝镜像源"><a href="#Ubuntu-npm-切换淘宝镜像源" class="headerlink" title="Ubuntu npm 切换淘宝镜像源"></a>Ubuntu npm 切换淘宝镜像源</h1><p><img src="https://up.enterdesk.com/edpic/97/66/ed/9766edaddc5a38b512222fc387f83d9f.jpg" alt></p><a id="more"></a><h2 id="npm-切换到淘宝源"><a href="#npm-切换到淘宝源" class="headerlink" title="npm 切换到淘宝源"></a>npm 切换到淘宝源</h2><p>默认的npm下载地址：<a href="http://www.npmjs.org/" target="_blank" rel="noopener">http://www.npmjs.org/</a><br>淘宝npm镜像的地址：<a href="https://npm.taobao.org/" target="_blank" rel="noopener">https://npm.taobao.org/</a><br>临时使用淘宝源：</p><pre><code>$ npm --registry https://registry.npm.taobao.org install node-red-contrib-composer@latest</code></pre><h2 id="全局配置切换到淘宝源："><a href="#全局配置切换到淘宝源：" class="headerlink" title="全局配置切换到淘宝源："></a>全局配置切换到淘宝源：</h2><pre><code>$ npm config set registry https://registry.npm.taobao.org</code></pre><h2 id="全局配置切换到官方源："><a href="#全局配置切换到官方源：" class="headerlink" title="全局配置切换到官方源："></a>全局配置切换到官方源：</h2><pre><code>$ npm config set registry http://www.npmjs.org</code></pre><h3 id="检测是否切换到了淘宝源："><a href="#检测是否切换到了淘宝源：" class="headerlink" title="检测是否切换到了淘宝源："></a>检测是否切换到了淘宝源：</h3><pre><code>$ npm info underscore</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Ubuntu-npm-切换淘宝镜像源&quot;&gt;&lt;a href=&quot;#Ubuntu-npm-切换淘宝镜像源&quot; class=&quot;headerlink&quot; title=&quot;Ubuntu npm 切换淘宝镜像源&quot;&gt;&lt;/a&gt;Ubuntu npm 切换淘宝镜像源&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://up.enterdesk.com/edpic/97/66/ed/9766edaddc5a38b512222fc387f83d9f.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="nodejs" scheme="https://pinghailinfeng.gitee.io/categories/nodejs/"/>
    
    
      <category term="nodejs" scheme="https://pinghailinfeng.gitee.io/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title>Javascript keep i variable value in loop</title>
    <link href="https://pinghailinfeng.gitee.io/2021/01/11/Javascript-keep-i-variable-value-in-loop/"/>
    <id>https://pinghailinfeng.gitee.io/2021/01/11/Javascript-keep-i-variable-value-in-loop/</id>
    <published>2021-01-11T14:05:40.000Z</published>
    <updated>2022-08-18T08:03:08.617Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScript的循环中保留变量i的值"><a href="#JavaScript的循环中保留变量i的值" class="headerlink" title="JavaScript的循环中保留变量i的值"></a>JavaScript的循环中保留变量i的值</h1><p><img src="https://www.programiz.com/sites/tutorial2program/files/for-loop_0.jpg" alt></p><a id="more"></a><p>又一波疫情,本来就景气的大连又一次雪上加霜。只要有希望,一切都会好的。</p><blockquote><p>循环是我们常用的控制语句，在<code>javascript</code>中每次循环结束后其 i 值会指向最后一次的结果，这样循环注册事件时使用到 i 值便会出错</p></blockquote><p>点击图片切换背景的<code>javascript</code>脚本</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/1.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/2.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/3.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/4.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"> <span class="keyword">var</span> imgs = <span class="built_in">document</span>.querySelector(<span class="string">'ul'</span>).querySelectorAll(<span class="string">'img'</span>)</span></span><br><span class="line"><span class="actionscript"> <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; imgs.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">    imgs[i].onclick = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">       <span class="comment">// console.log(imgs[i].src);</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(i);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.body.style.backgroundImage = <span class="string">'url('</span> + imgs[i].src + <span class="string">')'</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>直接报错:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Uncaught TypeError: Cannot read property 'src' of undefined</span><br></pre></td></tr></table></figure><p>打印变量<code>i</code>,永远都是指向最大索引值4</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> 4</span></span><br></pre></td></tr></table></figure><p>下面是解决方案 </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一种解决方案： this关键字</span></span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; imgs.length; i++) &#123;</span><br><span class="line">    imgs[i].onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">       <span class="comment">// console.log(imgs[i].src);</span></span><br><span class="line">       <span class="built_in">console</span>.log(i);</span><br><span class="line">       <span class="built_in">document</span>.body.style.backgroundImage = <span class="string">'url('</span> + <span class="keyword">this</span>.src + <span class="string">')'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  </span><br><span class="line"><span class="comment">//第二种解决方案: 自动执行函数</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; imgs.length; i++) &#123;</span><br><span class="line">            (<span class="function"><span class="keyword">function</span> (<span class="params">inner</span>) </span>&#123;</span><br><span class="line">                imgs[inner].onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(imgs[inner]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)(i);</span><br><span class="line">        &#125;</span><br><span class="line">  <span class="comment">//第三种解决方案 闭包</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; imgs.length; i++) &#123;</span><br><span class="line">            imgs[i].onclick = <span class="function"><span class="keyword">function</span> (<span class="params">inner</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(inner);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;(i);</span><br><span class="line">        &#125;</span><br><span class="line"> <span class="comment">//第四种解决方案 let 块级作用域</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; imgs.length; i++) &#123;</span><br><span class="line">            imgs[i].onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(i);</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JavaScript的循环中保留变量i的值&quot;&gt;&lt;a href=&quot;#JavaScript的循环中保留变量i的值&quot; class=&quot;headerlink&quot; title=&quot;JavaScript的循环中保留变量i的值&quot;&gt;&lt;/a&gt;JavaScript的循环中保留变量i的值&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://www.programiz.com/sites/tutorial2program/files/for-loop_0.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="javascript" scheme="https://pinghailinfeng.gitee.io/categories/javascript/"/>
    
    
      <category term="javascript" scheme="https://pinghailinfeng.gitee.io/tags/javascript/"/>
    
      <category term="循环" scheme="https://pinghailinfeng.gitee.io/tags/%E5%BE%AA%E7%8E%AF/"/>
    
      <category term="闭包" scheme="https://pinghailinfeng.gitee.io/tags/%E9%97%AD%E5%8C%85/"/>
    
      <category term="es6" scheme="https://pinghailinfeng.gitee.io/tags/es6/"/>
    
      <category term="this" scheme="https://pinghailinfeng.gitee.io/tags/this/"/>
    
  </entry>
  
  <entry>
    <title>node14.4 run hexo TypeError [ERR_INVALID_ARG_TYPE]</title>
    <link href="https://pinghailinfeng.gitee.io/2020/12/27/node14-4-run-hexo-TypeError-ERR-INVALID-ARG-TYPE/"/>
    <id>https://pinghailinfeng.gitee.io/2020/12/27/node14-4-run-hexo-TypeError-ERR-INVALID-ARG-TYPE/</id>
    <published>2020-12-26T21:35:28.000Z</published>
    <updated>2022-08-18T08:03:08.616Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Node升级到14-4-hexo-运行失败"><a href="#Node升级到14-4-hexo-运行失败" class="headerlink" title="Node升级到14.4 hexo 运行失败"></a>Node升级到14.4 hexo 运行失败</h1><p><img src="https://www.prajwaldesai.com/wp-content/uploads/2014/01/error-code.jpeg" alt></p><a id="more"></a><p>node刚升级到14.4,结果发现使用<code>hexo d</code>命令部署到<code>gitee</code>上发现如下错误</p><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; typeError [ERR_INVALID_ARG_TYPE]: The <span class="string">"mode"</span> argument must be <span class="built_in">integer</span>. Received an instance of Object</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>查阅相关资料发现是node版本太高导致,最终将node降级到12.14.0后,重新部署就成功了。</p><p>当然你也可以使用nvm来切换node版本。</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Node升级到14-4-hexo-运行失败&quot;&gt;&lt;a href=&quot;#Node升级到14-4-hexo-运行失败&quot; class=&quot;headerlink&quot; title=&quot;Node升级到14.4 hexo 运行失败&quot;&gt;&lt;/a&gt;Node升级到14.4 hexo 运行失败&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://www.prajwaldesai.com/wp-content/uploads/2014/01/error-code.jpeg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="hexo" scheme="https://pinghailinfeng.gitee.io/categories/hexo/"/>
    
      <category term="博客搭建" scheme="https://pinghailinfeng.gitee.io/categories/hexo/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    
    
      <category term="hexo" scheme="https://pinghailinfeng.gitee.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>Farewell, 2020</title>
    <link href="https://pinghailinfeng.gitee.io/2020/12/26/Farewell-2020/"/>
    <id>https://pinghailinfeng.gitee.io/2020/12/26/Farewell-2020/</id>
    <published>2020-12-26T08:22:08.000Z</published>
    <updated>2022-08-18T08:03:08.616Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Farewell-2020"><a href="#Farewell-2020" class="headerlink" title="Farewell, 2020"></a>Farewell, 2020</h1><p><img src="https://gss0.baidu.com/-fo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/7acb0a46f21fbe09cd42640566600c338744ad87.jpg" alt></p><a id="more"></a><p>2020年还有不到五天就要过去了,时光如梭,这一年一眨眼就过去了。</p><p>大连又一次迎来了第三次新冠疫情,大街上冷冷清清。商场里也没有往日的喧闹。这个城市又一次变得安静了下来。</p><p>2020年,大家说得最多的一个字就是”难”。大家好不容易挺过来,来势汹汹的疫情打乱了节奏。很多人心情跌落谷底。</p><p>昨天回到家,媳妇说孩子网课表现很优秀,一边跟着老师听讲,一边和老师互动,还知道静音,非常投入，孩子这是长大了。我心里却不是滋味,和去年疫情相比,网课一天不上,天天就是看平板电脑形成了强烈的反差。孩子不是长大了,是社会让她不得不遵守规则。</p><p>学生问我,你白天上课,晚上还上晚课,收入一定很高,我笑了笑说,还可以吧,他接着又问,你肯定是学校股东,要不谁能这么拼命。我回答,成年人的世界里哪有什么不容易。师生相视一笑。大家都明白,个中滋味自己体会吧。</p><p>疫情让我们明白一些道理,什么都没有活着和生存更重要。只要活着,就有希望。</p><p>2020让我们体会到生命的伟大,致敬那些工作在一线的医护工作者们,他们是最美的逆行者。</p><p>致敬那些为了后勤保障,辛勤工作的各行各业的人们,他们社会能正常运转。</p><p>为人父,为人母,体会到了父母的艰辛。</p><p>就像奥特曼经常说的一样,相信光，会守护世界。每个人心中都有奥特曼。我也会守护我的家人,守护我身边的一切。</p><p>希望在新的一年,一切都会变好。</p><p>祝愿大家都身体健康,因为有光,就有希望。</p><p>未来可期,再见2020!</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Farewell-2020&quot;&gt;&lt;a href=&quot;#Farewell-2020&quot; class=&quot;headerlink&quot; title=&quot;Farewell, 2020&quot;&gt;&lt;/a&gt;Farewell, 2020&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://gss0.baidu.com/-fo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/7acb0a46f21fbe09cd42640566600c338744ad87.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="杂记" scheme="https://pinghailinfeng.gitee.io/categories/%E6%9D%82%E8%AE%B0/"/>
    
    
      <category term="2020" scheme="https://pinghailinfeng.gitee.io/tags/2020/"/>
    
  </entry>
  
</feed>
