<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-center-atom.min.css?v=1.0.2">













  <meta name="baidu-site-verification" content="214VUocOxt">



  
  
  <link rel="stylesheet" href="/lib/fancybox/source/jquery.fancybox.css">







<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: true,
    fancybox: true,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="python 标准库 re 正则表达式">
<meta name="keywords" content="python,standard_library,re">
<meta property="og:type" content="article">
<meta property="og:title" content="python standard_library re">
<meta property="og:url" content="https://pinghailinfeng.gitee.io/2020/03/18/python-standard-library-re/index.html">
<meta property="og:site_name" content="凭海临风的IT江湖">
<meta property="og:description" content="python 标准库 re 正则表达式">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://github.com/jeffsui/app_image_resource/blob/master/20200318_china.jpg?raw=true">
<meta property="og:updated_time" content="2020-03-22T15:54:04.449Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="python standard_library re">
<meta name="twitter:description" content="python 标准库 re 正则表达式">
<meta name="twitter:image" content="https://github.com/jeffsui/app_image_resource/blob/master/20200318_china.jpg?raw=true">



  <link rel="alternate" href="/atom.xml" title="凭海临风的IT江湖" type="application/atom+xml">



  
  
  <link rel="canonical" href="https://pinghailinfeng.gitee.io/2020/03/18/python-standard-library-re/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>python standard_library re | 凭海临风的IT江湖</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">凭海临风的IT江湖</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-top">

    
    
    
      
    

    

    <a href="/top/" rel="section"><i class="menu-item-icon fa fa-fw fa-signal"></i> <br>排行榜</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-sitemap">

    
    
    
      
    

    

    <a href="/sitemap.xml" rel="section"><i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>站点地图</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-commonweal">

    
    
    
      
    

    

    <a href="/404.html" rel="section"><i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>公益 404</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-timeline">

    
    
    
      
    

    

    <a href="/timeline/" rel="section"><i class="menu-item-icon fa fa-fw fa-calendar"></i> <br>时间轴</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    
  
  

  

  <a href="https://github.com/jeffsui" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  
    <div class="reading-progress-bar"></div>
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://pinghailinfeng.gitee.io/2020/03/18/python-standard-library-re/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jeff Sui">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="凭海临风的IT江湖">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">python standard_library re

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-03-18 21:30:04" itemprop="dateCreated datePublished" datetime="2020-03-18T21:30:04+08:00">2020-03-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-03-22 23:54:04" itemprop="dateModified" datetime="2020-03-22T23:54:04+08:00">2020-03-22</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/standard-library/" itemprop="url" rel="index"><span itemprop="name">standard_library</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon">
            <i class="fa fa-eye"></i>
             阅读次数： 
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">32k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">29 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="python-标准库-re-正则表达式"><a href="#python-标准库-re-正则表达式" class="headerlink" title="python 标准库 re 正则表达式"></a>python 标准库 re 正则表达式</h1><p><img src="https://github.com/jeffsui/app_image_resource/blob/master/20200318_china.jpg?raw=true" alt></p>
<a id="more"></a>
<blockquote>
<p>此生无悔入华夏,来世愿在种花家。</p>
</blockquote>
<p><strong>源代码:</strong> <a href="https://github.com/python/cpython/tree/3.8/Lib/re.py" target="_blank" rel="noopener">Lib/re.py</a></p>
<hr>
<p>这个模块提供了与 Perl 语言类似的正则表达式匹配操作。</p>
<p>模式和被搜索的字符串既可以是 Unicode 字符串 (<a href="https://docs.python.org/zh-cn/3.8/library/stdtypes.html#str" target="_blank" rel="noopener"><code>str</code></a>) ，也可以是8位字节串 (<a href="https://docs.python.org/zh-cn/3.8/library/stdtypes.html#bytes" target="_blank" rel="noopener"><code>bytes</code></a>)。 但是，Unicode 字符串与8位字节串不能混用：也就是说，你不能用一个字节串模式去匹配 Unicode 字符串，反之亦然；类似地，当进行替换操作时，替换字符串的类型也必须与所用的模式和搜索字符串的类型一致。</p>
<p>正则表达式使用反斜杠字符 (<code>&#39;\&#39;</code>) 来表示特殊形式或是允许在使用特殊字符时不引发它们的特殊含义。 这会与 Python 的字符串字面值中对相同字符出于相同目的的用法产生冲突；例如，要匹配一个反斜杠字面值，用户可能必须写成 <code>&#39;\\\\&#39;</code> 来作为模式字符串，因为正则表达式必须为 <code>\\</code>，而每个反斜杠在普通 Python 字符串字面值中又必须表示为 <code>\\</code>。 而且还要注意，在 Python 的字符串字面值中使用的反斜杠如果有任何无效的转义序列，现在将会产生 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#DeprecationWarning" target="_blank" rel="noopener"><code>DeprecationWarning</code></a> 并将在未来改为 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#SyntaxError" target="_blank" rel="noopener"><code>SyntaxError</code></a>。 此行为即使对于正则表达式来说有效的转义字符同样会发生。</p>
<p>解决办法是对于正则表达式样式使用 Python 的原始字符串表示法；在带有 <code>&#39;r&#39;</code> 前缀的字符串字面值中，反斜杠不必做任何特殊处理。 因此 <code>r&quot;\n&quot;</code> 表示包含 <code>&#39;\&#39;</code> 和 <code>&#39;n&#39;</code> 两个字符的字符串，而 <code>&quot;\n&quot;</code> 则表示只包含一个换行符的字符串。 样式在 Python 代码中通常都会使用这种原始字符串表示法来表示。</p>
<p>绝大部分正则表达式操作都提供为模块函数和方法，在 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re-objects" target="_blank" rel="noopener">编译正则表达式</a>. 这些函数是一个捷径，不需要先编译一个正则对象，但是损失了一些优化参数。</p>
<p>参见:</p>
<p>第三方模块 <a href="https://pypi.org/project/regex/" target="_blank" rel="noopener">regex</a> , 提供了与标准库 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#module-re" target="_blank" rel="noopener"><code>re</code></a> 模块兼容的API接口, 同时还提供了额外的功能和更全面的Unicode支持。</p>
<h2 id="正则表达式语法"><a href="#正则表达式语法" class="headerlink" title="正则表达式语法"></a>正则表达式语法</h2><p>一个正则表达式（或RE）指定了一集与之匹配的字符串；模块内的函数可以让你检查某个字符串是否跟给定的正则表达式匹配（或者一个正则表达式是否匹配到一个字符串，这两种说法含义相同）。</p>
<p>正则表达式可以拼接； 如果 <em>A</em> 和 <em>B</em> 都是正则表达式， 那么 <em>AB</em> 也是正则表达式。 通常， 如果字符串 <em>p</em> 匹配 <em>A</em> 并且另一个字符串 <em>q</em> 匹配 <em>B</em>, 那么 <em>pq</em> 可以匹配 AB。除非 <em>A</em> 或者 <em>B</em> 包含低优先级操作，<em>A</em> 和 <em>B</em> 存在边界条件；或者命名组引用。所以，复杂表达式可以很容易的从这里描述的简单源语表达式构建。 了解更多正则表达式理论和实现，参考the Friedl book <a href="https://docs.python.org/zh-cn/3.8/library/re.html#frie09" target="_blank" rel="noopener">[Frie09]</a> ，或者其他编译器构建的书籍。</p>
<p>以下是正则表达式格式的简要说明。更详细的信息和演示，参考 <a href="https://docs.python.org/zh-cn/3.8/howto/regex.html#regex-howto" target="_blank" rel="noopener">正则表达式HOWTO</a>。</p>
<p>正则表达式可以包含普通或者特殊字符。绝大部分普通字符，比如 <code>&#39;A&#39;</code>, <code>&#39;a&#39;</code>, 或者 <code>&#39;0&#39;</code>，都是最简单的正则表达式。它们就匹配自身。你可以拼接普通字符，所以 <code>last</code> 匹配字符串 <code>&#39;last&#39;</code>. （在这一节的其他部分，我们将用 <code>this special style</code> 这种方式表示正则表达式，通常不带引号，要匹配的字符串用 <code>&#39;in single quotes&#39;</code> ，单引号形式。）</p>
<p>有些字符，比如 <code>&#39;|&#39;</code> 或者 <code>&#39;(&#39;</code>，属于特殊字符。 特殊字符既可以表示它的普通含义， 也可以影响它旁边的正则表达式的解释。</p>
<p>重复修饰符 (<code>*</code>, <code>+</code>, <code>?</code>, <code>{m,n}</code>, 等) 不能直接嵌套。这样避免了非贪婪后缀 <code>?</code> 修饰符，和其他实现中的修饰符产生的多义性。要应用一个内层重复嵌套，可以使用括号。 比如，表达式 <code>(?:a{6})*</code> 匹配6个 <code>&#39;a&#39;</code> 字符重复任意次数。</p>
<p>特殊字符是：</p>
<ul>
<li><p><code>.</code></p>
<p>(点) 在默认模式，匹配除了换行的任意字符。如果指定了标签 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.DOTALL" target="_blank" rel="noopener"><code>DOTALL</code></a> ，它将匹配包括换行符的任意字符。</p>
</li>
<li><p><code>^</code></p>
<p>(插入符号) 匹配字符串的开头， 并且在 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.MULTILINE" target="_blank" rel="noopener"><code>MULTILINE</code></a> 模式也匹配换行后的首个符号。</p>
</li>
<li><p><code>$</code></p>
<p>匹配字符串尾或者换行符的前一个字符，在 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.MULTILINE" target="_blank" rel="noopener"><code>MULTILINE</code></a> 模式匹配换行符的前一个字符。 <code>foo</code> 匹配 <code>&#39;foo&#39;</code> 和 <code>&#39;foobar&#39;</code> , 但正则 <code>foo$</code> 只匹配 <code>&#39;foo&#39;</code>。更有趣的是， 在 <code>&#39;foo1\nfoo2\n&#39;</code> 搜索 <code>foo.$</code> ，通常匹配 <code>&#39;foo2&#39;</code> ，但在 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.MULTILINE" target="_blank" rel="noopener"><code>MULTILINE</code></a> 模式 ，可以匹配到 <code>&#39;foo1&#39;</code> ；在 <code>&#39;foo\n&#39;</code> 搜索 <code>$</code> 会找到两个空串：一个在换行前，一个在字符串最后。</p>
</li>
<li><p><code>*</code></p>
<p>对它前面的正则式匹配0到任意次重复， 尽量多的匹配字符串。 <code>ab*</code> 会匹配 <code>&#39;a&#39;</code>， <code>&#39;ab&#39;</code>， 或者 <code>&#39;a&#39;后面跟随任意个 &#39;b&#39;</code>。</p>
</li>
<li><p><code>+</code></p>
<p>对它前面的正则式匹配1到任意次重复。 <code>ab+</code> 会匹配 <code>&#39;a&#39;</code> 后面跟随1个以上到任意个 <code>&#39;b&#39;</code>，它不会匹配 <code>&#39;a&#39;</code>。</p>
</li>
<li><p><code>?</code></p>
<p>对它前面的正则式匹配0到1次重复。 <code>ab?</code> 会匹配 <code>&#39;a&#39;</code> 或者 <code>&#39;ab&#39;</code>。</p>
</li>
<li><p><code>*?</code>, <code>+?</code>, <code>??</code></p>
<p><code>&#39;*&#39;</code>, <code>&#39;+&#39;</code>，和 <code>&#39;?&#39;</code> 修饰符都是 <em>贪婪的</em>；它们在字符串进行尽可能多的匹配。有时候并不需要这种行为。如果正则式 <code>&lt;.*&gt;</code> 希望找到 <code>&#39; b &#39;</code>，它将会匹配整个字符串，而不仅是 <code>&#39;&#39;</code>。在修饰符之后添加 <code>?</code> 将使样式以 <em>非贪婪<code>方式或者 :dfn:</code>最小</em> 方式进行匹配； 尽量 <em>少</em> 的字符将会被匹配。 使用正则式 <code>&lt;.*?&gt;</code> 将会仅仅匹配 <code>&#39;&#39;</code>。</p>
</li>
<li><p><code>{m}</code></p>
<p>对其之前的正则式指定匹配 <em>m</em> 个重复；少于 <em>m</em> 的话就会导致匹配失败。比如， <code>a{6}</code> 将匹配6个 <code>&#39;a&#39;</code> , 但是不能是5个。</p>
</li>
<li><p><code>{m,n}</code></p>
<p>对正则式进行 <em>m</em> 到 <em>n</em> 次匹配，在 <em>m</em> 和 <em>n</em> 之间取尽量多。 比如，<code>a{3,5}</code> 将匹配 3 到 5个 <code>&#39;a&#39;</code>。忽略 <em>m</em> 意为指定下界为0，忽略 <em>n</em> 指定上界为无限次。 比如 <code>a{4,}b</code> 将匹配 <code>&#39;aaaab&#39;</code> 或者1000个 <code>&#39;a&#39;</code> 尾随一个 <code>&#39;b&#39;</code>，但不能匹配 <code>&#39;aaab&#39;</code>。逗号不能省略，否则无法辨别修饰符应该忽略哪个边界。</p>
</li>
<li><p><code>{m,n}?</code></p>
<p>前一个修饰符的非贪婪模式，只匹配尽量少的字符次数。比如，对于 <code>&#39;aaaaaa&#39;</code>， <code>a{3,5}</code> 匹配 5个 <code>&#39;a&#39;</code> ，而 <code>a{3,5}?</code> 只匹配3个 <code>&#39;a&#39;</code>。</p>
</li>
<li><p><code>\</code></p>
<p>转义特殊字符（允许你匹配 <code>&#39;*&#39;</code>, <code>&#39;?&#39;</code>, 或者此类其他），或者表示一个特殊序列；特殊序列之后进行讨论。如果你没有使用原始字符串（ <code>r&#39;raw&#39;</code> ）来表达样式，要牢记Python也使用反斜杠作为转义序列；如果转义序列不被Python的分析器识别，反斜杠和字符才能出现在字符串中。如果Python可以识别这个序列，那么反斜杠就应该重复两次。这将导致理解障碍，所以高度推荐，就算是最简单的表达式，也要使用原始字符串。</p>
</li>
<li><p><code>[]</code></p>
<p>用于表示一个字符集合。在一个集合中：字符可以单独列出，比如 <code>[amk]</code> 匹配 <code>&#39;a&#39;</code>， <code>&#39;m&#39;</code>， 或者 <code>&#39;k&#39;</code>。可以表示字符范围，通过用 <code>&#39;-&#39;</code> 将两个字符连起来。比如 <code>[a-z]</code> 将匹配任何小写ASCII字符， <code>[0-5][0-9]</code> 将匹配从 <code>00</code> 到 <code>59</code> 的两位数字， <code>[0-9A-Fa-f]</code> 将匹配任何十六进制数位。 如果 <code>-</code> 进行了转义 （比如 <code>[a\-z]</code>）或者它的位置在首位或者末尾（如 <code>[-a]</code> 或 <code>[a-]</code>），它就只表示普通字符 <code>&#39;-&#39;</code>。特殊字符在集合中，失去它的特殊含义。比如 <code>[(+*)]</code> 只会匹配这几个文法字符 <code>&#39;(&#39;</code>, <code>&#39;+&#39;</code>, <code>&#39;*&#39;</code>, or <code>&#39;)&#39;</code>。字符类如 <code>\w</code> 或者 <code>\S</code> (如下定义) 在集合内可以接受，它们可以匹配的字符由 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.ASCII" target="_blank" rel="noopener"><code>ASCII</code></a> 或者 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.LOCALE" target="_blank" rel="noopener"><code>LOCALE</code></a> 模式决定。不在集合范围内的字符可以通过 <em>取反</em> 来进行匹配。如果集合首字符是 <code>&#39;^&#39;</code> ，所有 <em>不</em> 在集合内的字符将会被匹配，比如 <code>[^5]</code> 将匹配所有字符，除了 <code>&#39;5&#39;</code>， <code>[^^]</code> 将匹配所有字符，除了 <code>&#39;^&#39;</code>. <code>^</code> 如果不在集合首位，就没有特殊含义。在集合内要匹配一个字符 <code>&#39;]&#39;</code>，有两种方法，要么就在它之前加上反斜杠，要么就把它放到集合首位。比如， <code>[()[\]{}]</code> 和 <code>[]()[{}]</code> 都可以匹配括号。<a href="https://unicode.org/reports/tr18/" target="_blank" rel="noopener">Unicode Technical Standard #18</a> 里的嵌套集合和集合操作支持可能在未来添加。这将会改变语法，所以为了帮助这个改变，一个 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#FutureWarning" target="_blank" rel="noopener"><code>FutureWarning</code></a> 将会在有多义的情况里被 <code>raise</code>，包含以下几种情况，集合由 <code>&#39;[&#39;</code> 开始，或者包含下列字符序列 <code>&#39;--&#39;</code>, <code>&#39;&amp;&amp;&#39;</code>, <code>&#39;~~&#39;</code>, 和 <code>&#39;||&#39;</code>。为了避免警告，需要将它们用反斜杠转义。<em>在 3.7 版更改:</em> 如果一个字符串构建的语义在未来会改变的话，一个 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#FutureWarning" target="_blank" rel="noopener"><code>FutureWarning</code></a> 会 <code>raise</code> 。</p>
</li>
<li><p><code>|</code></p>
<p><code>A|B</code>， <em>A</em> 和 <em>B</em> 可以是任意正则表达式，创建一个正则表达式，匹配 <em>A</em> 或者 <em>B</em>. 任意个正则表达式可以用 <code>&#39;|&#39;</code> 连接。它也可以在组合（见下列）内使用。扫描目标字符串时， <code>&#39;|&#39;</code> 分隔开的正则样式从左到右进行匹配。当一个样式完全匹配时，这个分支就被接受。意思就是，一旦 <em>A</em> 匹配成功， <em>B</em> 就不再进行匹配，即便它能产生一个更好的匹配。或者说，<code>&#39;|&#39;</code> 操作符绝不贪婪。 如果要匹配 <code>&#39;|&#39;</code> 字符，使用 <code>\|</code>， 或者把它包含在字符集里，比如 <code>[|]</code>.</p>
</li>
<li><p><code>(...)</code></p>
<p>（组合），匹配括号内的任意正则表达式，并标识出组合的开始和结尾。匹配完成后，组合的内容可以被获取，并可以在之后用 <code>\number</code> 转义序列进行再次匹配，之后进行详细说明。要匹配字符 <code>&#39;(&#39;</code> 或者 <code>&#39;)&#39;</code>, 用 <code>\(</code> 或 <code>\)</code>, 或者把它们包含在字符集合里: <code>[(]</code>, <code>[)]</code>.</p>
</li>
<li><p><code>(?…)</code></p>
<p>这是个扩展标记法 （一个 <code>&#39;?&#39;</code> 跟随 <code>&#39;(&#39;</code> 并无含义）。 <code>&#39;?&#39;</code> 后面的第一个字符决定了这个构建采用什么样的语法。这种扩展通常并不创建新的组合； <code>(?P...)</code> 是唯一的例外。 以下是目前支持的扩展。</p>
</li>
<li><p><code>(?aiLmsux)</code></p>
<p>( <code>&#39;a&#39;</code>, <code>&#39;i&#39;</code>, <code>&#39;L&#39;</code>, <code>&#39;m&#39;</code>, <code>&#39;s&#39;</code>, <code>&#39;u&#39;</code>, <code>&#39;x&#39;</code> 中的一个或多个) 这个组合匹配一个空字符串；这些字符对正则表达式设置以下标记 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.A" target="_blank" rel="noopener"><code>re.A</code></a> (只匹配ASCII字符), <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.I" target="_blank" rel="noopener"><code>re.I</code></a> (忽略大小写), <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.L" target="_blank" rel="noopener"><code>re.L</code></a> (语言依赖), <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.M" target="_blank" rel="noopener"><code>re.M</code></a> (多行模式), <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.S" target="_blank" rel="noopener"><code>re.S</code></a> (点dot匹配全部字符), <code>re.U</code> (Unicode匹配), and <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.X" target="_blank" rel="noopener"><code>re.X</code></a> (冗长模式)。 (这些标记在 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#contents-of-module-re" target="_blank" rel="noopener">模块内容</a> 中描述) 如果你想将这些标记包含在正则表达式中，这个方法就很有用，免去了在 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.compile" target="_blank" rel="noopener"><code>re.compile()</code></a> 中传递 <em>flag</em> 参数。标记应该在表达式字符串首位表示。</p>
</li>
<li><p><code>(?:…)</code></p>
<p>正则括号的非捕获版本。 匹配在括号内的任何正则表达式，但该分组所匹配的子字符串 <em>不能</em> 在执行匹配后被获取或是之后在模式中被引用。</p>
</li>
<li><p><code>(?aiLmsux-imsx:…)</code></p>
<p>(<code>&#39;a&#39;</code>, <code>&#39;i&#39;</code>, <code>&#39;L&#39;</code>, <code>&#39;m&#39;</code>, <code>&#39;s&#39;</code>, <code>&#39;u&#39;</code>, <code>&#39;x&#39;</code> 中的0或者多个， 之后可选跟随 <code>&#39;-&#39;</code> 在后面跟随 <code>&#39;i&#39;</code> , <code>&#39;m&#39;</code> , <code>&#39;s&#39;</code> , <code>&#39;x&#39;</code> 中的一到多个 .) 这些字符为表达式的其中一部分 <em>设置</em> 或者 <em>去除</em> 相应标记 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.A" target="_blank" rel="noopener"><code>re.A</code></a> (只匹配ASCII), <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.I" target="_blank" rel="noopener"><code>re.I</code></a> (忽略大小写), <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.L" target="_blank" rel="noopener"><code>re.L</code></a> (语言依赖), <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.M" target="_blank" rel="noopener"><code>re.M</code></a> (多行), <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.S" target="_blank" rel="noopener"><code>re.S</code></a> (点匹配所有字符), <code>re.U</code> (Unicode匹配), and <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.X" target="_blank" rel="noopener"><code>re.X</code></a> (冗长模式)。(标记描述在 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#contents-of-module-re" target="_blank" rel="noopener">模块内容</a> .)<code>&#39;a&#39;</code>, <code>&#39;L&#39;</code> and <code>&#39;u&#39;</code> 作为内联标记是相互排斥的， 所以它们不能结合在一起，或者跟随 <code>&#39;-&#39;</code> 。 当他们中的某个出现在内联组中，它就覆盖了括号组内的匹配模式。在Unicode样式中， <code>(?a:...)</code> 切换为 只匹配ASCII， <code>(?u:...)</code> 切换为Unicode匹配 (默认). 在byte样式中 <code>(?L:...)</code> 切换为语言依赖模式， <code>(?a:...)</code> 切换为 只匹配ASCII (默认)。这种方式只覆盖组合内匹配，括号外的匹配模式不受影响。<em>3.6 新版功能.**在 3.7 版更改:</em> 符号 <code>&#39;a&#39;</code>, <code>&#39;L&#39;</code> 和 <code>&#39;u&#39;</code> 同样可以用在一个组合内。</p>
</li>
<li><p><code>(?P…)</code></p>
<p>（命名组合）类似正则组合，但是匹配到的子串组在外部是通过定义的 <em>name</em> 来获取的。组合名必须是有效的Python标识符，并且每个组合名只能用一个正则表达式定义，只能定义一次。一个符号组合同样是一个数字组合，就像这个组合没有被命名一样。命名组合可以在三种上下文中引用。如果样式是 <code>(?P[&#39;&quot;]).*?(?P=quote)</code> （也就是说，匹配单引号或者双引号括起来的字符串)：引用组合 “quote” 的上下文引用方法在正则式自身内<code>(?P=quote)</code> (如示)<code>\1</code>处理匹配对象 <em>m</em><code>m.group(&#39;quote&#39;)m.end(&#39;quote&#39;)</code> (等)传递到 <code>re.sub()</code> 里的 <em>repl</em> 参数中<code>\g\g&lt;1&gt;\1</code></p>
</li>
<li><p><code>(?P=name)</code></p>
<p>反向引用一个命名组合；它匹配前面那个叫 <em>name</em> 的命名组中匹配到的串同样的字串。</p>
</li>
<li><p><code>(?#…)</code></p>
<p>注释；里面的内容会被忽略。</p>
</li>
<li><p><code>(?=…)</code></p>
<p>匹配 <code>…</code> 的内容，但是并不消费样式的内容。这个叫做 <em>lookahead assertion</em>。比如， <code>Isaac (?=Asimov)</code> 匹配 <code>&#39;Isaac &#39;</code> 只有在后面是 <code>&#39;Asimov&#39;</code> 的时候。</p>
</li>
<li><p><code>(?!…)</code></p>
<p>匹配 <code>…</code> 不符合的情况。这个叫 <em>negative lookahead assertion</em> （前视取反）。比如说， <code>Isaac (?!Asimov)</code> 只有后面 <em>不</em> 是 <code>&#39;Asimov&#39;</code> 的时候才匹配 <code>&#39;Isaac &#39;</code> 。</p>
</li>
<li><p><code>(?&lt;=…)</code></p>
<p>匹配字符串的当前位置，它的前面匹配 <code>…</code> 的内容到当前位置。这叫:dfn:positive lookbehind assertion （正向后视断定）。 <code>(?&lt;=abc)def</code> 会在 <code>&#39;abcdef&#39;</code> 中找到一个匹配，因为后视会往后看3个字符并检查是否包含匹配的样式。包含的匹配样式必须是定长的，意思就是 <code>abc</code> 或 <code>a|b</code> 是允许的，但是 <code>a*</code> 和 <code>a{3,4}</code> 不可以。注意以 positive lookbehind assertions 开始的样式，如 <code>(?&lt;=abc)def</code> ，并不是从 a 开始搜索，而是从 d 往回看的。你可能更加愿意使用 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.search" target="_blank" rel="noopener"><code>search()</code></a> 函数，而不是 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.match" target="_blank" rel="noopener"><code>match()</code></a> 函数：&gt;&gt;&gt;<code>&gt;&gt;&gt; import re &gt;&gt;&gt; m = re.search(&#39;(?&lt;=abc)def&#39;, &#39;abcdef&#39;) &gt;&gt;&gt; m.group(0) &#39;def&#39;</code>这个例子搜索一个跟随在连字符后的单词：&gt;&gt;&gt;<code>&gt;&gt;&gt; m = re.search(r&#39;(?&lt;=-)\w+&#39;, &#39;spam-egg&#39;) &gt;&gt;&gt; m.group(0) &#39;egg&#39;</code><em>在 3.5 版更改:</em> 添加定长组合引用的支持。</p>
</li>
<li><p>`(?</p>
<p>匹配当前位置之前不是 <code>...</code> 的样式。这个叫 <em>negative lookbehind assertion</em> （后视断定取非）。类似正向后视断定，包含的样式匹配必须是定长的。由 negative lookbehind assertion 开始的样式可以从字符串搜索开始的位置进行匹配。</p>
</li>
<li><p><code>(?(id/name)yes-pattern|no-pattern)</code></p>
<p>如果给定的 <em>id</em> 或 <em>name</em> 存在，将会尝试匹配 <code>yes-pattern</code> ，否则就尝试匹配 <code>no-pattern</code>，<code>no-pattern</code> 可选，也可以被忽略。比如， <code>(&lt;)?(\w+@\w+(?:\.\w+)+)(?(1)&gt;|$)</code> 是一个email样式匹配，将匹配 <code>&#39;&#39;</code> 或 <a href="mailto:`&#39;user@host.com" target="_blank" rel="noopener">`&#39;user@host.com</a>‘<code>，但不会匹配</code>‘ ，也不会匹配 <a href="mailto:`&#39;user@host.com" target="_blank" rel="noopener">`&#39;user@host.com</a>&gt;’`。</p>
</li>
</ul>
<p>由 <code>&#39;\&#39;</code> 和一个字符组成的特殊序列在以下列出。 如果普通字符不是ASCII数位或者ASCII字母，那么正则样式将匹配第二个字符。比如，<code>\$</code> 匹配字符 <code>&#39;$&#39;</code>.</p>
<ul>
<li><p><code>\number</code></p>
<p>匹配数字代表的组合。每个括号是一个组合，组合从1开始编号。比如 <code>(.+) \1</code> 匹配 <code>&#39;the the&#39;</code> 或者 <code>&#39;55 55&#39;</code>, 但不会匹配 <code>&#39;thethe&#39;</code> (注意组合后面的空格)。这个特殊序列只能用于匹配前面99个组合。如果 <em>number</em> 的第一个数位是0， 或者 <em>number</em> 是三个八进制数，它将不会被看作是一个组合，而是八进制的数字值。在 <code>&#39;[&#39;</code> 和 <code>&#39;]&#39;</code> 字符集合内，任何数字转义都被看作是字符。</p>
</li>
<li><p><code>\A</code></p>
<p>只匹配字符串开始。</p>
</li>
<li><p><code>\b</code></p>
<p>匹配空字符串，但只在单词开始或结尾的位置。一个单词被定义为一个单词字符的序列。注意，通常 <code>\b</code> 定义为 <code>\w</code> 和 <code>\W</code> 字符之间，或者 <code>\w</code> 和字符串开始/结尾的边界， 意思就是 <code>r&#39;\bfoo\b&#39;</code> 匹配 <code>&#39;foo&#39;</code>, <code>&#39;foo.&#39;</code>, <code>&#39;(foo)&#39;</code>, <code>&#39;bar foo baz&#39;</code> 但不匹配 <code>&#39;foobar&#39;</code> 或者 <code>&#39;foo3&#39;</code>。默认情况下，Unicode字母和数字是在Unicode样式中使用的，但是可以用 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.ASCII" target="_blank" rel="noopener"><code>ASCII</code></a> 标记来更改。如果 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.LOCALE" target="_blank" rel="noopener"><code>LOCALE</code></a> 标记被设置的话，词的边界是由当前语言区域设置决定的，<code>\b</code> 表示退格字符，以便与Python字符串文本兼容。</p>
</li>
<li><p><code>\B</code></p>
<p>匹配空字符串，但 <em>不</em> 能在词的开头或者结尾。意思就是 <code>r&#39;py\B&#39;</code> 匹配 <code>&#39;python&#39;</code>, <code>&#39;py3&#39;</code>, <code>&#39;py2&#39;</code>, 但不匹配 <code>&#39;py&#39;</code>, <code>&#39;py.&#39;</code>, 或者 <code>&#39;py!&#39;</code>. <code>\B</code> 是 <code>\b</code> 的取非，所以Unicode样式的词语是由Unicode字母，数字或下划线构成的，虽然可以用 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.ASCII" target="_blank" rel="noopener"><code>ASCII</code></a> 标志来改变。如果使用了 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.LOCALE" target="_blank" rel="noopener"><code>LOCALE</code></a> 标志，则词的边界由当前语言区域设置。</p>
</li>
<li><p><code>\d</code></p>
<p>对于 Unicode (str) 样式：匹配任何Unicode十进制数（就是在Unicode字符目录[Nd]里的字符）。这包括了 <code>[0-9]</code> ，和很多其他的数字字符。如果设置了 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.ASCII" target="_blank" rel="noopener"><code>ASCII</code></a> 标志，就只匹配 <code>[0-9]</code> 。对于8位(bytes)样式：匹配任何十进制数，就是 <code>[0-9]</code>。</p>
</li>
<li><p><code>\D</code></p>
<p>匹配任何非十进制数字的字符。就是 <code>\d</code> 取非。 如果设置了 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.ASCII" target="_blank" rel="noopener"><code>ASCII</code></a> 标志，就相当于 <code>[^0-9]</code> 。</p>
</li>
<li><p><code>\s</code></p>
<p>对于 Unicode (str) 样式：匹配任何Unicode空白字符（包括 <code>[ \t\n\r\f\v]</code> ，还有很多其他字符，比如不同语言排版规则约定的不换行空格）。如果 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.ASCII" target="_blank" rel="noopener"><code>ASCII</code></a> 被设置，就只匹配 <code>[ \t\n\r\f\v]</code> 。对于8位(bytes)样式：匹配ASCII中的空白字符，就是 <code>[ \t\n\r\f\v]</code> 。</p>
</li>
<li><p><code>\S</code></p>
<p>匹配任何非空白字符。就是 <code>\s</code> 取非。如果设置了 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.ASCII" target="_blank" rel="noopener"><code>ASCII</code></a> 标志，就相当于 <code>[^ \t\n\r\f\v]</code> 。</p>
</li>
<li><p><code>\w</code></p>
<p>对于 Unicode (str) 样式：匹配Unicode词语的字符，包含了可以构成词语的绝大部分字符，也包括数字和下划线。如果设置了 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.ASCII" target="_blank" rel="noopener"><code>ASCII</code></a> 标志，就只匹配 <code>[a-zA-Z0-9_]</code> 。对于8位(bytes)样式：匹配ASCII字符中的数字和字母和下划线，就是 <code>[a-zA-Z0-9_]</code> 。如果设置了 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.LOCALE" target="_blank" rel="noopener"><code>LOCALE</code></a> 标记，就匹配当前语言区域的数字和字母和下划线。</p>
</li>
<li><p><code>\W</code></p>
<p>匹配任何不是单词字符的字符。 这与 <code>\w</code> 正相反。 如果使用了 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.ASCII" target="_blank" rel="noopener"><code>ASCII</code></a> 旗标，这就等价于 <code>[^a-zA-Z0-9_]</code>。 如果使用了 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.LOCALE" target="_blank" rel="noopener"><code>LOCALE</code></a> 旗标，则会匹配在当前区域设置中不是字母数字又不是下划线的字符。</p>
</li>
<li><p><code>\Z</code></p>
<p>只匹配字符串尾。</p>
</li>
</ul>
<p>绝大部分Python的标准转义字符也被正则表达式分析器支持。:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">\a      \b      \f      \n</span><br><span class="line">\N      \r      \t      \u</span><br><span class="line">\U      \v      \x      \\</span><br></pre></td></tr></table></figure>
<p>（注意 <code>\b</code> 被用于表示词语的边界，它只在字符集合内表示退格，比如 <code>[\b]</code> 。）</p>
<p><code>&#39;\u&#39;</code>, <code>&#39;\U&#39;</code> 和 <code>&#39;\N&#39;</code> 转义序列只在 Unicode 模式中可被识别。 在 bytes 模式中它们会导致错误。 未知的 ASCII 字母转义序列保留在未来使用，会被当作错误来处理。</p>
<p>八进制转义包含为一个有限形式。如果首位数字是 0， 或者有三个八进制数位，那么就认为它是八进制转义。其他的情况，就看作是组引用。对于字符串文本，八进制转义最多有三个数位长。</p>
<p><em>在 3.3 版更改:</em> 增加了 <code>&#39;\u&#39;</code> 和 <code>&#39;\U&#39;</code> 转义序列。</p>
<p><em>在 3.6 版更改:</em> 由 <code>&#39;\&#39;</code> 和一个ASCII字符组成的未知转义会被看成错误。</p>
<p><em>在 3.8 版更改:</em> 添加了 <code>&#39;\N{name}&#39;</code> 转义序列。 与在字符串字面值中一样，它扩展了命名 Unicode 字符 (例如 <code>&#39;\N{EM DASH}&#39;</code>)。</p>
<h2 id="模块内容"><a href="#模块内容" class="headerlink" title="模块内容"></a>模块内容</h2><p>模块定义了几个函数，常量，和一个例外。有些函数是编译后的正则表达式方法的简化版本（少了一些特性）。绝大部分重要的应用，总是会先将正则表达式编译，之后在进行操作。</p>
<p><em>在 3.6 版更改:</em> 标志常量现在是 <code>RegexFlag</code> 类的实例，这个类是 <a href="https://docs.python.org/zh-cn/3.8/library/enum.html#enum.IntFlag" target="_blank" rel="noopener"><code>enum.IntFlag</code></a> 的子类。</p>
<ul>
<li><p><code>re.compile</code>(<em>pattern</em>, <em>flags=0</em>)</p>
<p>将正则表达式的样式编译为一个 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re-objects" target="_blank" rel="noopener">正则表达式对象</a> （正则对象），可以用于匹配，通过这个对象的方法 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.Pattern.match" target="_blank" rel="noopener"><code>match()</code></a>, <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.Pattern.search" target="_blank" rel="noopener"><code>search()</code></a> 以及其他如下描述。这个表达式的行为可以通过指定 <em>标记</em> 的值来改变。值可以是以下任意变量，可以通过位的OR操作来结合（ <code>|</code> 操作符）。</p>
<p>序列</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">prog = re.compile(pattern)</span><br><span class="line">result = prog.match(string)</span><br></pre></td></tr></table></figure>
<p>等价于</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = re.match(pattern, string)</span><br></pre></td></tr></table></figure>
<p>如果需要多次使用这个正则表达式的话，使用 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.compile" target="_blank" rel="noopener"><code>re.compile()</code></a> 和保存这个正则对象以便复用，可以让程序更加高效。</p>
<p>注解：通过 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.compile" target="_blank" rel="noopener"><code>re.compile()</code></a> 编译后的样式，和模块级的函数会被缓存， 所以少数的正则表达式使用无需考虑编译的问题。</p>
</li>
<li><p><code>re.A</code></p>
</li>
<li><p><code>re.ASCII</code></p>
<p>让 <code>\w</code>, <code>\W</code>, <code>\b</code>, <code>\B</code>, <code>\d</code>, <code>\D</code>, <code>\s</code> 和 <code>\S</code> 只匹配ASCII，而不是Unicode。这只对Unicode样式有效，会被byte样式忽略。相当于前面语法中的内联标志 <code>(?a)</code> 。注意，为了保持向后兼容， <code>re.U</code> 标记依然存在（还有他的同义 <code>re.UNICODE</code> 和嵌入形式 <code>(?u)</code> ) ， 但是这些在 Python 3 是冗余的，因为默认字符串已经是Unicode了（并且Unicode匹配不允许byte出现)。</p>
</li>
<li><p><code>re.DEBUG</code></p>
<p>显示编译时的debug信息，没有内联标记。</p>
</li>
<li><p><code>re.I</code></p>
</li>
<li><p><code>re.IGNORECASE</code></p>
<p>进行忽略大小写匹配；表达式如 <code>[A-Z]</code> 也会匹配小写字符。Unicode匹配（比如 <code>Ü</code> 匹配 <code>ü</code>）同样有用，除非设置了 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.ASCII" target="_blank" rel="noopener"><code>re.ASCII</code></a> 标记来禁用非ASCII匹配。当前语言区域不会改变这个标记，除非设置了 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.LOCALE" target="_blank" rel="noopener"><code>re.LOCALE</code></a> 标记。这个相当于内联标记 <code>(?i)</code> 。注意，当设置了 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.IGNORECASE" target="_blank" rel="noopener"><code>IGNORECASE</code></a> 标记，搜索Unicode样式 <code>[a-z]</code> 或 <code>[A-Z]</code> 的结合时，它将会匹配52个ASCII字符和4个额外的非ASCII字符： ‘İ’ (U+0130, 拉丁大写的 I 带个点在上面), ‘ı’ (U+0131, 拉丁小写没有点的 I ), ‘ſ’ (U+017F, 拉丁小写长 s) and ‘K’ (U+212A, 开尔文符号).如果使用 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.ASCII" target="_blank" rel="noopener"><code>ASCII</code></a> 标记，就只匹配 ‘a’ 到 ‘z’ 和 ‘A’ 到 ‘Z’ 。</p>
</li>
<li><p><code>re.L</code></p>
</li>
<li><p><code>re.LOCALE</code></p>
<p>由当前语言区域决定 <code>\w</code>, <code>\W</code>, <code>\b</code>, <code>\B</code> 和大小写敏感匹配。这个标记只能对byte样式有效。这个标记不推荐使用，因为语言区域机制很不可靠，它一次只能处理一个 “习惯”，而且只对8位字节有效。Unicode匹配在Python 3 里默认启用，并可以处理不同语言。 这个对应内联标记 <code>(?L)</code> 。</p>
<p><em>在 3.6 版更改:</em> <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.LOCALE" target="_blank" rel="noopener"><code>re.LOCALE</code></a> 只能用于byte样式，而且不能和 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.ASCII" target="_blank" rel="noopener"><code>re.ASCII</code></a> 一起用。</p>
<p><em>在 3.7 版更改:</em> 设置了 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.LOCALE" target="_blank" rel="noopener"><code>re.LOCALE</code></a> 标记的编译正则对象不再在编译时依赖语言区域设置。语言区域设置只在匹配的时候影响其结果。</p>
</li>
<li><p><code>re.M</code></p>
</li>
<li><p><code>re.MULTILINE</code></p>
<p>设置以后，样式字符 <code>&#39;^&#39;</code> 匹配字符串的开始，和每一行的开始（换行符后面紧跟的符号）；样式字符 <code>&#39;$&#39;</code> 匹配字符串尾，和每一行的结尾（换行符前面那个符号）。默认情况下，<code>’^’</code> 匹配字符串头，<code>&#39;$&#39;</code> 匹配字符串尾。对应内联标记 <code>(?m)</code> 。</p>
</li>
<li><p><code>re.S</code></p>
</li>
<li><p><code>re.DOTALL</code></p>
<p>让 <code>&#39;.&#39;</code> 特殊字符匹配任何字符，包括换行符；如果没有这个标记，<code>&#39;.&#39;</code> 就匹配 <em>除了</em> 换行符的其他任意字符。对应内联标记 <code>(?s)</code> 。</p>
</li>
<li><p><code>re.X</code></p>
</li>
<li><p><code>re.VERBOSE</code></p>
<p>这个标记允许你编写更具可读性更友好的正则表达式。通过分段和添加注释。空白符号会被忽略，除非在一个字符集合当中或者由反斜杠转义，或者在 <code>*?</code>, <code>(?:</code> or <code>(?P&lt;…&gt;</code> 分组之内。当一个行内有 <code>#</code> 不在字符集和转义序列，那么它之后的所有字符都是注释。意思就是下面两个正则表达式等价地匹配一个十进制数字：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = re.compile(<span class="string">r"""\d +  # the integral part</span></span><br><span class="line"><span class="string">                   \.    # the decimal point</span></span><br><span class="line"><span class="string">                   \d *  # some fractional digits"""</span>, re.X)</span><br><span class="line">b = re.compile(<span class="string">r"\d+\.\d*"</span>)</span><br></pre></td></tr></table></figure>
<p>对应内联标记 <code>(?x)</code> 。</p>
</li>
<li><p><code>re.search</code>(<em>pattern</em>, <em>string</em>, <em>flags=0</em>)</p>
<p>扫描整个 <em>字符串</em> 找到匹配样式的第一个位置，并返回一个相应的 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#match-objects" target="_blank" rel="noopener">匹配对象</a>。如果没有匹配，就返回一个 <code>None</code> ； 注意这和找到一个零长度匹配是不同的。</p>
</li>
<li><p><code>re.match</code>(<em>pattern</em>, <em>string</em>, <em>flags=0</em>)</p>
<p>如果 <em>string</em> 开始的0或者多个字符匹配到了正则表达式样式，就返回一个相应的 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#match-objects" target="_blank" rel="noopener">匹配对象</a> 。 如果没有匹配，就返回 <code>None</code> ；注意它跟零长度匹配是不同的。注意即便是 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.MULTILINE" target="_blank" rel="noopener"><code>MULTILINE</code></a> 多行模式， <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.match" target="_blank" rel="noopener"><code>re.match()</code></a> 也只匹配字符串的开始位置，而不匹配每行开始。如果你想定位 <em>string</em> 的任何位置，使用 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.search" target="_blank" rel="noopener"><code>search()</code></a> 来替代（也可参考 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#search-vs-match" target="_blank" rel="noopener">search() vs. match()</a> ）</p>
</li>
<li><p><code>re.fullmatch</code>(<em>pattern</em>, <em>string</em>, <em>flags=0</em>)</p>
<p>如果整个 <em>string</em> 匹配到正则表达式样式，就返回一个相应的 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#match-objects" target="_blank" rel="noopener">匹配对象</a> 。 否则就返回一个 <code>None</code> ；注意这跟零长度匹配是不同的。<em>3.4 新版功能.</em></p>
</li>
<li><p><code>re.split</code>(<em>pattern</em>, <em>string</em>, <em>maxsplit=0</em>, <em>flags=0</em>)</p>
<p>用 <em>pattern</em> 分开 <em>string</em> 。 如果在 <em>pattern</em> 中捕获到括号，那么所有的组里的文字也会包含在列表里。如果 <em>maxsplit</em> 非零， 最多进行 <em>maxsplit</em> 次分隔， 剩下的字符全部返回到列表的最后一个元素。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.split(<span class="string">r'\W+'</span>, <span class="string">'Words, words, words.'</span>)</span><br><span class="line">[<span class="string">'Words'</span>, <span class="string">'words'</span>, <span class="string">'words'</span>, <span class="string">''</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.split(<span class="string">r'(\W+)'</span>, <span class="string">'Words, words, words.'</span>)</span><br><span class="line">[<span class="string">'Words'</span>, <span class="string">', '</span>, <span class="string">'words'</span>, <span class="string">', '</span>, <span class="string">'words'</span>, <span class="string">'.'</span>, <span class="string">''</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.split(<span class="string">r'\W+'</span>, <span class="string">'Words, words, words.'</span>, <span class="number">1</span>)</span><br><span class="line">[<span class="string">'Words'</span>, <span class="string">'words, words.'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.split(<span class="string">'[a-f]+'</span>, <span class="string">'0a3B9'</span>, flags=re.IGNORECASE)</span><br><span class="line">[<span class="string">'0'</span>, <span class="string">'3'</span>, <span class="string">'9'</span>]</span><br></pre></td></tr></table></figure>
<p>如果分隔符里有捕获组合，并且匹配到字符串的开始，那么结果将会以一个空字符串开始。对于结尾也是一样</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.split(<span class="string">r'(\W+)'</span>, <span class="string">'...words, words...'</span>)</span><br><span class="line">[<span class="string">''</span>, <span class="string">'...'</span>, <span class="string">'words'</span>, <span class="string">', '</span>, <span class="string">'words'</span>, <span class="string">'...'</span>, <span class="string">''</span>]</span><br></pre></td></tr></table></figure>
<p>这样的话，分隔组将会出现在结果列表中同样的位置。</p>
<p>样式的空匹配将分开字符串，但只在不相临的状况生效。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.split(<span class="string">r'\b'</span>, <span class="string">'Words, words, words.'</span>)</span><br><span class="line">  [<span class="string">''</span>, <span class="string">'Words'</span>, <span class="string">', '</span>, <span class="string">'words'</span>, <span class="string">', '</span>, <span class="string">'words'</span>, <span class="string">'.'</span>]</span><br><span class="line">  &gt;&gt;&gt; re.split(<span class="string">r'\W*'</span>, <span class="string">'...words...'</span>)</span><br><span class="line">  [<span class="string">''</span>, <span class="string">''</span>, <span class="string">'w'</span>, <span class="string">'o'</span>, <span class="string">'r'</span>, <span class="string">'d'</span>, <span class="string">'s'</span>, <span class="string">''</span>, <span class="string">''</span>]</span><br><span class="line">  &gt;&gt;&gt; re.split(<span class="string">r'(\W*)'</span>, <span class="string">'...words...'</span>)</span><br><span class="line">  [<span class="string">''</span>, <span class="string">'...'</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">'w'</span>, <span class="string">''</span>, <span class="string">'o'</span>, <span class="string">''</span>, <span class="string">'r'</span>, <span class="string">''</span>, <span class="string">'d'</span>, <span class="string">''</span>, <span class="string">'s'</span>, <span class="string">'...'</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>  <em>在 3.1 版更改:</em> 增加了可选标记参数。</p>
<p>  <em>在 3.7 版更改:</em> 增加了空字符串的样式分隔。</p>
<ul>
<li><p><code>re.findall</code>(<em>pattern</em>, <em>string</em>, <em>flags=0</em>)</p>
<p>对 <em>string</em> 返回一个不重复的 <em>pattern</em> 的匹配列表， <em>string</em> 从左到右进行扫描，匹配按找到的顺序返回。如果样式里存在一到多个组，就返回一个组合列表；就是一个元组的列表（如果样式里有超过一个组合的话）。空匹配也会包含在结果里。</p>
<p><em>在 3.7 版更改:</em> 非空匹配现在可以在前一个空匹配之后出现了。</p>
</li>
<li><p><code>re.finditer</code>(<em>pattern</em>, <em>string</em>, <em>flags=0</em>)</p>
<p><em>pattern</em> 在 <em>string</em> 里所有的非重复匹配，返回为一个迭代器 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-iterator" target="_blank" rel="noopener">iterator</a> 保存了 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#match-objects" target="_blank" rel="noopener">匹配对象</a> 。 <em>string</em> 从左到右扫描，匹配按顺序排列。空匹配也包含在结果里。<em>在 3.7 版更改:</em> 非空匹配现在可以在前一个空匹配之后出现了。</p>
</li>
<li><p><code>re.sub</code>(<em>pattern</em>, <em>repl</em>, <em>string</em>, <em>count=0</em>, <em>flags=0</em>)</p>
<p>返回通过使用 <em>repl</em> 替换在 <em>string</em> 最左边非重叠出现的 <em>pattern</em> 而获得的字符串。 如果样式没有找到，则不加改变地返回 <em>string</em>。 <em>repl</em> 可以是字符串或函数；如为字符串，则其中任何反斜杠转义序列都会被处理。 也就是说，<code>\n</code> 会被转换为一个换行符，<code>\r</code> 会被转换为一个回车附，依此类推。 未知的 ASCII 字符转义序列保留在未来使用，会被当作错误来处理。 其他未知转义序列例如 <code>\&amp;</code> 会保持原样。 向后引用像是 <code>\6</code> 会用样式中第 6 组所匹配到的子字符串来替换。 例如:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.sub(<span class="string">r'def\s+([a-zA-Z_][a-zA-Z_0-9]*)\s*\(\s*\):'</span>,</span><br><span class="line"><span class="meta">... </span>       <span class="string">r'static PyObject*\npy_\1(void)\n&#123;'</span>,</span><br><span class="line"><span class="meta">... </span>       <span class="string">'def myfunc():'</span>)</span><br><span class="line"><span class="string">'static PyObject*\npy_myfunc(void)\n&#123;'</span></span><br></pre></td></tr></table></figure>
<p>如果 <em>repl</em> 是一个函数，那它会对每个非重复的 <em>pattern</em> 的情况调用。这个函数只能有一个 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#match-objects" target="_blank" rel="noopener">匹配对象</a> 参数，并返回一个替换后的字符串。比如</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">dashrepl</span><span class="params">(matchobj)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">if</span> matchobj.group(<span class="number">0</span>) == <span class="string">'-'</span>: <span class="keyword">return</span> <span class="string">' '</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">else</span>: <span class="keyword">return</span> <span class="string">'-'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.sub(<span class="string">'-&#123;1,2&#125;'</span>, dashrepl, <span class="string">'pro----gram-files'</span>)</span><br><span class="line"><span class="string">'pro--gram files'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.sub(<span class="string">r'\sAND\s'</span>, <span class="string">' &amp; '</span>, <span class="string">'Baked Beans And Spam'</span>, flags=re.IGNORECASE)</span><br><span class="line"><span class="string">'Baked Beans &amp; Spam'</span></span><br></pre></td></tr></table></figure>
<p> 样式可以是一个字符串或者一个<a href="https://docs.python.org/zh-cn/3.8/library/re.html#re-objects" target="_blank" rel="noopener">样式对象</a>。可选参数 <em>count</em> 是要替换的最大次数；<em>count</em> 必须是非负整数。如果忽略这个参数，或者设置为0，所有的匹配都会被替换。空匹配只在不相临连续的情况被更替，所以 <code>sub(&#39;x*&#39;, &#39;-&#39;, &#39;abxd&#39;)</code> 返回 <code>&#39;-a-b--d-&#39;</code> 。</p>
<p>在字符串类型的 <em>repl</em> 参数里，如上所述的转义和向后引用中，<code>\g</code> 会使用命名组合 <code>name</code>，（在 <code>(?P…)</code> 语法中定义） <code>\g</code> 会使用数字组；<code>\g&lt;2&gt;</code> 就是 <code>\2</code>，但它避免了二义性，如 <code>\g&lt;2&gt;0</code>。 <code>\20</code> 就会被解释为组20，而不是组2后面跟随一个字符 <code>&#39;0&#39;</code>。向后引用 <code>\g&lt;0&gt;</code> 把 <em>pattern</em> 作为一整个组进行引用。</p>
<p><em>在 3.1 版更改:</em> 增加了可选标记参数。</p>
<p><em>在 3.5 版更改:</em> 不匹配的组合替换为空字符串。<em>在 3.6 版更改:</em> <em>pattern</em> 中的未知转义（由 <code>&#39;\&#39;</code> 和一个 ASCII 字符组成）被视为错误。<em>在 3.7 版更改:</em> <em>repl</em> 中的未知转义（由 <code>&#39;\&#39;</code> 和一个 ASCII 字符组成）被视为错误。<em>在 3.7 版更改:</em> 样式中的空匹配相邻接时会被替换。</p>
</li>
<li><p><code>re.subn</code>(<em>pattern</em>, <em>repl</em>, <em>string</em>, <em>count=0</em>, <em>flags=0</em>)</p>
<p>行为与 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.sub" target="_blank" rel="noopener"><code>sub()</code></a> 相同，但是返回一个元组 <code>(字符串, 替换次数)</code>.<em>在 3.1 版更改:</em> 增加了可选标记参数。<em>在 3.5 版更改:</em> 不匹配的组合替换为空字符串。</p>
</li>
<li><p><code>re.escape</code>(<em>pattern</em>)</p>
<p>转义 <em>pattern</em> 中的特殊字符。如果你想对任意可能包含正则表达式元字符的文本字符串进行匹配，它就是有用的。比如</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(re.escape(<span class="string">'http://www.python.org'</span>))</span><br><span class="line">http://www\.python\.org</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>legal_chars = string.ascii_lowercase + string.digits + <span class="string">"!#$%&amp;'*+-.^_`|~:"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'[%s]+'</span> % re.escape(legal_chars))</span><br><span class="line">[abcdefghijklmnopqrstuvwxyz0123456789!\<span class="comment">#\$%\&amp;'\*\+\-\.\^_`\|\~:]+</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>operators = [<span class="string">'+'</span>, <span class="string">'-'</span>, <span class="string">'*'</span>, <span class="string">'/'</span>, <span class="string">'**'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'|'</span>.join(map(re.escape, sorted(operators, reverse=<span class="literal">True</span>))))</span><br><span class="line">/|\-|\+|\*\*|\*</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>  这个函数不能被用于 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.sub" target="_blank" rel="noopener"><code>sub()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.subn" target="_blank" rel="noopener"><code>subn()</code></a> 的替换字符串，只有反斜杠应该被转义。 例如:</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>digits_re = <span class="string">r'\d+'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sample = <span class="string">'/usr/sbin/sendmail - 0 errors, 12 warnings'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(re.sub(digits_re, digits_re.replace(<span class="string">'\\'</span>, <span class="string">r'\\'</span>), sample))</span><br><span class="line">/usr/sbin/sendmail - \d+ errors, \d+ warnings</span><br></pre></td></tr></table></figure>
<p>  <em>在 3.3 版更改:</em> <code>&#39;_&#39;</code> 不再被转义。<em>在 3.7 版更改:</em> 只有在正则表达式中具有特殊含义的字符才会被转义。 因此， <code>&#39;!&#39;</code>, <code>&#39;&quot;&#39;</code>, <code>&#39;%&#39;</code>, <code>&quot;&#39;&quot;</code>, <code>&#39;,&#39;</code>, <code>&#39;/&#39;</code>, <code>&#39;:&#39;</code>, <code>&#39;;&#39;</code>, <code>&#39;&lt;&#39;</code>, <code>&#39;=&#39;</code>, <code>&#39;&gt;&#39;</code>, <code>&#39;@&#39;</code> 和 <code>&quot;</code>“` 将不再会被转义。</p>
<ul>
<li><p><code>re.purge</code>()</p>
<p>清除正则表达式缓存。</p>
</li>
<li><p><em>exception</em> <code>re.error</code>(<em>msg</em>, <em>pattern=None</em>, <em>pos=None</em>)</p>
<p><code>raise</code> 一个例外。当传递到函数的字符串不是一个有效正则表达式的时候（比如，包含一个不匹配的括号）或者其他错误在编译时或匹配时产生。如果字符串不包含样式匹配，是不会被视为错误的。错误实例有以下附加属性：</p>
<ul>
<li><p><code>msg</code>未格式化的错误消息。</p>
</li>
<li><p><code>pattern</code>正则表达式样式。</p>
</li>
<li><p><code>pos</code>编译失败的 <em>pattern</em> 的位置索引（可以是 <code>None</code> ）。</p>
</li>
<li><p><code>lineno</code>对应 <em>pos</em> (可以是 <code>None</code>) 的行号。</p>
</li>
<li><p><code>colno</code>对应 <em>pos</em> (可以是 <code>None</code>) 的列号。</p>
<p><em>在 3.5 版更改:</em> 添加了附加属性。</p>
</li>
</ul>
</li>
</ul>
<h2 id="正则表达式对象-（正则对象）"><a href="#正则表达式对象-（正则对象）" class="headerlink" title="正则表达式对象 （正则对象）"></a>正则表达式对象 （正则对象）</h2><p>编译后的正则表达式对象支持一下方法和属性：</p>
<ul>
<li><p><code>Pattern.search</code>(<em>string</em>[, <em>pos</em>[, <em>endpos</em>]])</p>
<p>扫描整个 <em>string</em> 寻找第一个匹配的位置， 并返回一个相应的 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#match-objects" target="_blank" rel="noopener">匹配对象</a>。如果没有匹配，就返回 <code>None</code> ；注意它和零长度匹配是不同的。可选的第二个参数 <em>pos</em> 给出了字符串中开始搜索的位置索引；默认为 <code>0</code>，它不完全等价于字符串切片； <code>&#39;^&#39;</code> 样式字符匹配字符串真正的开头，和换行符后面的第一个字符，但不会匹配索引规定开始的位置。可选参数 <em>endpos</em> 限定了字符串搜索的结束；它假定字符串长度到 <em>endpos</em> ， 所以只有从 <code>pos</code> 到 <code>endpos - 1</code> 的字符会被匹配。如果 <em>endpos</em> 小于 <em>pos</em>，就不会有匹配产生；另外，如果 <em>rx</em> 是一个编译后的正则对象， <code>rx.search(string, 0, 50)</code> 等价于 <code>rx.search(string[:50], 0)</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pattern = re.compile(<span class="string">"d"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pattern.search(<span class="string">"dog"</span>)     <span class="comment"># Match at index 0</span></span><br><span class="line">&lt;re.Match object; span=(<span class="number">0</span>, <span class="number">1</span>), match=<span class="string">'d'</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pattern.search(<span class="string">"dog"</span>, <span class="number">1</span>)  <span class="comment"># No match; search doesn't include the "d"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Pattern.match</code>(<em>string</em>[, <em>pos</em>[, <em>endpos</em>]])</p>
<p>如果 <em>string</em> 的 <em>开始位置</em> 能够找到这个正则样式的任意个匹配，就返回一个相应的 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#match-objects" target="_blank" rel="noopener">匹配对象</a>。如果不匹配，就返回 <code>None</code> ；注意它与零长度匹配是不同的。可选参数 <em>pos</em> 和 <em>endpos</em> 与 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.Pattern.search" target="_blank" rel="noopener"><code>search()</code></a> 含义相同。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pattern = re.compile(<span class="string">"o"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pattern.match(<span class="string">"dog"</span>)      <span class="comment"># No match as "o" is not at the start of "dog".</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pattern.match(<span class="string">"dog"</span>, <span class="number">1</span>)   <span class="comment"># Match as "o" is the 2nd character of "dog".</span></span><br><span class="line">&lt;re.Match object; span=(<span class="number">1</span>, <span class="number">2</span>), match=<span class="string">'o'</span>&gt;</span><br></pre></td></tr></table></figure>
<p>如果你想定位匹配在 <em>string</em> 中的位置，使用 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.Pattern.search" target="_blank" rel="noopener"><code>search()</code></a> 来替代（另参考 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#search-vs-match" target="_blank" rel="noopener">search() vs. match()</a>）。</p>
</li>
<li><p><code>Pattern.fullmatch</code>(<em>string</em>[, <em>pos</em>[, <em>endpos</em>]])</p>
<p>如果整个 <em>string</em> 匹配这个正则表达式，就返回一个相应的 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#match-objects" target="_blank" rel="noopener">匹配对象</a> 。 否则就返回 <code>None</code> ； 注意跟零长度匹配是不同的。可选参数 <em>pos</em> 和 <em>endpos</em> 与 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.Pattern.search" target="_blank" rel="noopener"><code>search()</code></a> 含义相同.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pattern = re.compile(<span class="string">"o[gh]"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pattern.fullmatch(<span class="string">"dog"</span>)      <span class="comment"># No match as "o" is not at the start of "dog".</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pattern.fullmatch(<span class="string">"ogre"</span>)     <span class="comment"># No match as not the full string matches.</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pattern.fullmatch(<span class="string">"doggie"</span>, <span class="number">1</span>, <span class="number">3</span>)   <span class="comment"># Matches within given limits.</span></span><br><span class="line">&lt;re.Match object; span=(<span class="number">1</span>, <span class="number">3</span>), match=<span class="string">'og'</span>&gt;</span><br></pre></td></tr></table></figure>
<p><em>3.4 新版功能.</em></p>
</li>
<li><p><code>Pattern.split</code>(<em>string</em>, <em>maxsplit=0</em>)</p>
<p>等价于 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.split" target="_blank" rel="noopener"><code>split()</code></a> 函数，使用了编译后的样式。</p>
</li>
<li><p><code>Pattern.findall</code>(<em>string</em>[, <em>pos</em>[, <em>endpos</em>]])</p>
<p>类似函数 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.findall" target="_blank" rel="noopener"><code>findall()</code></a> ， 使用了编译后样式，但也可以接收可选参数 <em>pos</em> 和 <em>endpos</em> ，限制搜索范围，就像 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.search" target="_blank" rel="noopener"><code>search()</code></a>。</p>
</li>
<li><p><code>Pattern.finditer</code>(<em>string</em>[, <em>pos</em>[, <em>endpos</em>]])</p>
<p>类似函数 <code>finiter()</code> ， 使用了编译后样式，但也可以接收可选参数 <em>pos</em> 和 <em>endpos</em> ，限制搜索范围，就像 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.search" target="_blank" rel="noopener"><code>search()</code></a>。</p>
</li>
<li><p><code>Pattern.sub</code>(<em>repl</em>, <em>string</em>, <em>count=0</em>)</p>
<p>等价于 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.sub" target="_blank" rel="noopener"><code>sub()</code></a> 函数，使用了编译后的样式。</p>
</li>
<li><p><code>Pattern.subn</code>(<em>repl</em>, <em>string</em>, <em>count=0</em>)</p>
<p>等价于 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.subn" target="_blank" rel="noopener"><code>subn()</code></a> 函数，使用了编译后的样式。</p>
</li>
<li><p><code>Pattern.flags</code></p>
<p>正则匹配标记。这是可以传递给 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.compile" target="_blank" rel="noopener"><code>compile()</code></a> 的参数，任何 <code>(?…)</code> 内联标记，隐性标记比如 <code>UNICODE</code> 的结合。</p>
</li>
<li><p><code>Pattern.groups</code></p>
<p>捕获组合的数量。</p>
</li>
<li><p><code>Pattern.groupindex</code></p>
<p>映射由 <code>(?P)</code> 定义的命名符号组合和数字组合的字典。如果没有符号组，那字典就是空的。</p>
</li>
<li><p><code>Pattern.pattern</code></p>
<p>编译对象的原始样式字符串。</p>
</li>
</ul>
<p><em>在 3.7 版更改:</em> 添加 <a href="https://docs.python.org/zh-cn/3.8/library/copy.html#copy.copy" target="_blank" rel="noopener"><code>copy.copy()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/copy.html#copy.deepcopy" target="_blank" rel="noopener"><code>copy.deepcopy()</code></a> 函数的支持。编译后的正则表达式对象被认为是原子性的。</p>
<h2 id="匹配对象"><a href="#匹配对象" class="headerlink" title="匹配对象"></a>匹配对象</h2><p>匹配对象总是有一个布尔值 <code>True</code>。如果没有匹配的话 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.Pattern.match" target="_blank" rel="noopener"><code>match()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.Pattern.search" target="_blank" rel="noopener"><code>search()</code></a> 返回 <code>None</code> 所以你可以简单的用 <code>if</code> 语句来判断是否匹配</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">match = re.search(pattern, string)</span><br><span class="line">if match:</span><br><span class="line">    process(match)</span><br></pre></td></tr></table></figure>
<p>匹配对象支持以下方法和属性：</p>
<ul>
<li><p><code>Match.expand</code>(<em>template</em>)</p>
<p>对 <em>template</em> 进行反斜杠转义替换并且返回，就像 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.Pattern.sub" target="_blank" rel="noopener"><code>sub()</code></a> 方法中一样。转义如同 <code>\n</code> 被转换成合适的字符，数字引用(<code>\1</code>, <code>\2</code>)和命名组合(<code>\g&lt;1&gt;</code>, <code>\g</code>) 替换为相应组合的内容。<em>在 3.5 版更改:</em> 不匹配的组合替换为空字符串。</p>
</li>
<li><p><code>Match.group</code>([<em>group1</em>, <em>…</em>])</p>
<p>返回一个或者多个匹配的子组。如果只有一个参数，结果就是一个字符串，如果有多个参数，结果就是一个元组（每个参数对应一个项），如果没有参数，组1默认到0（整个匹配都被返回）。 如果一个组N 参数值为 0，相应的返回值就是整个匹配字符串；如果它是一个范围 [1..99]，结果就是相应的括号组字符串。如果一个组号是负数，或者大于样式中定义的组数，一个 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#IndexError" target="_blank" rel="noopener"><code>IndexError</code></a> 索引错误就 <code>raise</code>。如果一个组包含在样式的一部分，并被匹配多次，就返回最后一个匹配。:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.match(<span class="string">r"(\w+) (\w+)"</span>, <span class="string">"Isaac Newton, physicist"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.group(<span class="number">0</span>)       <span class="comment"># The entire match</span></span><br><span class="line"><span class="string">'Isaac Newton'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.group(<span class="number">1</span>)       <span class="comment"># The first parenthesized subgroup.</span></span><br><span class="line"><span class="string">'Isaac'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.group(<span class="number">2</span>)       <span class="comment"># The second parenthesized subgroup.</span></span><br><span class="line"><span class="string">'Newton'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.group(<span class="number">1</span>, <span class="number">2</span>)    <span class="comment"># Multiple arguments give us a tuple.</span></span><br><span class="line">(<span class="string">'Isaac'</span>, <span class="string">'Newton'</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>  <code>如果正则表达式使用了</code>(?P…)<code>语法， *groupN* 参数就也可能是命名组合的名字。如果一个字符串参数在样式中未定义为组合名，一个 [</code>IndexError<code>](https://docs.python.org/zh-cn/3.8/library/exceptions.html#IndexError) 就</code>raise<code>。</code></p>
<p>  `一个相对复杂的例子</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.match(<span class="string">r"(?P&lt;first_name&gt;\w+) (?P&lt;last_name&gt;\w+)"</span>, <span class="string">"Malcolm Reynolds"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.group(<span class="string">'first_name'</span>)</span><br><span class="line"><span class="string">'Malcolm'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.group(<span class="string">'last_name'</span>)</span><br><span class="line"><span class="string">'Reynolds'</span></span><br></pre></td></tr></table></figure>
<p>  如果一个组匹配成功多次，就只返回最后一个匹配</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.match(<span class="string">r"(..)+"</span>, <span class="string">"a1b2c3"</span>)  <span class="comment"># Matches 3 times.</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.group(<span class="number">1</span>)                        <span class="comment"># Returns only the last match.</span></span><br><span class="line"><span class="string">'c3'</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>Match.__getitem__</code>(<em>g</em>)</p>
<p>这个等价于 <code>m.group(g)</code>。这允许更方便的引用一个匹配</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.match(<span class="string">r"(\w+) (\w+)"</span>, <span class="string">"Isaac Newton, physicist"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m[<span class="number">0</span>]       <span class="comment"># The entire match</span></span><br><span class="line"><span class="string">'Isaac Newton'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m[<span class="number">1</span>]       <span class="comment"># The first parenthesized subgroup.</span></span><br><span class="line"><span class="string">'Isaac'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m[<span class="number">2</span>]       <span class="comment"># The second parenthesized subgroup.</span></span><br><span class="line"><span class="string">'Newton'</span></span><br></pre></td></tr></table></figure>
<p> ‘Newton’ `<em>3.6 新版功能.</em></p>
</li>
<li><p><code>Match.groups</code>(<em>default=None</em>)</p>
<p>返回一个元组，包含所有匹配的子组，在样式中出现的从1到任意多的组合。 <em>default</em> 参数用于不参与匹配的情况，默认为 <code>None</code>。例如</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.match(<span class="string">r"(\d+)\.(\d+)"</span>, <span class="string">"24.1632"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.groups()</span><br><span class="line">(<span class="string">'24'</span>, <span class="string">'1632'</span>)</span><br></pre></td></tr></table></figure>
<p>如果我们使小数点可选，那么不是所有的组都会参与到匹配当中。这些组合默认会返回一个 <code>None</code> ，除非指定了 <em>default</em> 参数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.match(<span class="string">r"(\d+)\.?(\d+)?"</span>, <span class="string">"24"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.groups()      <span class="comment"># Second group defaults to None.</span></span><br><span class="line">(<span class="string">'24'</span>, <span class="literal">None</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.groups(<span class="string">'0'</span>)   <span class="comment"># Now, the second group defaults to '0'.</span></span><br><span class="line">(<span class="string">'24'</span>, <span class="string">'0'</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Match.groupdict</code>(<em>default=None</em>)</p>
<p>返回一个字典，包含了所有的 <em>命名</em> 子组。key就是组名。 <em>default</em> 参数用于不参与匹配的组合；默认为 <code>None</code>。 例如</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.match(<span class="string">r"(?P&lt;first_name&gt;\w+) (?P&lt;last_name&gt;\w+)"</span>, <span class="string">"Malcolm Reynolds"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.groupdict()</span><br><span class="line">&#123;<span class="string">'first_name'</span>: <span class="string">'Malcolm'</span>, <span class="string">'last_name'</span>: <span class="string">'Reynolds'</span>&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Match.start</code>([<em>group</em>])</p>
</li>
<li><p><code>Match.end</code>([<em>group</em>])</p>
<p>返回 <em>group</em> 匹配到的字串的开始和结束标号。<em>group</em> 默认为0（意思是整个匹配的子串）。如果 <em>group</em> 存在，但未产生匹配，就返回 <code>-1</code> 。对于一个匹配对象 <em>m</em>， 和一个未参与匹配的组 <em>g</em> ，组 <em>g</em> (等价于 <code>m.group(g)</code>)产生的匹配是</p>
<p><code>m.string[m.start(g):m.end(g)]</code></p>
<p>注意 <code>m.start(group)</code> 将会等于 <code>m.end(group)</code> ，如果 <em>group</em> 匹配一个空字符串的话。比如，在 <code>m = re.search(&#39;b(c?)&#39;, &#39;cba&#39;)</code> 之后，<code>m.start(0)</code> 为 1, <code>m.end(0)</code> 为 2, <code>m.start(1)</code> 和 <code>m.end(1)</code> 都是 2, <code>m.start(2)</code> raise 一个 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#IndexError" target="_blank" rel="noopener"><code>IndexError</code></a> 例外。这个例子会从email地址中移除掉 <em>remove_this</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>email = <span class="string">"tony@tiremove_thisger.net"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.search(<span class="string">"remove_this"</span>, email)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>email[:m.start()] + email[m.end():]</span><br><span class="line"><span class="string">'tony@tiger.net'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Match.span</code>([<em>group</em>])</p>
<p>对于一个匹配 <em>m</em> ， 返回一个二元组 <code>(m.start(group), m.end(group))</code> 。 注意如果 <em>group</em> 没有在这个匹配中，就返回 <code>(-1, -1)</code> 。<em>group</em> 默认为0，就是整个匹配。</p>
</li>
<li><p><code>Match.pos</code></p>
<p><em>pos</em> 的值，会传递给 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.Pattern.search" target="_blank" rel="noopener"><code>search()</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.Pattern.match" target="_blank" rel="noopener"><code>match()</code></a> 的方法 a <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re-objects" target="_blank" rel="noopener">正则对象</a> 。这个是正则引擎开始在字符串搜索一个匹配的索引位置。</p>
</li>
<li><p><code>Match.endpos</code></p>
<p><em>endpos</em> 的值，会传递给 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.Pattern.search" target="_blank" rel="noopener"><code>search()</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.Pattern.match" target="_blank" rel="noopener"><code>match()</code></a> 的方法 a <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re-objects" target="_blank" rel="noopener">正则对象</a> 。这个是正则引擎停止在字符串搜索一个匹配的索引位置。</p>
</li>
<li><p><code>Match.lastindex</code></p>
<p>捕获组的最后一个匹配的整数索引值，或者 <code>None</code> 如果没有匹配产生的话。比如，对于字符串 <code>&#39;ab&#39;</code>，表达式 <code>(a)b</code>, <code>((a)(b))</code>, 和 <code>((ab))</code> 将得到 <code>lastindex == 1</code> ， 而 <code>(a)(b)</code> 会得到 <code>lastindex == 2</code> 。</p>
</li>
<li><p><code>Match.lastgroup</code></p>
<p>最后一个匹配的命名组名字，或者 <code>None</code> 如果没有产生匹配的话。</p>
</li>
<li><p><code>Match.re</code></p>
<p>返回产生这个实例的 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re-objects" target="_blank" rel="noopener">正则对象</a> ， 这个实例是由 正则对象的 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.Pattern.match" target="_blank" rel="noopener"><code>match()</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.Pattern.search" target="_blank" rel="noopener"><code>search()</code></a> 方法产生的。</p>
</li>
<li><p><code>Match.string</code></p>
<p>传递到 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.Pattern.match" target="_blank" rel="noopener"><code>match()</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.Pattern.search" target="_blank" rel="noopener"><code>search()</code></a> 的字符串。</p>
</li>
</ul>
<p><em>在 3.7 版更改:</em> 添加了对 <a href="https://docs.python.org/zh-cn/3.8/library/copy.html#copy.copy" target="_blank" rel="noopener"><code>copy.copy()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/copy.html#copy.deepcopy" target="_blank" rel="noopener"><code>copy.deepcopy()</code></a> 的支持。匹配对象被看作是原子性的。</p>
<h2 id="正则表达式例子"><a href="#正则表达式例子" class="headerlink" title="正则表达式例子"></a>正则表达式例子</h2><h3 id="检查对子"><a href="#检查对子" class="headerlink" title="检查对子"></a>检查对子</h3><p>在这个例子里，我们使用以下辅助函数来更好地显示匹配对象:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def displaymatch(match):</span><br><span class="line">    if match is None:</span><br><span class="line">        return None</span><br><span class="line">    return &apos;&lt;Match: %r, groups=%r&gt;&apos; % (match.group(), match.groups())</span><br></pre></td></tr></table></figure>
<p>假设你在写一个扑克程序，一个玩家的一手牌为五个字符的串，每个字符表示一张牌，”a” 就是 A, “k” K， “q” Q, “j” J, “t” 为 10, “2” 到 “9” 表示2 到 9。</p>
<p>要看给定的字符串是否有效，我们可以按照以下步骤</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>valid = re.compile(<span class="string">r"^[a2-9tjqk]&#123;5&#125;$"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>displaymatch(valid.match(<span class="string">"akt5q"</span>))  <span class="comment"># Valid.</span></span><br><span class="line"><span class="string">"&lt;Match: 'akt5q', groups=()&gt;"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>displaymatch(valid.match(<span class="string">"akt5e"</span>))  <span class="comment"># Invalid.</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>displaymatch(valid.match(<span class="string">"akt"</span>))    <span class="comment"># Invalid.</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>displaymatch(valid.match(<span class="string">"727ak"</span>))  <span class="comment"># Valid.</span></span><br><span class="line"><span class="string">"&lt;Match: '727ak', groups=()&gt;"</span></span><br></pre></td></tr></table></figure>
<p>最后一手牌，<code>&quot;727ak&quot;</code> ，包含了一个对子，或者两张同样数值的牌。要用正则表达式匹配它，应该使用向后引用如下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pair = re.compile(<span class="string">r".*(.).*\1"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>displaymatch(pair.match(<span class="string">"717ak"</span>))     <span class="comment"># Pair of 7s.</span></span><br><span class="line"><span class="string">"&lt;Match: '717', groups=('7',)&gt;"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>displaymatch(pair.match(<span class="string">"718ak"</span>))     <span class="comment"># No pairs.</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>displaymatch(pair.match(<span class="string">"354aa"</span>))     <span class="comment"># Pair of aces.</span></span><br><span class="line"><span class="string">"&lt;Match: '354aa', groups=('a',)&gt;"</span></span><br></pre></td></tr></table></figure>
<p>要找出对子由什么牌组成，开发者可以按照下面的方式来使用匹配对象的 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.Match.group" target="_blank" rel="noopener"><code>group()</code></a> 方法:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pair = re.compile(<span class="string">r".*(.).*\1"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pair.match(<span class="string">"717ak"</span>).group(<span class="number">1</span>)</span><br><span class="line"><span class="string">'7'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Error because re.match() returns None, which doesn't have a group() method:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pair.match(<span class="string">"718ak"</span>).group(<span class="number">1</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;pyshell#23&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    re.match(<span class="string">r".*(.).*\1"</span>, <span class="string">"718ak"</span>).group(<span class="number">1</span>)</span><br><span class="line">AttributeError: <span class="string">'NoneType'</span> object has no attribute <span class="string">'group'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pair.match(<span class="string">"354aa"</span>).group(<span class="number">1</span>)</span><br><span class="line"><span class="string">'a'</span></span><br></pre></td></tr></table></figure>
<h3 id="模拟-scanf"><a href="#模拟-scanf" class="headerlink" title="模拟 scanf()"></a>模拟 scanf()</h3><p>Python 目前没有一个类似c函数 <code>scanf()</code> 的替代品。正则表达式通常比 <code>scanf()</code> 格式字符串要更强大一些，但也带来更多复杂性。下面的表格提供了 <code>scanf()</code> 格式符和正则表达式大致相同的映射。</p>
<table>
<thead>
<tr>
<th style="text-align:left"><code>scanf()</code> 格式符</th>
<th style="text-align:left">正则表达式</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>%c</code></td>
<td style="text-align:left"><code>.</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%5c</code></td>
<td style="text-align:left"><code>.{5}</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%d</code></td>
<td style="text-align:left"><code>[-+]?\d+</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%e</code>, <code>%E</code>, <code>%f</code>, <code>%g</code></td>
<td style="text-align:left">`[-+]?(\d+(.\d*)?</td>
<td>.\d+)([eE][-+]?\d+)?`</td>
</tr>
<tr>
<td style="text-align:left"><code>%i</code></td>
<td style="text-align:left">`[-+]?(0[xX][\dA-Fa-f]+</td>
<td>0[0-7]*</td>
<td>\d+)`</td>
</tr>
<tr>
<td style="text-align:left"><code>%o</code></td>
<td style="text-align:left"><code>[-+]?[0-7]+</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%s</code></td>
<td style="text-align:left"><code>\S+</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%u</code></td>
<td style="text-align:left"><code>\d+</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%x</code>, <code>%X</code></td>
<td style="text-align:left"><code>[-+]?(0[xX])?[\dA-Fa-f]+</code></td>
</tr>
</tbody>
</table>
<p>从文件名和数字提取字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/sbin/sendmail - <span class="number">0</span> errors, <span class="number">4</span> warnings</span><br></pre></td></tr></table></figure>
<p>你可以使用 <code>scanf()</code> 格式化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%s - %d errors, %d warnings</span><br></pre></td></tr></table></figure>
<p>等价的正则表达式是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(\S+) - (\d+) errors, (\d+) warnings</span><br></pre></td></tr></table></figure>
<h3 id="search-vs-match"><a href="#search-vs-match" class="headerlink" title="search() vs. match()"></a>search() vs. match()</h3><p>Python 提供了两种不同的操作：基于 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.match" target="_blank" rel="noopener"><code>re.match()</code></a> 检查字符串开头，或者 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.search" target="_blank" rel="noopener"><code>re.search()</code></a> 检查字符串的任意位置（默认Perl中的行为）。</p>
<p>例如</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.match(<span class="string">"c"</span>, <span class="string">"abcdef"</span>)    <span class="comment"># No match</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.search(<span class="string">"c"</span>, <span class="string">"abcdef"</span>)   <span class="comment"># Match</span></span><br><span class="line">&lt;re.Match object; span=(<span class="number">2</span>, <span class="number">3</span>), match=<span class="string">'c'</span>&gt;</span><br></pre></td></tr></table></figure>
<p>在 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.search" target="_blank" rel="noopener"><code>search()</code></a> 中，可以用 <code>&#39;^&#39;</code> 作为开始来限制匹配到字符串的首位</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.match(<span class="string">"c"</span>, <span class="string">"abcdef"</span>)    <span class="comment"># No match</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.search(<span class="string">"^c"</span>, <span class="string">"abcdef"</span>)  <span class="comment"># No match</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.search(<span class="string">"^a"</span>, <span class="string">"abcdef"</span>)  <span class="comment"># Match</span></span><br><span class="line">&lt;re.Match object; span=(<span class="number">0</span>, <span class="number">1</span>), match=<span class="string">'a'</span>&gt;</span><br></pre></td></tr></table></figure>
<p>注意 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.MULTILINE" target="_blank" rel="noopener"><code>MULTILINE</code></a> 多行模式中函数 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.match" target="_blank" rel="noopener"><code>match()</code></a> 只匹配字符串的开始，但使用 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.search" target="_blank" rel="noopener"><code>search()</code></a> 和以 <code>&#39;^&#39;</code> 开始的正则表达式会匹配每行的开始</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; re.match(&apos;X&apos;, &apos;A\nB\nX&apos;, re.MULTILINE)  # No match</span><br><span class="line">&gt;&gt;&gt; re.search(&apos;^X&apos;, &apos;A\nB\nX&apos;, re.MULTILINE)  # Match</span><br><span class="line">&lt;re.Match object; span=(4, 5), match=&apos;X&apos;&gt;</span><br></pre></td></tr></table></figure>
<h3 id="建立一个电话本"><a href="#建立一个电话本" class="headerlink" title="建立一个电话本"></a>建立一个电话本</h3><p><a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.split" target="_blank" rel="noopener"><code>split()</code></a> 将字符串用参数传递的样式分隔开。这个方法对于转换文本数据到易读而且容易修改的数据结构，是很有用的，如下面的例子证明。</p>
<p>首先，这里是输入。 它通常来自一个文件，这里我们使用三重引号字符串语法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>text = <span class="string">"""Ross McFluff: 834.345.1254 155 Elm Street</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="string"><span class="meta">... </span>Ronald Heathmore: 892.345.3428 436 Finley Avenue</span></span><br><span class="line"><span class="string"><span class="meta">... </span>Frank Burger: 925.541.7625 662 South Dogwood Way</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="string"><span class="meta">... </span>Heather Albrecht: 548.326.4584 919 Park Place"""</span></span><br></pre></td></tr></table></figure>
<p>条目用一个或者多个换行符分开。现在我们将字符串转换为一个列表，每个非空行都有一个条目:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>entries = re.split(<span class="string">"\n+"</span>, text)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>entries</span><br><span class="line">[<span class="string">'Ross McFluff: 834.345.1254 155 Elm Street'</span>,</span><br><span class="line"><span class="string">'Ronald Heathmore: 892.345.3428 436 Finley Avenue'</span>,</span><br><span class="line"><span class="string">'Frank Burger: 925.541.7625 662 South Dogwood Way'</span>,</span><br><span class="line"><span class="string">'Heather Albrecht: 548.326.4584 919 Park Place'</span>]</span><br></pre></td></tr></table></figure>
<p>最终，将每个条目分割为一个由名字、姓氏、电话号码和地址组成的列表。我们为 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.split" target="_blank" rel="noopener"><code>split()</code></a> 使用了 <code>maxsplit</code> 形参，因为地址中包含有被我们作为分割模式的空格符:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[re.split(<span class="string">":? "</span>, entry, <span class="number">3</span>) <span class="keyword">for</span> entry <span class="keyword">in</span> entries]</span><br><span class="line">[[<span class="string">'Ross'</span>, <span class="string">'McFluff'</span>, <span class="string">'834.345.1254'</span>, <span class="string">'155 Elm Street'</span>],</span><br><span class="line">[<span class="string">'Ronald'</span>, <span class="string">'Heathmore'</span>, <span class="string">'892.345.3428'</span>, <span class="string">'436 Finley Avenue'</span>],</span><br><span class="line">[<span class="string">'Frank'</span>, <span class="string">'Burger'</span>, <span class="string">'925.541.7625'</span>, <span class="string">'662 South Dogwood Way'</span>],</span><br><span class="line">[<span class="string">'Heather'</span>, <span class="string">'Albrecht'</span>, <span class="string">'548.326.4584'</span>, <span class="string">'919 Park Place'</span>]]</span><br></pre></td></tr></table></figure>
<p><code>:?</code> 样式匹配姓后面的冒号，因此它不出现在结果列表中。如果 <code>maxsplit</code> 设置为 <code>4</code> ，我们还可以从地址中获取到房间号:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[re.split(<span class="string">":? "</span>, entry, <span class="number">4</span>) <span class="keyword">for</span> entry <span class="keyword">in</span> entries]</span><br><span class="line">[[<span class="string">'Ross'</span>, <span class="string">'McFluff'</span>, <span class="string">'834.345.1254'</span>, <span class="string">'155'</span>, <span class="string">'Elm Street'</span>],</span><br><span class="line">[<span class="string">'Ronald'</span>, <span class="string">'Heathmore'</span>, <span class="string">'892.345.3428'</span>, <span class="string">'436'</span>, <span class="string">'Finley Avenue'</span>],</span><br><span class="line">[<span class="string">'Frank'</span>, <span class="string">'Burger'</span>, <span class="string">'925.541.7625'</span>, <span class="string">'662'</span>, <span class="string">'South Dogwood Way'</span>],</span><br><span class="line">[<span class="string">'Heather'</span>, <span class="string">'Albrecht'</span>, <span class="string">'548.326.4584'</span>, <span class="string">'919'</span>, <span class="string">'Park Place'</span>]]</span><br></pre></td></tr></table></figure>
<h3 id="文字整理"><a href="#文字整理" class="headerlink" title="文字整理"></a>文字整理</h3><p><a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.sub" target="_blank" rel="noopener"><code>sub()</code></a> 替换字符串中出现的样式的每一个实例。这个例子证明了使用 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.sub" target="_blank" rel="noopener"><code>sub()</code></a> 来整理文字，或者随机化每个字符的位置，除了首位和末尾字符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; def repl(m):</span><br><span class="line">...     inner_word = list(m.group(2))</span><br><span class="line">...     random.shuffle(inner_word)</span><br><span class="line">...     return m.group(1) + &quot;&quot;.join(inner_word) + m.group(3)</span><br><span class="line">&gt;&gt;&gt; text = &quot;Professor Abdolmalek, please report your absences promptly.&quot;</span><br><span class="line">&gt;&gt;&gt; re.sub(r&quot;(\w)(\w+)(\w)&quot;, repl, text)</span><br><span class="line">&apos;Poefsrosr Aealmlobdk, pslaee reorpt your abnseces plmrptoy.&apos;</span><br><span class="line">&gt;&gt;&gt; re.sub(r&quot;(\w)(\w+)(\w)&quot;, repl, text)</span><br><span class="line">&apos;Pofsroser Aodlambelk, plasee reoprt yuor asnebces potlmrpy.&apos;</span><br></pre></td></tr></table></figure>
<h3 id="找到所有副词"><a href="#找到所有副词" class="headerlink" title="找到所有副词"></a>找到所有副词</h3><p><a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.findall" target="_blank" rel="noopener"><code>findall()</code></a> 匹配样式 <em>所有</em> 的出现，不仅是像 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.search" target="_blank" rel="noopener"><code>search()</code></a> 中的第一个匹配。比如，如果一个作者希望找到文字中的所有副词，他可能会按照以下方法用 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.findall" target="_blank" rel="noopener"><code>findall()</code></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; text = &quot;He was carefully disguised but captured quickly by police.&quot;</span><br><span class="line">&gt;&gt;&gt; re.findall(r&quot;\w+ly&quot;, text)</span><br><span class="line">[&apos;carefully&apos;, &apos;quickly&apos;]</span><br></pre></td></tr></table></figure>
<h3 id="找到所有副词和位置"><a href="#找到所有副词和位置" class="headerlink" title="找到所有副词和位置"></a>找到所有副词和位置</h3><p>如果需要匹配样式的更多信息， <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.finditer" target="_blank" rel="noopener"><code>finditer()</code></a> 可以起到作用，它提供了 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#match-objects" target="_blank" rel="noopener">匹配对象</a> 作为返回值，而不是字符串。继续上面的例子，如果一个作者希望找到所有副词和它的位置，可以按照下面方法使用 <a href="https://docs.python.org/zh-cn/3.8/library/re.html#re.finditer" target="_blank" rel="noopener"><code>finditer()</code></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; text = &quot;He was carefully disguised but captured quickly by police.&quot;</span><br><span class="line">&gt;&gt;&gt; for m in re.finditer(r&quot;\w+ly&quot;, text):</span><br><span class="line">...     print(&apos;%02d-%02d: %s&apos; % (m.start(), m.end(), m.group(0)))</span><br><span class="line">07-16: carefully</span><br><span class="line">40-47: quickly</span><br></pre></td></tr></table></figure>
<h3 id="原始字符记法"><a href="#原始字符记法" class="headerlink" title="原始字符记法"></a>原始字符记法</h3><p>原始字符串记法 (<code>r&quot;text&quot;</code>) 保持正则表达式正常。否则，每个正则式里的反斜杠(<code>&#39;\&#39;</code>) 都必须前缀一个反斜杠来转义。比如，下面两行代码功能就是完全一致的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; re.match(r&quot;\W(.)\1\W&quot;, &quot; ff &quot;)</span><br><span class="line">&lt;re.Match object; span=(0, 4), match=&apos; ff &apos;&gt;</span><br><span class="line">&gt;&gt;&gt; re.match(&quot;\\W(.)\\1\\W&quot;, &quot; ff &quot;)</span><br><span class="line">&lt;re.Match object; span=(0, 4), match=&apos; ff &apos;&gt;</span><br></pre></td></tr></table></figure>
<p>当需要匹配一个字符反斜杠，它必须在正则表达式中转义。在原始字符串记法，就是 <code>r&quot;\\&quot;</code>。否则就必须用 <code>&quot;\\\\&quot;</code>，来表示同样的意思</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; re.match(r&quot;\\&quot;, r&quot;\\&quot;)</span><br><span class="line">&lt;re.Match object; span=(0, 1), match=&apos;\\&apos;&gt;</span><br><span class="line">&gt;&gt;&gt; re.match(&quot;\\\\&quot;, r&quot;\\&quot;)</span><br><span class="line">&lt;re.Match object; span=(0, 1), match=&apos;\\&apos;&gt;</span><br></pre></td></tr></table></figure>
<h3 id="写一个词法分析器"><a href="#写一个词法分析器" class="headerlink" title="写一个词法分析器"></a>写一个词法分析器</h3><p>一个 <a href="https://en.wikipedia.org/wiki/Lexical_analysis" target="_blank" rel="noopener">词法器或词法分析器</a> 分析字符串，并分类成目录组。 这是写一个编译器或解释器的第一步。</p>
<p>文字目录是由正则表达式指定的。这个技术是通过将这些样式合并为一个主正则式，并且循环匹配来实现的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">Token = collections.namedtuple(<span class="string">'Token'</span>, [<span class="string">'type'</span>, <span class="string">'value'</span>, <span class="string">'line'</span>, <span class="string">'column'</span>])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tokenize</span><span class="params">(code)</span>:</span></span><br><span class="line">    keywords = &#123;<span class="string">'IF'</span>, <span class="string">'THEN'</span>, <span class="string">'ENDIF'</span>, <span class="string">'FOR'</span>, <span class="string">'NEXT'</span>, <span class="string">'GOSUB'</span>, <span class="string">'RETURN'</span>&#125;</span><br><span class="line">    token_specification = [</span><br><span class="line">        (<span class="string">'NUMBER'</span>,   <span class="string">r'\d+(\.\d*)?'</span>),  <span class="comment"># Integer or decimal number</span></span><br><span class="line">        (<span class="string">'ASSIGN'</span>,   <span class="string">r':='</span>),           <span class="comment"># Assignment operator</span></span><br><span class="line">        (<span class="string">'END'</span>,      <span class="string">r';'</span>),            <span class="comment"># Statement terminator</span></span><br><span class="line">        (<span class="string">'ID'</span>,       <span class="string">r'[A-Za-z]+'</span>),    <span class="comment"># Identifiers</span></span><br><span class="line">        (<span class="string">'OP'</span>,       <span class="string">r'[+\-*/]'</span>),      <span class="comment"># Arithmetic operators</span></span><br><span class="line">        (<span class="string">'NEWLINE'</span>,  <span class="string">r'\n'</span>),           <span class="comment"># Line endings</span></span><br><span class="line">        (<span class="string">'SKIP'</span>,     <span class="string">r'[ \t]+'</span>),       <span class="comment"># Skip over spaces and tabs</span></span><br><span class="line">        (<span class="string">'MISMATCH'</span>, <span class="string">r'.'</span>),            <span class="comment"># Any other character</span></span><br><span class="line">    ]</span><br><span class="line">    tok_regex = <span class="string">'|'</span>.join(<span class="string">'(?P&lt;%s&gt;%s)'</span> % pair <span class="keyword">for</span> pair <span class="keyword">in</span> token_specification)</span><br><span class="line">    line_num = <span class="number">1</span></span><br><span class="line">    line_start = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> mo <span class="keyword">in</span> re.finditer(tok_regex, code):</span><br><span class="line">        kind = mo.lastgroup</span><br><span class="line">        value = mo.group()</span><br><span class="line">        column = mo.start() - line_start</span><br><span class="line">        <span class="keyword">if</span> kind == <span class="string">'NUMBER'</span>:</span><br><span class="line">            value = float(value) <span class="keyword">if</span> <span class="string">'.'</span> <span class="keyword">in</span> value <span class="keyword">else</span> int(value)</span><br><span class="line">        <span class="keyword">elif</span> kind == <span class="string">'ID'</span> <span class="keyword">and</span> value <span class="keyword">in</span> keywords:</span><br><span class="line">            kind = value</span><br><span class="line">        <span class="keyword">elif</span> kind == <span class="string">'NEWLINE'</span>:</span><br><span class="line">            line_start = mo.end()</span><br><span class="line">            line_num += <span class="number">1</span></span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">elif</span> kind == <span class="string">'SKIP'</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">elif</span> kind == <span class="string">'MISMATCH'</span>:</span><br><span class="line">            <span class="keyword">raise</span> RuntimeError(<span class="string">f'<span class="subst">&#123;value!r&#125;</span> unexpected on line <span class="subst">&#123;line_num&#125;</span>'</span>)</span><br><span class="line">        <span class="keyword">yield</span> Token(kind, value, line_num, column)</span><br><span class="line"></span><br><span class="line">statements = <span class="string">'''</span></span><br><span class="line"><span class="string">    IF quantity THEN</span></span><br><span class="line"><span class="string">        total := total + price * quantity;</span></span><br><span class="line"><span class="string">        tax := price * 0.05;</span></span><br><span class="line"><span class="string">    ENDIF;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> token <span class="keyword">in</span> tokenize(statements):</span><br><span class="line">    print(token)</span><br></pre></td></tr></table></figure>
<p>这个词法器产生以下输出</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Token(type=<span class="string">'IF'</span>, value=<span class="string">'IF'</span>, line=<span class="number">2</span>, column=<span class="number">4</span>)</span><br><span class="line">Token(type=<span class="string">'ID'</span>, value=<span class="string">'quantity'</span>, line=<span class="number">2</span>, column=<span class="number">7</span>)</span><br><span class="line">Token(type=<span class="string">'THEN'</span>, value=<span class="string">'THEN'</span>, line=<span class="number">2</span>, column=<span class="number">16</span>)</span><br><span class="line">Token(type=<span class="string">'ID'</span>, value=<span class="string">'total'</span>, line=<span class="number">3</span>, column=<span class="number">8</span>)</span><br><span class="line">Token(type=<span class="string">'ASSIGN'</span>, value=<span class="string">':='</span>, line=<span class="number">3</span>, column=<span class="number">14</span>)</span><br><span class="line">Token(type=<span class="string">'ID'</span>, value=<span class="string">'total'</span>, line=<span class="number">3</span>, column=<span class="number">17</span>)</span><br><span class="line">Token(type=<span class="string">'OP'</span>, value=<span class="string">'+'</span>, line=<span class="number">3</span>, column=<span class="number">23</span>)</span><br><span class="line">Token(type=<span class="string">'ID'</span>, value=<span class="string">'price'</span>, line=<span class="number">3</span>, column=<span class="number">25</span>)</span><br><span class="line">Token(type=<span class="string">'OP'</span>, value=<span class="string">'*'</span>, line=<span class="number">3</span>, column=<span class="number">31</span>)</span><br><span class="line">Token(type=<span class="string">'ID'</span>, value=<span class="string">'quantity'</span>, line=<span class="number">3</span>, column=<span class="number">33</span>)</span><br><span class="line">Token(type=<span class="string">'END'</span>, value=<span class="string">';'</span>, line=<span class="number">3</span>, column=<span class="number">41</span>)</span><br><span class="line">Token(type=<span class="string">'ID'</span>, value=<span class="string">'tax'</span>, line=<span class="number">4</span>, column=<span class="number">8</span>)</span><br><span class="line">Token(type=<span class="string">'ASSIGN'</span>, value=<span class="string">':='</span>, line=<span class="number">4</span>, column=<span class="number">12</span>)</span><br><span class="line">Token(type=<span class="string">'ID'</span>, value=<span class="string">'price'</span>, line=<span class="number">4</span>, column=<span class="number">15</span>)</span><br><span class="line">Token(type=<span class="string">'OP'</span>, value=<span class="string">'*'</span>, line=<span class="number">4</span>, column=<span class="number">21</span>)</span><br><span class="line">Token(type=<span class="string">'NUMBER'</span>, value=<span class="number">0.05</span>, line=<span class="number">4</span>, column=<span class="number">23</span>)</span><br><span class="line">Token(type=<span class="string">'END'</span>, value=<span class="string">';'</span>, line=<span class="number">4</span>, column=<span class="number">27</span>)</span><br><span class="line">Token(type=<span class="string">'ENDIF'</span>, value=<span class="string">'ENDIF'</span>, line=<span class="number">5</span>, column=<span class="number">4</span>)</span><br><span class="line">Token(type=<span class="string">'END'</span>, value=<span class="string">';'</span>, line=<span class="number">5</span>, column=<span class="number">9</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><p><a href="https://docs.python.org/zh-cn/3.8/library/re.html#id1" target="_blank" rel="noopener">Frie09</a></p>
<p>Friedl, Jeffrey. Mastering Regular Expressions. 第三版, O’Reilly Media, 2009. 第三版不再使用Python, 但第一版提供了编写正则表达式的良好细节。</p>
</li>
</ul>

      
    </div>

    
      


    

    
    
    

    

    
      
    
    
      <div>
        <div id="reward-container">
  <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
  <button id="reward-button" disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">

    
      
      
        
      
      <div style="display: inline-block">
        <img src="/images/wechat_pay.jpg" alt="Jeff Sui 微信支付">
        <p>微信支付</p>
      </div>
    
      
      
        
      
      <div style="display: inline-block">
        <img src="/images/alipay.jpg" alt="Jeff Sui 支付宝">
        <p>支付宝</p>
      </div>
    

  </div>
</div>

      </div>
    

    
      <div>
        




  



<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Jeff Sui</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    
    <a href="https://pinghailinfeng.gitee.io/2020/03/18/python-standard-library-re/" title="python standard_library re">https://pinghailinfeng.gitee.io/2020/03/18/python-standard-library-re/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/python/" rel="tag"># python</a>
          
            <a href="/tags/standard-library/" rel="tag"># standard_library</a>
          
            <a href="/tags/re/" rel="tag"># re</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/03/17/python-standard-library-modulefinder/" rel="next" title="python standard_library modulefinder">
                <i class="fa fa-chevron-left"></i> python standard_library modulefinder
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/03/19/python-standard-library-dis/" rel="prev" title="python standard_library dis">
                python standard_library dis <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="Jeff Sui">
            
              <p class="site-author-name" itemprop="name">Jeff Sui</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">120</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">21</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">135</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/jeffsui" title="GitHub &rarr; https://github.com/jeffsui" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:215687736@qq.com" title="E-Mail &rarr; mailto:215687736@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#python-标准库-re-正则表达式"><span class="nav-number">1.</span> <span class="nav-text">python 标准库 re 正则表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#正则表达式语法"><span class="nav-number">1.1.</span> <span class="nav-text">正则表达式语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#模块内容"><span class="nav-number">1.2.</span> <span class="nav-text">模块内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#正则表达式对象-（正则对象）"><span class="nav-number">1.3.</span> <span class="nav-text">正则表达式对象 （正则对象）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#匹配对象"><span class="nav-number">1.4.</span> <span class="nav-text">匹配对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#正则表达式例子"><span class="nav-number">1.5.</span> <span class="nav-text">正则表达式例子</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#检查对子"><span class="nav-number">1.5.1.</span> <span class="nav-text">检查对子</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#模拟-scanf"><span class="nav-number">1.5.2.</span> <span class="nav-text">模拟 scanf()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#search-vs-match"><span class="nav-number">1.5.3.</span> <span class="nav-text">search() vs. match()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#建立一个电话本"><span class="nav-number">1.5.4.</span> <span class="nav-text">建立一个电话本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文字整理"><span class="nav-number">1.5.5.</span> <span class="nav-text">文字整理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#找到所有副词"><span class="nav-number">1.5.6.</span> <span class="nav-text">找到所有副词</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#找到所有副词和位置"><span class="nav-number">1.5.7.</span> <span class="nav-text">找到所有副词和位置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#原始字符记法"><span class="nav-number">1.5.8.</span> <span class="nav-text">原始字符记法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#写一个词法分析器"><span class="nav-number">1.5.9.</span> <span class="nav-text">写一个词法分析器</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

  
<script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
<script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
<div class="widget-wrap">
    <div id="myCanvasContainer" class="widget tagcloud">
        <canvas width="250" height="250" id="resCanvas" style="width=100%">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/2to3/">2to3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Boolean/">Boolean</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Exception/">Exception</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GIL/">GIL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitGutter/">GitGutter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tkinter/">Tkinter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XML/">XML</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/all/">__all__</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thread/">_thread</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/app/">app</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/argparse/">argparse</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/array/">array</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/atexit/">atexit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bisect/">bisect</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/calendar/">calendar</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos/">centos</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/checkbox/">checkbox</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cmath/">cmath</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cmd/">cmd</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/code/">code</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/collections-abc/">collections.abc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/concurrent/">concurrent</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/context-manager-types/">context-manager-types</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cookies/">cookies</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/copy/">copy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/coroutines/">coroutines</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/csv/">csv</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cygwin/">cygwin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dataclasses/">dataclasses</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dbm/">dbm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dict/">dict</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dictionary/">dictionary</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/difflib/">difflib</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dis/">dis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/doctest/">doctest</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dom/">dom</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eclipse/">eclipse</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/enum/">enum</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ffmpeg/">ffmpeg</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/filecmp/">filecmp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fileinput/">fileinput</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fractions/">fractions</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/functools/">functools</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/futures/">futures</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gc/">gc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/generator/">generator</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitcafe/">gitcafe</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/glob/">glob</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heapq/">heapq</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html-parser/">html.parser</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http-server/">http.server</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios/">ios</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iterator/">iterator</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/itertools/">itertools</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javaweb/">javaweb</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdk/">jdk</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/json/">json</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/juypter/">juypter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/keyword/">keyword</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linecache/">linecache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/m3u8/">m3u8</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/">maven</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/minidom/">minidom</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/modulefinder/">modulefinder</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nbextension/">nbextension</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oop/">oop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/operator/">operator</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/os/">os</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/os-path/">os.path</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/photo/">photo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pickle/">pickle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pprint/">pprint</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pwd/">pwd</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">84</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python3/">python3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/queue/">queue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/re/">re</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/readline/">readline</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/registry/">registry</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/registry-ui/">registry-ui</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reprlib/">reprlib</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sax/">sax</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sched/">sched</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/select/">select</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/selectors/">selectors</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/selenium/">selenium</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shutil/">shutil</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socket/">socket</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sort/">sort</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlite3/">sqlite3</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/standar-library/">standar_library</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/standard-library/">standard_library</a><span class="tag-list-count">78</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/string/">string</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime/">sublime</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tempfile/">tempfile</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thread/">thread</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/timeit/">timeit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/turtle/">turtle</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/types/">types</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/unittest/">unittest</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/urllib-robotparser/">urllib.robotparser</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/uuid/">uuid</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/venv/">venv</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/">vscode</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/weakref/">weakref</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web-test/">web test</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webbrowser/">webbrowser</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/">windows</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xml/">xml</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/二维码/">二维码</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/博客/">博客</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/坑/">坑</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/字典/">字典</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/异步/">异步</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/持续集成/">持续集成</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/搭建/">搭建</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/搭建博客/">搭建博客</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文章/">文章</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/杂记/">杂记</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/版本管理/">版本管理</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/短网址/">短网址</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/笔记/">笔记</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网易音乐/">网易音乐</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/美化/">美化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/软件工程/">软件工程</a><span class="tag-list-count">1</span></li></ul>
        </canvas>
    </div>
</div>


           <div>
              <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="210" height="110" src="//music.163.com/outchain/player?type=2&id=1331901657&auto=0&height=66"></iframe>
           </div>
        

    </div>
  </aside>
  




        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2015 – <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jeff Sui</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">871k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">13:12</span>
  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.1</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>












  













  



  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script src="/lib/fancybox/source/jquery.fancybox.pack.js"></script>

  
  <script src="/lib/reading_progress/reading_progress.js"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/js/affix.js?v=7.1.1"></script>

  <script src="/js/schemes/pisces.js?v=7.1.1"></script>




  
  <script src="/js/scrollspy.js?v=7.1.1"></script>
<script src="/js/post-details.js?v=7.1.1"></script>



  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  

  

  


  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

  

  

  

  

  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body>
</html>
