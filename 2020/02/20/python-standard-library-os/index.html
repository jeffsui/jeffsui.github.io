<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-center-atom.min.css?v=1.0.2">













  <meta name="baidu-site-verification" content="214VUocOxt">



  
  
  <link rel="stylesheet" href="/lib/fancybox/source/jquery.fancybox.css">







<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: true,
    fancybox: true,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="python 标准库 os">
<meta name="keywords" content="python,standard_library,os">
<meta property="og:type" content="article">
<meta property="og:title" content="python standard library os">
<meta property="og:url" content="https://pinghailinfeng.gitee.io/2020/02/20/python-standard-library-os/index.html">
<meta property="og:site_name" content="凭海临风的IT江湖">
<meta property="og:description" content="python 标准库 os">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://github.com/jeffsui/app_image_resource/blob/master/20200220_os.jpg?raw=true">
<meta property="og:updated_time" content="2020-02-22T15:14:11.240Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="python standard library os">
<meta name="twitter:description" content="python 标准库 os">
<meta name="twitter:image" content="https://github.com/jeffsui/app_image_resource/blob/master/20200220_os.jpg?raw=true">



  <link rel="alternate" href="/atom.xml" title="凭海临风的IT江湖" type="application/atom+xml">



  
  
  <link rel="canonical" href="https://pinghailinfeng.gitee.io/2020/02/20/python-standard-library-os/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>python standard library os | 凭海临风的IT江湖</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">凭海临风的IT江湖</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-top">

    
    
    
      
    

    

    <a href="/top/" rel="section"><i class="menu-item-icon fa fa-fw fa-signal"></i> <br>排行榜</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-sitemap">

    
    
    
      
    

    

    <a href="/sitemap.xml" rel="section"><i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>站点地图</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-commonweal">

    
    
    
      
    

    

    <a href="/404.html" rel="section"><i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>公益 404</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-timeline">

    
    
    
      
    

    

    <a href="/timeline/" rel="section"><i class="menu-item-icon fa fa-fw fa-calendar"></i> <br>时间轴</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    
  
  

  

  <a href="https://github.com/jeffsui" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  
    <div class="reading-progress-bar"></div>
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://pinghailinfeng.gitee.io/2020/02/20/python-standard-library-os/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jeff Sui">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="凭海临风的IT江湖">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">python standard library os

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-02-20 08:07:42" itemprop="dateCreated datePublished" datetime="2020-02-20T08:07:42+08:00">2020-02-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-02-22 23:14:11" itemprop="dateModified" datetime="2020-02-22T23:14:11+08:00">2020-02-22</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/standard-library/" itemprop="url" rel="index"><span itemprop="name">standard_library</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon">
            <i class="fa fa-eye"></i>
             阅读次数： 
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">65k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">59 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="python-标准库-os"><a href="#python-标准库-os" class="headerlink" title="python 标准库 os"></a>python 标准库 os</h1><p><img src="https://github.com/jeffsui/app_image_resource/blob/master/20200220_os.jpg?raw=true" alt></p>
<a id="more"></a>
<blockquote>
<p>每日一词：</p>
<p> <a href="https://www.hujiang.com/ciku/bustle/" target="_blank" rel="noopener">bustle</a> v.[I] 1.闹哄哄地忙乱；匆忙；奔忙 2.充满 v.[T] 催促；使忙碌 n. 忙乱；喧扰 </p>
<p>短语：</p>
<p> hustle and bustle  熙熙攘攘</p>
<p> <a href="https://www.hujiang.com/ciku/bustle_in_and_out/" target="_blank" rel="noopener">bustle in and out</a> </p>
<p> <a href="https://www.hujiang.com/ciku/bustle_about/" target="_blank" rel="noopener">bustle about</a>  sth</p>
<p>近义词:</p>
<p>run out of one’s feet </p>
<p>on the fly<br>on the hump<br>on the jump </p>
</blockquote>
<p><strong>源代码：</strong> <a href="https://github.com/python/cpython/tree/3.8/Lib/os.py" target="_blank" rel="noopener">Lib/os.py</a></p>
<hr>
<p>本模块提供了一种使用与操作系统相关的功能的便捷式途径。 如果你只是想读写一个文件，请参阅 <a href="https://docs.python.org/zh-cn/3.8/library/functions.html#open" target="_blank" rel="noopener"><code>open()</code></a>，如果你想操作文件路径，请参阅 <a href="https://docs.python.org/zh-cn/3.8/library/os.path.html#module-os.path" target="_blank" rel="noopener"><code>os.path</code></a> 模块，如果你想读取通过命令行给出的所有文件中的所有行，请参阅 <a href="https://docs.python.org/zh-cn/3.8/library/fileinput.html#module-fileinput" target="_blank" rel="noopener"><code>fileinput</code></a> 模块。 为了创建临时文件和目录，请参阅 <a href="https://docs.python.org/zh-cn/3.8/library/tempfile.html#module-tempfile" target="_blank" rel="noopener"><code>tempfile</code></a> 模块，对于高级文件和目录处理，请参阅 <a href="https://docs.python.org/zh-cn/3.8/library/shutil.html#module-shutil" target="_blank" rel="noopener"><code>shutil</code></a> 模块。</p>
<p>关于这些函数的可用性的说明：</p>
<ul>
<li>Python中所有依赖于操作系统的内置模块的设计都是这样，只要不同的操作系统某一相同的功能可用，它就使用相同的接口。例如，函数 <code>os.stat(path)</code> 以相同的格式返回关于 <em>path</em> 的状态信息（该格式源于 POSIX 接口）。</li>
<li>特定于某一操作系统的扩展通过操作 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#module-os" target="_blank" rel="noopener"><code>os</code></a> 模块也是可用的，但是使用它们当然是对可移植性的一种威胁。</li>
<li>所有接受路径或文件名的函数都同时支持字节串和字符串对象，并在返回路径或文件名时使用相应类型的对象作为结果。</li>
<li>在 VxWorks 系统上，os.fork, os.execv 和 os.spawn<em>p</em> 不被支持。</li>
</ul>
<blockquote>
<p> 如果使用无效或无法访问的文件名与路径，或者其他类型正确但操作系统不接受的参数，此模块的所有函数都抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> （或者它的子类）。 </p>
</blockquote>
<ul>
<li><p><em>exception</em> <code>os.error</code></p>
<p>内建的 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 异常的一个别名。</p>
</li>
<li><p><code>os.name</code></p>
<p>导入的依赖特定操作系统的模块的名称。以下名称目前已注册: <code>&#39;posix&#39;</code>, <code>&#39;nt&#39;</code>, <code>&#39;java&#39;</code>.</p>
</li>
</ul>
<blockquote>
<p><a href="https://docs.python.org/zh-cn/3.8/library/sys.html#sys.platform" target="_blank" rel="noopener"><code>sys.platform</code></a> 有更详细的描述. <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.uname" target="_blank" rel="noopener"><code>os.uname()</code></a> 只给出系统提供的版本信息。</p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/platform.html#module-platform" target="_blank" rel="noopener"><code>platform</code></a> 模块对系统的标识有更详细的检查。</p>
</blockquote>
<h2 id="文件名，命令行参数，以及环境变量。"><a href="#文件名，命令行参数，以及环境变量。" class="headerlink" title="文件名，命令行参数，以及环境变量。"></a>文件名，命令行参数，以及环境变量。</h2><p>在 Python 中，使用字符串类型表示文件名、命令行参数和环境变量。 在某些系统上，在将这些字符串传递给操作系统之前，必须将这些字符串解码为字节。 Python 使用文件系统编码来执行此转换（请参阅 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#sys.getfilesystemencoding" target="_blank" rel="noopener"><code>sys.getfilesystemencoding()</code></a> ）。</p>
<p><em>在 3.1 版更改:</em> 在某些系统上，使用文件系统编码进行转换可能会失败。 在这种情况下，Python 会使用 <a href="https://docs.python.org/zh-cn/3.8/library/codecs.html#surrogateescape" target="_blank" rel="noopener">代理转义编码错误处理器</a>，这意味着在解码时，不可解码的字节被 Unicode 字符 U+DCxx 替换，并且这些字节在编码时再次转换为原始字节。</p>
<p>文件系统编码必须保证成功解码小于 128 的所有字节。如果文件系统编码无法提供此保证， API 函数可能会引发 UnicodeErrors 。</p>
<h2 id="进程参数"><a href="#进程参数" class="headerlink" title="进程参数"></a>进程参数</h2><p>这些函数和数据项提供了操作当前进程和用户的信息。</p>
<ul>
<li><p><code>os.ctermid</code>()</p>
<p>返回与进程控制终端对应的文件名。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.environ</code></p>
<p>一个表示字符串环境的 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-mapping" target="_blank" rel="noopener">mapping</a> 对象。 例如，<code>environ[&#39;HOME&#39;]</code> 是你的主目录（在某些平台上）的路径名，相当于 C 中的 <code>getenv(&quot;HOME&quot;)</code>。这个映射是在第一次导入 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#module-os" target="_blank" rel="noopener"><code>os</code></a> 模块时捕获的，通常作为 Python 启动时处理 <code>site.py</code> 的一部分。除了通过直接修改 <code>os.environ</code> 之外，在此之后对环境所做的更改不会反映在 <code>os.environ</code> 中。如果平台支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.putenv" target="_blank" rel="noopener"><code>putenv()</code></a> 函数，这个映射除了可以用于查询环境外还能用于修改环境。 当这个映射被修改时，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.putenv" target="_blank" rel="noopener"><code>putenv()</code></a> 将被自动调用。在Unix系统上，键和值会使用 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#sys.getfilesystemencoding" target="_blank" rel="noopener"><code>sys.getfilesystemencoding()</code></a> 和 <code>&#39;surrogateescape&#39;</code> 的错误处理。如果你想使用其他的编码，使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.environb" target="_blank" rel="noopener"><code>environb</code></a>。注解 直接调用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.putenv" target="_blank" rel="noopener"><code>putenv()</code></a> 并不会影响 <code>os.environ</code>，所以推荐直接修改 <code>os.environ</code>。注解 在某些平台上，包括 FreeBSD 和 Mac OS X，设置 <code>environ</code> 可能导致内存泄露。参阅 <code>putenv()</code> 的系统文档。如果平台没有提供 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.putenv" target="_blank" rel="noopener"><code>putenv()</code></a>, 为了使启动的子进程使用修改后的环境，一份修改后的映射会被传给合适的进程创建函数。如果平台支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.unsetenv" target="_blank" rel="noopener"><code>unsetenv()</code></a> 函数，你可以通过删除映射中元素的方式来删除对应的环境变量。当一个元素被从 <code>os.environ</code> 删除时，以及 <code>pop()</code> 或 <code>clear()</code> 被调用时， <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.unsetenv" target="_blank" rel="noopener"><code>unsetenv()</code></a> 会被自动调用。</p>
</li>
<li><p><code>os.environb</code></p>
<p>字节版本的 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.environ" target="_blank" rel="noopener"><code>environ</code></a>: 一个以字节串表示环境的 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-mapping" target="_blank" rel="noopener">mapping</a> 对象。 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.environ" target="_blank" rel="noopener"><code>environ</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.environb" target="_blank" rel="noopener"><code>environb</code></a> 是同步的（修改 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.environb" target="_blank" rel="noopener"><code>environb</code></a> 会更新 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.environ" target="_blank" rel="noopener"><code>environ</code></a>，反之亦然）。只有在 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.supports_bytes_environ" target="_blank" rel="noopener"><code>supports_bytes_environ</code></a> 为 <code>True</code> 的时候 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.environb" target="_blank" rel="noopener"><code>environb</code></a> 才是可用的。<em>3.2 新版功能.</em></p>
</li>
<li><p><code>os.chdir</code>(<em>path</em>)</p>
</li>
<li><p><code>os.fchdir</code>(<em>fd</em>)</p>
</li>
<li><p><code>os.getcwd</code>()</p>
<p>以上函数请参阅 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os-file-dir" target="_blank" rel="noopener">文件和目录</a> 。</p>
</li>
<li><p><code>os.fsencode</code>(<em>filename</em>)</p>
<p>编码 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">路径类</a> <em>文件名</em> 为文件系统接受的形式，使用 <code>&#39;surrogateescape&#39;</code> 代理转义编码错误处理器，在Windows系统上会使用 <code>&#39;strict&#39;</code> ；返回 <a href="https://docs.python.org/zh-cn/3.8/library/stdtypes.html#bytes" target="_blank" rel="noopener"><code>bytes</code></a> 字节类型不变。<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fsdecode" target="_blank" rel="noopener"><code>fsdecode()</code></a> 是此函数的逆向函数。<em>3.2 新版功能.**在 3.6 版更改:</em> 增加对实现了 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PathLike" target="_blank" rel="noopener"><code>os.PathLike</code></a> 接口的对象的支持。</p>
</li>
<li><p><code>os.fsdecode</code>(<em>filename</em>)</p>
<p>从文件系统编码方式解码为 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">路径类</a> 文件名，使用 <code>&#39;surrogateescape&#39;</code> 代理转义编码错误处理器，在Windows系统上会使用 <code>&#39;strict&#39;</code> ；返回 <a href="https://docs.python.org/zh-cn/3.8/library/stdtypes.html#str" target="_blank" rel="noopener"><code>str</code></a> 字符串不变。<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fsencode" target="_blank" rel="noopener"><code>fsencode()</code></a> 是此函数的逆向函数。<em>3.2 新版功能.**在 3.6 版更改:</em> 增加对实现了 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PathLike" target="_blank" rel="noopener"><code>os.PathLike</code></a> 接口的对象的支持。</p>
</li>
<li><p><code>os.fspath</code>(<em>path</em>)</p>
<p>返回路径的文件系统表示。如果传入的是 <a href="https://docs.python.org/zh-cn/3.8/library/stdtypes.html#str" target="_blank" rel="noopener"><code>str</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/stdtypes.html#bytes" target="_blank" rel="noopener"><code>bytes</code></a> 类型的字符串，将原样返回。否则 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PathLike.__fspath__" target="_blank" rel="noopener"><code>__fspath__()</code></a> 将被调用，如果得到的是一个 <a href="https://docs.python.org/zh-cn/3.8/library/stdtypes.html#str" target="_blank" rel="noopener"><code>str</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/stdtypes.html#bytes" target="_blank" rel="noopener"><code>bytes</code></a> 类型的对象，那就返回这个值。其他所有情况则会抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#TypeError" target="_blank" rel="noopener"><code>TypeError</code></a> 异常。<em>3.6 新版功能.</em></p>
</li>
<li><p><em>class</em> <code>os.PathLike</code></p>
<p>某些对象用于表示文件系统中的路径（如 <a href="https://docs.python.org/zh-cn/3.8/library/pathlib.html#pathlib.PurePath" target="_blank" rel="noopener"><code>pathlib.PurePath</code></a> 对象），本类是这些对象的 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-abstract-base-class" target="_blank" rel="noopener">抽象基类</a>。<em>3.6 新版功能.**abstractmethod</em> <code>__fspath__</code>()返回当前对象的文件系统表示。这个方法只应该返回一个 <a href="https://docs.python.org/zh-cn/3.8/library/stdtypes.html#str" target="_blank" rel="noopener"><code>str</code></a> 字符串或 <a href="https://docs.python.org/zh-cn/3.8/library/stdtypes.html#bytes" target="_blank" rel="noopener"><code>bytes</code></a> 字节串，请优先选择 <a href="https://docs.python.org/zh-cn/3.8/library/stdtypes.html#str" target="_blank" rel="noopener"><code>str</code></a> 字符串。</p>
</li>
<li><p><code>os.getenv</code>(<em>key</em>, <em>default=None</em>)</p>
<p>如果存在，返回环境变量 <em>key</em> 的值，否则返回 <em>default</em>。 <em>key</em> ， <em>default</em> 和返回值均为 str 字符串类型。在Unix系统上，键和值会使用 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#sys.getfilesystemencoding" target="_blank" rel="noopener"><code>sys.getfilesystemencoding()</code></a> 和’surrogateescape’ 错误处理进行解码。如果你想使用其他的编码，使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.getenvb" target="_blank" rel="noopener"><code>os.getenvb()</code></a>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: 大部分的Unix系统，Windows。</p>
</li>
<li><p><code>os.getenvb</code>(<em>key</em>, <em>default=None</em>)</p>
<p>如果存在环境变量 <em>key</em> 那么返回其值，否则返回 <em>default</em>。 <em>key</em> ， <em>default</em> 和返回值均为bytes字节串类型。<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.getenvb" target="_blank" rel="noopener"><code>getenvb()</code></a> 仅在 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.supports_bytes_environ" target="_blank" rel="noopener"><code>supports_bytes_environ</code></a> 为 <code>True</code> 时可用。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: 大部分的Unix系统。<em>3.2 新版功能.</em></p>
</li>
<li><p><code>os.get_exec_path</code>(<em>env=None</em>)</p>
<p>返回将用于搜索可执行文件的目录列表，与在外壳程序中启动一个进程时相似。指定的 <em>env</em> 应为用于搜索 PATH 的环境变量字典。默认情况下，当 <em>env</em> 为 <code>None</code> 时，将会使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.environ" target="_blank" rel="noopener"><code>environ</code></a> 。<em>3.2 新版功能.</em></p>
</li>
<li><p><code>os.getegid</code>()</p>
<p>返回当前进程的有效组ID。对应当前进程执行文件的 “set id” 位。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.geteuid</code>()</p>
<p>返回当前进程的有效用户ID。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.getgid</code>()</p>
<p>返回当前进程的实际组ID。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.getgrouplist</code>(<em>user</em>, <em>group</em>)</p>
<p>返回该用户所在的组 ID 列表。可能 <em>group</em> 参数没有在返回的列表中，实际上用户应该也是属于该 <em>group</em>。<em>group</em> 参数一般可以从储存账户信息的密码记录文件中找到。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.getgroups</code>()</p>
<p>返回当前进程对应的组ID列表<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
<blockquote>
<p>注解：在Mac OS X系统中，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.getgroups" target="_blank" rel="noopener"><code>getgroups()</code></a> 会和其他 Unix 平台有些不同。如果 Python 解释器是在 <code>10.5</code> 或更早版本中部署，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.getgroups" target="_blank" rel="noopener"><code>getgroups()</code></a> 返回当前用户进程相关的有效组ID列表。 该列表长度由于系统预设的接口限制，最长为 16。 而且在适当的权限下，返回结果还会因 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.getgroups" target="_blank" rel="noopener"><code>getgroups()</code></a> 而发生变化；如果 Python 解释器是在 <code>10.5</code> 以上版本中部署，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.getgroups" target="_blank" rel="noopener"><code>getgroups()</code></a> 返回进程所属有效用户 ID 所对应的用户的组 ID 列表，组用户列表可能因为进程的生存周期而发生变动，而且也不会因为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.setgroups" target="_blank" rel="noopener"><code>setgroups()</code></a> 的调用而发生，返回的组用户列表长度也没有长度 16 的限制。在部署中，Python 解释器用到的变量 <code>MACOSX_DEPLOYMENT_TARGET</code> 可以用 <a href="https://docs.python.org/zh-cn/3.8/library/sysconfig.html#sysconfig.get_config_var" target="_blank" rel="noopener"><code>sysconfig.get_config_var()</code></a>。</p>
</blockquote>
</li>
<li><p><code>os.getlogin</code>()</p>
<p>返回通过控制终端进程进行登录的用户名。在多数情况下，使用 <a href="https://docs.python.org/zh-cn/3.8/library/getpass.html#getpass.getuser" target="_blank" rel="noopener"><code>getpass.getuser()</code></a> 会更有效，因为后者会通过检查环境变量 <code>LOGNAME</code> 或 <code>USERNAME</code> 来查找用户，再由 <code>pwd.getpwuid(os.getuid())[0]</code> 来获取当前用户 ID 的登录名。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix, Windows。</p>
</li>
<li><p><code>os.getpgid</code>(<em>pid</em>)</p>
<p>根据进程id <em>pid</em> 返回进程的组 ID 列表。如果 <em>pid</em> 为 0，则返回当前进程的进程组 ID 列表<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.getpgrp</code>()</p>
<p>返回当时进程组的ID<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.getpid</code>()</p>
<p>返回当前进程ID</p>
</li>
<li><p><code>os.getppid</code>()</p>
<p>返回父进程ID。当父进程已经结束，在Unix中返回的ID是初始进程(1)中的一个，在Windows中仍然是同一个进程ID，该进程ID有可能已经被进行进程所占用。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix, Windows。<em>在 3.2 版更改:</em> 添加WIndows的支持。</p>
</li>
<li><p><code>os.getpriority</code>(<em>which</em>, <em>who</em>)</p>
<p>获取程序调度优先级。<em>which</em> 参数值可以是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PRIO_PROCESS" target="_blank" rel="noopener"><code>PRIO_PROCESS</code></a>，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PRIO_PGRP" target="_blank" rel="noopener"><code>PRIO_PGRP</code></a>，或 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PRIO_USER" target="_blank" rel="noopener"><code>PRIO_USER</code></a> 中的一个，<em>who</em> 是相对于 <em>which</em> (<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PRIO_PROCESS" target="_blank" rel="noopener"><code>PRIO_PROCESS</code></a> 的进程标识符，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PRIO_PGRP" target="_blank" rel="noopener"><code>PRIO_PGRP</code></a> 的进程组标识符和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PRIO_USER" target="_blank" rel="noopener"><code>PRIO_USER</code></a> 的用户ID)。当 <em>who</em> 为 0 时（分别）表示调用的进程，调用进程的进程组或调用进程所属的真实用户 ID。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.PRIO_PROCESS</code></p>
</li>
<li><p><code>os.PRIO_PGRP</code></p>
</li>
<li><p><code>os.PRIO_USER</code></p>
<p>函数 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.getpriority" target="_blank" rel="noopener"><code>getpriority()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.setpriority" target="_blank" rel="noopener"><code>setpriority()</code></a> 的参数。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.getresuid</code>()</p>
<p>返回一个由 (ruid, euid, suid) 所组成的元组，分别表示当前进程的真实用户ID，有效用户ID和甲暂存用户ID。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.2 新版功能.</em></p>
</li>
<li><p><code>os.getresgid</code>()</p>
<p>返回一个由 (rgid, egid, sgid) 所组成的元组，分别表示当前进程的真实组ID，有效组ID和暂存组ID。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.2 新版功能.</em></p>
</li>
<li><p><code>os.getuid</code>()</p>
<p>返回当前进程的真实用户ID。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.initgroups</code>(<em>username</em>, <em>gid</em>)</p>
<p>调用系统 initgroups()，使用指定用户所在的所有值来初始化组访问列表，包括指定的组ID。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.2 新版功能.</em></p>
</li>
<li><p><code>os.putenv</code>(<em>key</em>, <em>value</em>)</p>
<p>将名为 <em>key</em> 的环境变量值设置为 <em>value</em>。该变量名修改会影响由 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.system" target="_blank" rel="noopener"><code>os.system()</code></a>， <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.popen" target="_blank" rel="noopener"><code>popen()</code></a> ，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fork" target="_blank" rel="noopener"><code>fork()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execv" target="_blank" rel="noopener"><code>execv()</code></a> 发起的子进程。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: 大部分的Unix系统，Windows。注解 在一些平台，包括 FreeBSD 和 Mac OS X，设置 <code>environ</code> 可能导致内存泄露。详情参考 putenv 相关系统文档。当系统支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.putenv" target="_blank" rel="noopener"><code>putenv()</code></a> 时，<code>os.environ</code> 中的参数赋值会自动转换为对 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.putenv" target="_blank" rel="noopener"><code>putenv()</code></a> 的调用。不过 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.putenv" target="_blank" rel="noopener"><code>putenv()</code></a> 的调用不会更新 <code>os.environ</code>，因此最好使用 <code>os.environ</code> 对变量赋值。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.putenv</code>，附带参数 <code>key</code>, <code>value</code>。</p>
</li>
<li><p><code>os.setegid</code>(<em>egid</em>)</p>
<p>设置当前进程的有效组ID。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.seteuid</code>(<em>euid</em>)</p>
<p>设置当前进程的有效用户ID。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.setgid</code>(<em>gid</em>)</p>
<p>设置当前进程的组ID。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.setgroups</code>(<em>groups</em>)</p>
<p>将 <em>group</em> 参数值设置为与当进程相关联的附加组ID列表。<em>group</em> 参数必须为一个序列，每个元素应为每个组的数字ID。该操作通常只适用于超级用户。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。注解 在 Mac OS X 中，<em>groups</em> 的长度不能超过系统定义的最大有效组 ID 个数，一般为 16。 如果它没有返回与调用 setgroups() 所设置的相同的组列表，请参阅 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.getgroups" target="_blank" rel="noopener"><code>getgroups()</code></a> 的文档。</p>
</li>
<li><p><code>os.setpgrp</code>()</p>
<p>根据已实现的版本（如果有）来调用系统 <code>setpgrp()</code> 或 <code>setpgrp(0, 0)</code> 。相关说明，请参考 Unix 手册。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.setpgid</code>(<em>pid</em>, <em>pgrp</em>)</p>
<p>使用系统调用 <code>setpgid()</code>，将 <em>pid</em> 对应进程的组ID设置为 <em>pgrp</em>。相关说明，请参考 Unix 手册。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.setpriority</code>(<em>which</em>, <em>who</em>, <em>priority</em>)</p>
<p>设置程序调度优先级。 <em>which</em> 的值为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PRIO_PROCESS" target="_blank" rel="noopener"><code>PRIO_PROCESS</code></a>, <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PRIO_PGRP" target="_blank" rel="noopener"><code>PRIO_PGRP</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PRIO_USER" target="_blank" rel="noopener"><code>PRIO_USER</code></a> 之一，而 <em>who</em> 会相对于 <em>which</em> (<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PRIO_PROCESS" target="_blank" rel="noopener"><code>PRIO_PROCESS</code></a> 的进程标识符, <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PRIO_PGRP" target="_blank" rel="noopener"><code>PRIO_PGRP</code></a> 的进程组标识符和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PRIO_USER" target="_blank" rel="noopener"><code>PRIO_USER</code></a> 的用户 ID) 被解析。 <em>who</em> 值为零 (分别) 表示调用进程，调用进程的进程组或调用进程的真实用户 ID。 <em>priority</em> 是范围在 -20 至 19 的值。 默认优先级为 0；较小的优先级数值会更优先被调度。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.setregid</code>(<em>rgid</em>, <em>egid</em>)</p>
<p>设置当前进程的真实和有效组ID。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.setresgid</code>(<em>rgid</em>, <em>egid</em>, <em>sgid</em>)</p>
<p>设置当前进程的真实，有效和暂存组ID。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.2 新版功能.</em></p>
</li>
<li><p><code>os.setresuid</code>(<em>ruid</em>, <em>euid</em>, <em>suid</em>)</p>
<p>设置当前进程的真实，有效和暂存用户ID。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.2 新版功能.</em></p>
</li>
<li><p><code>os.setreuid</code>(<em>ruid</em>, <em>euid</em>)</p>
<p>设置当前进程的真实和有效用户ID。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.getsid</code>(<em>pid</em>)</p>
<p>调用系统调用 <code>getsid()</code>。相关说明，请参考 Unix 手册。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.setsid</code>()</p>
<p>使用系统调用 <code>getsid()</code>。相关说明，请参考 Unix 手册。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.setuid</code>(<em>uid</em>)</p>
<p>设置当前进程的用户ID。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.strerror</code>(<em>code</em>)</p>
<p>根据 <em>code</em> 中的错误码返回错误消息。 在某些平台上当给出未知错误码时 <code>strerror()</code> 将返回 <code>NULL</code> 并会引发 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#ValueError" target="_blank" rel="noopener"><code>ValueError</code></a>。</p>
</li>
<li><p><code>os.supports_bytes_environ</code></p>
<p>如果操作系统上原生环境类型是字节型则为 <code>True</code> (例如在 Windows 上为 <code>False</code>)。<em>3.2 新版功能.</em></p>
</li>
<li><p><code>os.umask</code>(<em>mask</em>)</p>
<p>设定当前数值掩码并返回之前的掩码。</p>
</li>
<li><p><code>os.uname</code>()</p>
<p>返回当前操作系统的识别信息。返回值是一个有5个属性的对象：<code>sysname</code> - 操作系统名<code>nodename</code> - 机器在网络上的名称（需要先设定）<code>release</code> - 操作系统发行信息<code>version</code> - 操作系统版本信息<code>machine</code> - 硬件标识符为了向后兼容，该对象也是可迭代的，像是一个按照 <code>sysname</code>，<code>nodename</code>，<code>release</code>，<code>version</code>，和 <code>machine</code> 顺序组成的元组。有些系统会将 <code>nodename</code> 截短为 8 个字符或截短至前缀部分；获取主机名的一个更好方式是 <a href="https://docs.python.org/zh-cn/3.8/library/socket.html#socket.gethostname" target="_blank" rel="noopener"><code>socket.gethostname()</code></a> 或甚至可以用 <code>socket.gethostbyaddr(socket.gethostname())</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: 较新的 Unix 版本。<em>在 3.3 版更改:</em> 返回结果的类型由元组变成一个类似元组的对象，同时具有命名的属性。</p>
</li>
<li><p><code>os.unsetenv</code>(<em>key</em>)</p>
<p>取消设置（删除）名为 <em>key</em> 的环境变量。变量名的改变会影响由 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.system" target="_blank" rel="noopener"><code>os.system()</code></a>，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.popen" target="_blank" rel="noopener"><code>popen()</code></a>，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fork" target="_blank" rel="noopener"><code>fork()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execv" target="_blank" rel="noopener"><code>execv()</code></a> 触发的子进程。当系统支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.unsetenv" target="_blank" rel="noopener"><code>unsetenv()</code></a> ，删除在 <code>os.environ</code> 中的变量会自动转换为对 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.unsetenv" target="_blank" rel="noopener"><code>unsetenv()</code></a> 的调用。但是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.unsetenv" target="_blank" rel="noopener"><code>unsetenv()</code></a> 不能更新 <code>os.environ</code>，因此最好直接删除 <code>os.environ</code> 中的变量。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.unsetenv</code>，附带参数 <code>key</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: 大部分的Unix系统。</p>
</li>
</ul>
<h2 id="创建文件对象"><a href="#创建文件对象" class="headerlink" title="创建文件对象"></a>创建文件对象</h2><p>这些函数创建新的 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-file-object" target="_blank" rel="noopener">file objects</a> 。（参见 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.open" target="_blank" rel="noopener"><code>open()</code></a> 以获取打开文件描述符的相关信息。）</p>
<ul>
<li><p><code>os.fdopen</code>(<em>fd</em>, <strong>args<em>, </em></strong>kwargs*)</p>
<p>返回打开文件描述符 <em>fd</em> 对应文件的对象。类似内建 <a href="https://docs.python.org/zh-cn/3.8/library/functions.html#open" target="_blank" rel="noopener"><code>open()</code></a> 函数，二者接受同样的参数。不同之处在于 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fdopen" target="_blank" rel="noopener"><code>fdopen()</code></a> 第一个参数应该为整数。</p>
</li>
</ul>
<h2 id="文件描述符操作"><a href="#文件描述符操作" class="headerlink" title="文件描述符操作"></a>文件描述符操作</h2><p>这些函数对文件描述符所引用的 I/O 流进行操作。</p>
<p>文件描述符是一些小的整数，对应于当前进程所打开的文件。例如，标准输入的文件描述符通常是0，标准输出是1，标准错误是2。之后被进程打开的文件的文件描述符会被依次指定为3，4，5等。“文件描述符”这个词有点误导性，在 Unix 平台中套接字和管道也被文件描述符所引用。</p>
<p>当需要时，可以用 <a href="https://docs.python.org/zh-cn/3.8/library/io.html#io.IOBase.fileno" target="_blank" rel="noopener"><code>fileno()</code></a> 可以获得 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-file-object" target="_blank" rel="noopener">file object</a> 所对应的文件描述符。需要注意的是，直接使用文件描述符会绕过文件对象的方法，会忽略如数据内部缓冲等情况。</p>
<ul>
<li><p><code>os.close</code>(<em>fd</em>)</p>
<p>关闭文件描述符 <em>fd</em>。注解 该功能适用于低级 I/O 操作，必须用于 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.open" target="_blank" rel="noopener"><code>os.open()</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.pipe" target="_blank" rel="noopener"><code>pipe()</code></a> 返回的文件描述符。若要关闭由内建函数 <a href="https://docs.python.org/zh-cn/3.8/library/functions.html#open" target="_blank" rel="noopener"><code>open()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.popen" target="_blank" rel="noopener"><code>popen()</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fdopen" target="_blank" rel="noopener"><code>fdopen()</code></a> 返回的 “文件对象”，则应使用其相应的 <a href="https://docs.python.org/zh-cn/3.8/library/io.html#io.IOBase.close" target="_blank" rel="noopener"><code>close()</code></a> 方法。</p>
</li>
<li><p><code>os.closerange</code>(<em>fd_low</em>, <em>fd_high</em>)</p>
<p>关闭从 <em>fd_low</em> （包括）到 <em>fd_high</em> （排除）间的文件描述符，并忽略错误。类似（但快于）:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> fd <span class="keyword">in</span> range(fd_low, fd_high):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        os.close(fd)</span><br><span class="line">    <span class="keyword">except</span> OSError:</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>os.copy_file_range</code>(<em>src</em>, <em>dst</em>, <em>count</em>, <em>offset_src=None</em>, <em>offset_dst=None</em>)</p>
<p>从文件描述符 <em>src</em> 复制 <em>count</em> 字节，从偏移量 <em>offset_src</em> 开始读取，到文件描述符 <em>dst</em>，从偏移量 <em>offset_dst</em> 开始写入。如果 <em>offset_src</em> 为 None，则 <em>src</em> 将从当前位置开始读取；<em>offset_dst</em> 同理。<em>src</em> 和 <em>dst</em> 指向的文件必须处于相同的文件系统，否则将会抛出一个 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError.errno" target="_blank" rel="noopener"><code>errno</code></a> 被设为 <a href="https://docs.python.org/zh-cn/3.8/library/errno.html#errno.EXDEV" target="_blank" rel="noopener"><code>errno.EXDEV</code></a> 的 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 。此复制的完成没有额外的从内核到用户空间再回到内核的数据转移花费。另外，一些文件系统可能实现额外的优化。完成复制就如同打开两个二进制文件一样。返回值是复制的字节的数目。这可能低于需求的数目。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">Availability</a>: Linux kernel &gt;= 4.5 或 glibc &gt;= 2.27。<em>3.8 新版功能.</em></p>
</li>
<li><p><code>os.device_encoding</code>(<em>fd</em>)</p>
<p>如果连接到终端，则返回一个与 <em>fd</em> 关联的设备描述字符，否则返回 <a href="https://docs.python.org/zh-cn/3.8/library/constants.html#None" target="_blank" rel="noopener"><code>None</code></a>。</p>
</li>
<li><p><code>os.dup</code>(<em>fd</em>)</p>
<p>返回一个文件描述符 <em>fd</em> 的副本。该文件描述符的副本是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#fd-inheritance" target="_blank" rel="noopener">不可继承的</a>。在 Windows 中，当复制一个标准流（0: stdin, 1: stdout, 2: stderr）时，新的文件描述符是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#fd-inheritance" target="_blank" rel="noopener">可继承的</a>。<em>在 3.4 版更改:</em> 新的文件描述符现在是不可继承的。</p>
</li>
<li><p><code>os.dup2</code>(<em>fd</em>, <em>fd2</em>, <em>inheritable=True</em>)</p>
<p>把文件描述符 <em>fd</em> 复制为 <em>fd2</em>，必要时先关闭后者。返回 <em>fd2</em>。新的文件描述符默认是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#fd-inheritance" target="_blank" rel="noopener">可继承的</a>，除非在 <em>inheritable</em> 为 <code>False</code> 时，是不可继承的。<em>在 3.4 版更改:</em> 添加可选参数 <em>inheritable</em>。<em>在 3.7 版更改:</em> 成功时返回 <em>fd2</em>，以过去的版本中，总是返回 <code>None</code>。</p>
</li>
<li><p><code>os.fchmod</code>(<em>fd</em>, <em>mode</em>)</p>
<p>将 <em>fd</em> 指定文件的权限状态修改为 <em>mode</em>。可以参考 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.chmod" target="_blank" rel="noopener"><code>chmod()</code></a> 中列出 <em>mode</em> 的可用值。从Python 3.3开始，这相当于 <code>os.chmod(fd, mode)</code>。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.chmod</code>，附带参数 <code>path</code>、<code>mode</code>、<code>dir_fd</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.fchown</code>(<em>fd</em>, <em>uid</em>, <em>gid</em>)</p>
<p>分别将 <em>fd</em> 指定文件的所有者和组 ID 修改为 <em>uid</em> 和 <em>gid</em> 的值。若不想变更其中的某个 ID，可将相应值设为 -1。参考 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.chown" target="_blank" rel="noopener"><code>chown()</code></a>。从 Python 3.3 开始，这相当于 <code>os.chown(fd, uid, gid)</code>。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.chown</code>，附带参数 <code>path</code>、<code>uid</code>、<code>gid</code>、<code>dir_fd</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.fdatasync</code>(<em>fd</em>)</p>
<p>强制将文件描述符 <em>fd</em> 指定文件写入磁盘。不强制更新元数据。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
<blockquote>
<p> 该功能在 MacOS 中不可用。 </p>
</blockquote>
</li>
<li><p><code>os.fpathconf</code>(<em>fd</em>, <em>name</em>)</p>
<p>返回与打开的文件有关的系统配置信息。<em>name</em> 指定要查找的配置名称，它可以是字符串，是一个系统已定义的名称，这些名称定义在不同标准（POSIX.1，Unix 95，Unix 98 等）中。一些平台还定义了额外的其他名称。当前操作系统已定义的名称在 <code>pathconf_names</code> 字典中给出。对于未包含在该映射中的配置名称，也可以传递一个整数作为 <em>name</em>。如果 <em>name</em> 是一个字符串且不是已定义的名称，将抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#ValueError" target="_blank" rel="noopener"><code>ValueError</code></a> 异常。如果当前系统不支持 <em>name</em> 指定的配置名称，即使该名称存在于 <code>pathconf_names</code>，也会抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 异常，错误码为 <a href="https://docs.python.org/zh-cn/3.8/library/errno.html#errno.EINVAL" target="_blank" rel="noopener"><code>errno.EINVAL</code></a>。从 Python 3.3 起，此功能等价于 <code>os.pathconf(fd, name)</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.fstat</code>(<em>fd</em>)</p>
<p>获取文件描述符 <em>fd</em> 的状态. 返回一个 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result" target="_blank" rel="noopener"><code>stat_result</code></a> 对象。从 Python 3.3 起，此功能等价于 <code>os.stat(fd)</code>。</p>
<blockquote>
<p>参见：  <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat" target="_blank" rel="noopener"><code>stat()</code></a> 函数。</p>
</blockquote>
</li>
<li><p><code>os.fstatvfs</code>(<em>fd</em>)</p>
<p>返回文件系统的信息，该文件系统是文件描述符 <em>fd</em> 指向的文件所在的文件系统，与 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.statvfs" target="_blank" rel="noopener"><code>statvfs()</code></a> 一样。从 Python 3.3 开始，它等效于 <code>os.statvfs(fd)</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.fsync</code>(<em>fd</em>)</p>
<p>强制将文件描述符 <em>fd</em> 指向的文件写入磁盘。在 Unix，这将调用原生 <code>fsync()</code> 函数；在 Windows，则是 MS <code>_commit()</code> 函数。如果要写入的是缓冲区内的 Python <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-file-object" target="_blank" rel="noopener">文件对象</a> <em>f</em>，请先执行 <code>f.flush()</code>，然后执行 <code>os.fsync(f.fileno())</code>，以确保与 <em>f</em> 关联的所有内部缓冲区都写入磁盘。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix, Windows。</p>
</li>
<li><p><code>os.ftruncate</code>(<em>fd</em>, <em>length</em>)</p>
<p>截断文件描述符 <em>fd</em> 指向的文件，以使其最大为 <em>length</em> 字节。从 Python 3.3 开始，它等效于 <code>os.truncate(fd, length)</code>。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.truncate</code>，附带参数 <code>fd</code>, <code>length</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix, Windows。<em>在 3.5 版更改:</em> 添加了 Windows 支持</p>
</li>
<li><p><code>os.get_blocking</code>(<em>fd</em>)</p>
<p>获取文件描述符的阻塞模式：如果设置了 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.O_NONBLOCK" target="_blank" rel="noopener"><code>O_NONBLOCK</code></a> 标志位，返回 <code>False</code>，如果该标志位被清除，返回 <code>True</code>。参见 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.set_blocking" target="_blank" rel="noopener"><code>set_blocking()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/socket.html#socket.socket.setblocking" target="_blank" rel="noopener"><code>socket.socket.setblocking()</code></a>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.5 新版功能.</em></p>
</li>
<li><p><code>os.isatty</code>(<em>fd</em>)</p>
<p>如果文件描述符 <em>fd</em> 打开且已连接至 tty 设备（或类 tty 设备），返回 <code>True</code>，否则返回 <code>False</code>。</p>
</li>
<li><p><code>os.lockf</code>(<em>fd</em>, <em>cmd</em>, <em>len</em>)</p>
<p>在打开的文件描述符上，使用、测试或删除 POSIX 锁。<em>fd</em> 是一个打开的文件描述符。<em>cmd</em> 指定要进行的操作，它们是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.F_LOCK" target="_blank" rel="noopener"><code>F_LOCK</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.F_TLOCK" target="_blank" rel="noopener"><code>F_TLOCK</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.F_ULOCK" target="_blank" rel="noopener"><code>F_ULOCK</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.F_TEST" target="_blank" rel="noopener"><code>F_TEST</code></a> 中的一个。<em>len</em> 指定哪部分文件需要锁定。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.lockf</code>，附带参数 <code>fd</code>、<code>cmd</code>、<code>len</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.F_LOCK</code></p>
</li>
<li><p><code>os.F_TLOCK</code></p>
</li>
<li><p><code>os.F_ULOCK</code></p>
</li>
<li><p><code>os.F_TEST</code></p>
<p>标志位，用于指定 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.lockf" target="_blank" rel="noopener"><code>lockf()</code></a> 进行哪一种操作。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.lseek</code>(<em>fd</em>, <em>pos</em>, <em>how</em>)</p>
<p>将文件描述符 <em>fd</em> 的当前位置设置为 <em>pos</em>，位置的计算方式 <em>how</em> 如下：设置为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.SEEK_SET" target="_blank" rel="noopener"><code>SEEK_SET</code></a> 或 <code>0</code> 表示从文件开头计算，设置为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.SEEK_CUR" target="_blank" rel="noopener"><code>SEEK_CUR</code></a> 或 <code>1</code> 表示从文件当前位置计算，设置为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.SEEK_END" target="_blank" rel="noopener"><code>SEEK_END</code></a> 或 <code>2</code> 表示文件末尾计算。返回新指针位置，这个位置是从文件开头计算的，单位是字节。</p>
</li>
<li><p><code>os.SEEK_SET</code></p>
</li>
<li><p><code>os.SEEK_CUR</code></p>
</li>
<li><p><code>os.SEEK_END</code></p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.lseek" target="_blank" rel="noopener"><code>lseek()</code></a> 函数的参数，它们的值分别为 0、1 和 2。<em>3.3 新版功能:</em> 某些操作系统可能支持其他值，例如 <code>os.SEEK_HOLE</code> 或 <code>os.SEEK_DATA</code>。</p>
</li>
<li><p><code>os.open</code>(<em>path</em>, <em>flags</em>, <em>mode=0o777</em>, <em>**, </em>dir_fd=None*)</p>
<p>打开文件 <em>path</em>，根据 <em>flags</em> 设置各种标志位，并根据 <em>mode</em> 设置其权限状态。当计算 <em>mode</em> 时，会首先根据当前 umask 值将部分权限去除。本方法返回新文件的描述符。新的文件描述符是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#fd-inheritance" target="_blank" rel="noopener">不可继承</a> 的。有关 flag 和 mode 取值的说明，请参见 C 运行时文档。标志位常量（如 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.O_RDONLY" target="_blank" rel="noopener"><code>O_RDONLY</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.O_WRONLY" target="_blank" rel="noopener"><code>O_WRONLY</code></a>）在 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#module-os" target="_blank" rel="noopener"><code>os</code></a> 模块中定义。特别地，在 Windows 上需要添加 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.O_BINARY" target="_blank" rel="noopener"><code>O_BINARY</code></a> 才能以二进制模式打开文件。本函数带有 <em>dir_fd</em> 参数，支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#dir-fd" target="_blank" rel="noopener">基于目录描述符的相对路径</a>。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>open</code>，附带参数 <code>path</code>、<code>mode</code>、<code>flags</code>。<em>在 3.4 版更改:</em> 新的文件描述符现在是不可继承的。</p>
<blockquote>
<p>注解：本函数适用于底层的 I/O。常规用途请使用内置函数 <a href="https://docs.python.org/zh-cn/3.8/library/functions.html#open" target="_blank" rel="noopener"><code>open()</code></a>，该函数的 <code>read()</code> 和 <code>write()</code> 方法（及其他方法）会返回 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-file-object" target="_blank" rel="noopener">文件对象</a>。要将文件描述符包装在文件对象中，请使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fdopen" target="_blank" rel="noopener"><code>fdopen()</code></a>。</p>
</blockquote>
<p><em>3.3 新版功能:</em> <em>dir_fd</em> 参数。</p>
<p><em>在 3.5 版更改:</em> 如果系统调用被中断，但信号处理程序没有触发异常，此函数现在会重试系统调用，而不是触发 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#InterruptedError" target="_blank" rel="noopener"><code>InterruptedError</code></a> 异常 (原因详见 <a href="https://www.python.org/dev/peps/pep-0475" target="_blank" rel="noopener"><strong>PEP 475</strong></a>)。</p>
<p><em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
</ul>
<h3 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h3><p>以下常量是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.open" target="_blank" rel="noopener"><code>open()</code></a> 函数 <em>flags</em> 参数的选项。可以用按位或运算符 <code>|</code> 将它们组合使用。部分常量并非在所有平台上都可用。有关其可用性和用法的说明，请参阅 <em><a href="https://manpages.debian.org/open(2" target="_blank" rel="noopener">open(2)</a>)</em> 手册（Unix 上）或 <a href="https://msdn.microsoft.com/en-us/library/z0kc8e3z.aspx" target="_blank" rel="noopener">MSDN</a> （Windows 上）。</p>
<ul>
<li><p><code>os.O_RDONLY</code></p>
</li>
<li><p><code>os.O_WRONLY</code></p>
</li>
<li><p><code>os.O_RDWR</code></p>
</li>
<li><p><code>os.O_APPEND</code></p>
</li>
<li><p><code>os.O_CREAT</code></p>
</li>
<li><p><code>os.O_EXCL</code></p>
</li>
<li><p><code>os.O_TRUNC</code></p>
<p>上述常量在 Unix 和 Windows 上均可用。</p>
</li>
<li><p><code>os.O_DSYNC</code></p>
</li>
<li><p><code>os.O_RSYNC</code></p>
</li>
<li><p><code>os.O_SYNC</code></p>
</li>
<li><p><code>os.O_NDELAY</code></p>
</li>
<li><p><code>os.O_NONBLOCK</code></p>
</li>
<li><p><code>os.O_NOCTTY</code></p>
</li>
<li><p><code>os.O_CLOEXEC</code></p>
<p>这个常数仅在 Unix 系统中可用。<em>在 3.3 版更改:</em> 增加 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.O_CLOEXEC" target="_blank" rel="noopener"><code>O_CLOEXEC</code></a> 常量。</p>
</li>
<li><p><code>os.O_BINARY</code></p>
</li>
<li><p><code>os.O_NOINHERIT</code></p>
</li>
<li><p><code>os.O_SHORT_LIVED</code></p>
</li>
<li><p><code>os.O_TEMPORARY</code></p>
</li>
<li><p><code>os.O_RANDOM</code></p>
</li>
<li><p><code>os.O_SEQUENTIAL</code></p>
</li>
<li><p><code>os.O_TEXT</code></p>
<p>这个常数仅在 Windows 系统中可用。</p>
</li>
<li><p><code>os.O_ASYNC</code></p>
</li>
<li><p><code>os.O_DIRECT</code></p>
</li>
<li><p><code>os.O_DIRECTORY</code></p>
</li>
<li><p><code>os.O_NOFOLLOW</code></p>
</li>
<li><p><code>os.O_NOATIME</code></p>
</li>
<li><p><code>os.O_PATH</code></p>
</li>
<li><p><code>os.O_TMPFILE</code></p>
</li>
<li><p><code>os.O_SHLOCK</code></p>
</li>
<li><p><code>os.O_EXLOCK</code></p>
<p>上述常量是扩展常量，如果 C 库未定义它们，则不存在。<em>在 3.4 版更改:</em> 在支持的系统上增加 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.O_PATH" target="_blank" rel="noopener"><code>O_PATH</code></a>。增加 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.O_TMPFILE" target="_blank" rel="noopener"><code>O_TMPFILE</code></a>，仅在 Linux Kernel 3.11 或更高版本可用。</p>
</li>
<li><p><code>os.openpty</code>()</p>
<p>打开一对新的伪终端，返回一对文件描述符 <code>（主，从）</code>，分别为 pty 和 tty。新的文件描述符是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#fd-inheritance" target="_blank" rel="noopener">不可继承</a> 的。对于（稍微）轻量一些的方法，请使用 <a href="https://docs.python.org/zh-cn/3.8/library/pty.html#module-pty" target="_blank" rel="noopener"><code>pty</code></a> 模块。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: 某些 Unix。<em>在 3.4 版更改:</em> 新的文件描述符不再可继承。</p>
</li>
<li><p><code>os.pipe</code>()</p>
<p>创建一个管道，返回一对分别用于读取和写入的文件描述符 <code>(r, w)</code>。新的文件描述符是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#fd-inheritance" target="_blank" rel="noopener">不可继承</a> 的。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix, Windows。<em>在 3.4 版更改:</em> 新的文件描述符不再可继承。</p>
</li>
<li><p><code>os.pipe2</code>(<em>flags</em>)</p>
<p>创建带有 <em>flags</em> 标志位的管道。可通过对以下一个或多个值进行“或”运算来构造这些 <em>flags</em>：<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.O_NONBLOCK" target="_blank" rel="noopener"><code>O_NONBLOCK</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.O_CLOEXEC" target="_blank" rel="noopener"><code>O_CLOEXEC</code></a>。返回一对分别用于读取和写入的文件描述符 <code>(r, w)</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: 某些 Unix。<em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.posix_fallocate</code>(<em>fd</em>, <em>offset</em>, <em>len</em>)</p>
<p>确保为 <em>fd</em> 指向的文件分配了足够的磁盘空间，该空间从偏移量 <em>offset</em> 开始，到 <em>len</em> 字节为止。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.posix_fadvise</code>(<em>fd</em>, <em>offset</em>, <em>len</em>, <em>advice</em>)</p>
<p>声明即将以特定模式访问数据，使内核可以提前进行优化。数据范围是从 <em>fd</em> 所指向文件的 <em>offset</em> 开始，持续 <em>len</em> 个字节。<em>advice</em> 的取值是如下之一：<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.POSIX_FADV_NORMAL" target="_blank" rel="noopener"><code>POSIX_FADV_NORMAL</code></a>, <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.POSIX_FADV_SEQUENTIAL" target="_blank" rel="noopener"><code>POSIX_FADV_SEQUENTIAL</code></a>, <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.POSIX_FADV_RANDOM" target="_blank" rel="noopener"><code>POSIX_FADV_RANDOM</code></a>, <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.POSIX_FADV_NOREUSE" target="_blank" rel="noopener"><code>POSIX_FADV_NOREUSE</code></a>, <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.POSIX_FADV_WILLNEED" target="_blank" rel="noopener"><code>POSIX_FADV_WILLNEED</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.POSIX_FADV_DONTNEED" target="_blank" rel="noopener"><code>POSIX_FADV_DONTNEED</code></a>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.POSIX_FADV_NORMAL</code></p>
</li>
<li><p><code>os.POSIX_FADV_SEQUENTIAL</code></p>
</li>
<li><p><code>os.POSIX_FADV_RANDOM</code></p>
</li>
<li><p><code>os.POSIX_FADV_NOREUSE</code></p>
</li>
<li><p><code>os.POSIX_FADV_WILLNEED</code></p>
</li>
<li><p><code>os.POSIX_FADV_DONTNEED</code></p>
<p>用于 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.posix_fadvise" target="_blank" rel="noopener"><code>posix_fadvise()</code></a> 的 <em>advice</em> 参数的标志位，指定可能使用的访问模式。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.pread</code>(<em>fd</em>, <em>n</em>, <em>offset</em>)</p>
<p>从文件描述符 <em>fd</em> 所指向文件的偏移位置 <em>offset</em> 开始，读取至多 <em>n</em> 个字节，而保持文件偏移量不变。返回所读取字节的字节串 (bytestring)。如果到达了 <em>fd</em> 指向的文件末尾，则返回空字节对象。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.preadv</code>(<em>fd</em>, <em>buffers</em>, <em>offset</em>, <em>flags=0</em>)</p>
<p>从文件描述符 <em>fd</em> 所指向文件的偏移位置 <em>offset</em> 开始，将数据读取至可变 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-bytes-like-object" target="_blank" rel="noopener">字节类对象</a> 缓冲区 <em>buffers</em> 中，保持文件偏移量不变。将数据依次存放到每个缓冲区中，填满一个后继续存放到序列中的下一个缓冲区，来保存其余数据。flags 参数可以由零个或多个标志位进行按位或运算来得到：<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.RWF_HIPRI" target="_blank" rel="noopener"><code>RWF_HIPRI</code></a><a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.RWF_NOWAIT" target="_blank" rel="noopener"><code>RWF_NOWAIT</code></a>返回实际读取的字节总数，该总数可以小于所有对象的总容量。操作系统可能对允许使用的缓冲区数量有限制（使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.sysconf" target="_blank" rel="noopener"><code>sysconf()</code></a> 获取 <code>&#39;SC_IOV_MAX&#39;</code> 值）。本方法结合了 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.readv" target="_blank" rel="noopener"><code>os.readv()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.pread" target="_blank" rel="noopener"><code>os.pread()</code></a> 的功能。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>：Linux 2.6.30 或更高版本，FreeBSD 6.0 或更高版本，OpenBSD 2.7 或更高版本。使用标志位需要 Linux 4.6 或更高版本。<em>3.7 新版功能.</em></p>
</li>
<li><p><code>os.RWF_NOWAIT</code></p>
<p>不要等待无法立即获得的数据。如果指定了此标志，那么当需要从后备存储器中读取数据，或等待文件锁时，系统调用将立即返回。如果成功读取数据，则返回读取的字节数。如果未读取到数据，则返回 <code>-1</code>，并将错误码 errno 置为 <a href="https://docs.python.org/zh-cn/3.8/library/errno.html#errno.EAGAIN" target="_blank" rel="noopener"><code>errno.EAGAIN</code></a>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>：Linux 4.14 或更高版本。<em>3.7 新版功能.</em></p>
</li>
<li><p><code>os.RWF_HIPRI</code></p>
<p>高优先级读/写。允许基于块的文件系统对设备进行轮询，这样可以降低延迟，但可能会占用更多资源。目前在 Linux 上，此功能仅在使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.O_DIRECT" target="_blank" rel="noopener"><code>O_DIRECT</code></a> 标志打开的文件描述符上可用。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>：Linux 4.6 或更高版本。<em>3.7 新版功能.</em></p>
</li>
<li><p><code>os.pwrite</code>(<em>fd</em>, <em>str</em>, <em>offset</em>)</p>
<p>将 <em>str</em> 中的字节串 (bytestring) 写入文件描述符 <em>fd</em> 的偏移位置 <em>offset</em> 处，保持文件偏移量不变。返回实际写入的字节数。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.pwritev</code>(<em>fd</em>, <em>buffers</em>, <em>offset</em>, <em>flags=0</em>)</p>
<p>将缓冲区 <em>buffers</em> 的内容写入文件描述符 <em>fd</em> 的偏移位置 <em>offset</em> 处，保持文件偏移量不变。缓冲区 <em>buffers</em> 必须是由 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-bytes-like-object" target="_blank" rel="noopener">字节类对象</a> 组成的序列。缓冲区以数组顺序处理。先写入第一个缓冲区的全部内容，再写入第二个缓冲区，照此继续。flags 参数可以由零个或多个标志位进行按位或运算来得到：<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.RWF_DSYNC" target="_blank" rel="noopener"><code>RWF_DSYNC</code></a><a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.RWF_SYNC" target="_blank" rel="noopener"><code>RWF_SYNC</code></a>返回实际写入的字节总数。操作系统可能对允许使用的缓冲区数量有限制（使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.sysconf" target="_blank" rel="noopener"><code>sysconf()</code></a> 获取 <code>&#39;SC_IOV_MAX&#39;</code> 值）。本方法结合了 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.writev" target="_blank" rel="noopener"><code>os.writev()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.pwrite" target="_blank" rel="noopener"><code>os.pwrite()</code></a> 的功能。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>：Linux 2.6.30 或更高版本，FreeBSD 6.0 或更高版本，OpenBSD 2.7 或更高版本。使用标志位需要 Linux 4.7 或更高版本。<em>3.7 新版功能.</em></p>
</li>
<li><p><code>os.RWF_DSYNC</code></p>
<p>提供立即写入功能，等效于 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.O_DSYNC" target="_blank" rel="noopener"><code>O_DSYNC</code></a> <code>open(2)</code> 标志。该标志仅作用于系统调用写入的数据。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>：Linux 4.7 或更高版本。<em>3.7 新版功能.</em></p>
</li>
<li><p><code>os.RWF_SYNC</code></p>
<p>提供立即写入功能，等效于 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.O_SYNC" target="_blank" rel="noopener"><code>O_SYNC</code></a> <code>open(2)</code> 标志。该标志仅作用于系统调用写入的数据。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>：Linux 4.7 或更高版本。<em>3.7 新版功能.</em></p>
</li>
<li><p><code>os.read</code>(<em>fd</em>, <em>n</em>)</p>
<p>从文件描述符 <em>fd</em> 中读取至多 <em>n</em> 个字节。返回所读取字节的字节串 (bytestring)。如果到达了 <em>fd</em> 指向的文件末尾，则返回空字节对象。</p>
<blockquote>
<p> 该功能适用于低级 I/O 操作，必须用于 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.open" target="_blank" rel="noopener"><code>os.open()</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.pipe" target="_blank" rel="noopener"><code>pipe()</code></a> 返回的文件描述符。若要读取由内建函数 <a href="https://docs.python.org/zh-cn/3.8/library/functions.html#open" target="_blank" rel="noopener"><code>open()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.popen" target="_blank" rel="noopener"><code>popen()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fdopen" target="_blank" rel="noopener"><code>fdopen()</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#sys.stdin" target="_blank" rel="noopener"><code>sys.stdin</code></a> 返回的 “文件对象”，则应使用其相应的 <code>read()</code> 或 <code>readline()</code> 方法。 </p>
</blockquote>
<p> <em>在 3.5 版更改:</em> 如果系统调用被中断，但信号处理程序没有触发异常，此函数现在会重试系统调用，而不是触发 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#InterruptedError" target="_blank" rel="noopener"><code>InterruptedError</code></a> 异常 (原因详见 <a href="https://www.python.org/dev/peps/pep-0475" target="_blank" rel="noopener"><strong>PEP 475</strong></a>)。 </p>
</li>
<li><p><code>os.sendfile</code>(<em>out</em>, <em>in</em>, <em>offset</em>, <em>count</em>)</p>
<p><code>os.sendfile</code>(<em>out</em>, <em>in</em>, <em>offset</em>, <em>count</em>, [<em>headers</em>, ][<em>trailers</em>, ]<em>flags=0</em>)</p>
<p>将文件描述符 <em>in</em> 中的 <em>count</em> 字节复制到文件描述符 <em>out</em> 的偏移位置 <em>offset</em> 处。返回复制的字节数，如果到达 EOF，返回 0。</p>
<p>定义了 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.sendfile" target="_blank" rel="noopener"><code>sendfile()</code></a> 的所有平台均支持第一种函数用法。</p>
<p>在 Linux 上，将 <em>offset</em> 设置为 <code>None</code>，则从 <em>in</em> 的当前位置开始读取，并更新 <em>in</em> 的位置。</p>
<p>第二种函数用法可以在 Mac OS X 和 FreeBSD 上使用，其中，<em>headers</em> 和 <em>trailers</em> 是任意的缓冲区序列，它们分别在写入 <em>in</em> 的数据前、后被写入。返回值与第一种用法相同。</p>
<p>在 Mac OS X 和 FreeBSD 上，将 <em>count</em> 设为 0 表示持续复制直到 <em>in</em> 的结尾。</p>
<p>所有平台都支持将套接字作为 <em>out</em> 文件描述符，有些平台也支持其他类型（如常规文件或管道）。</p>
<p>跨平台应用程序不应使用 <em>headers</em>、<em>trailers</em> 和 <em>flags</em> 参数。</p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
<blockquote>
<p> 注解：有关 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.sendfile" target="_blank" rel="noopener"><code>sendfile()</code></a> 的高级封装，参见 <a href="https://docs.python.org/zh-cn/3.8/library/socket.html#socket.socket.sendfile" target="_blank" rel="noopener"><code>socket.socket.sendfile()</code></a>。</p>
</blockquote>
</li>
<li><p><code>os.set_blocking</code>(<em>fd</em>, <em>blocking</em>)</p>
<p>设置指定文件描述符的阻塞模式：如果 blocking 为 <code>False</code>，则为该描述符设置 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.O_NONBLOCK" target="_blank" rel="noopener"><code>O_NONBLOCK</code></a> 标志位，反之则清除该标志位。参见 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.get_blocking" target="_blank" rel="noopener"><code>get_blocking()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/socket.html#socket.socket.setblocking" target="_blank" rel="noopener"><code>socket.socket.setblocking()</code></a>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.5 新版功能.</em></p>
</li>
<li><p><code>os.SF_NODISKIO</code></p>
</li>
<li><p><code>os.SF_MNOWAIT</code></p>
</li>
<li><p><code>os.SF_SYNC</code></p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.sendfile" target="_blank" rel="noopener"><code>sendfile()</code></a> 函数的参数（假设当前实现支持这些参数）。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.readv</code>(<em>fd</em>, <em>buffers</em>)</p>
<p>从文件描述符 <em>fd</em> 将数据读取至多个可变的 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-bytes-like-object" target="_blank" rel="noopener">字节类对象</a> 缓冲区 <em>buffers</em> 中。将数据依次存放到每个缓冲区中，填满一个后继续存放到序列中的下一个缓冲区，来保存其余数据。返回实际读取的字节总数，该总数可以小于所有对象的总容量。操作系统可能对允许使用的缓冲区数量有限制（使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.sysconf" target="_blank" rel="noopener"><code>sysconf()</code></a> 获取 <code>&#39;SC_IOV_MAX&#39;</code> 值）。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.tcgetpgrp</code>(<em>fd</em>)</p>
<p>返回与 <em>fd</em> 指定的终端相关联的进程组（<em>fd</em> 是由 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.open" target="_blank" rel="noopener"><code>os.open()</code></a> 返回的已打开的文件描述符）。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.tcsetpgrp</code>(<em>fd</em>, <em>pg</em>)</p>
<p>设置与 <em>fd</em> 指定的终端相关联的进程组为 <em>pg\</em>（<em>fd</em> 是由 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.open" target="_blank" rel="noopener"><code>os.open()</code></a> 返回的已打开的文件描述符）。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.ttyname</code>(<em>fd</em>)</p>
<p>返回一个字符串，该字符串表示与文件描述符 <em>fd</em> 关联的终端。如果 <em>fd</em> 没有与终端关联，则抛出异常。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.write</code>(<em>fd</em>, <em>str</em>)</p>
<p>将 <em>str</em> 中的字节串 (bytestring) 写入文件描述符 <em>fd</em>。返回实际写入的字节数。</p>
<blockquote>
<p> 该功能适用于低级 I/O 操作，必须用于 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.open" target="_blank" rel="noopener"><code>os.open()</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.pipe" target="_blank" rel="noopener"><code>pipe()</code></a> 返回的文件描述符。若要写入由内建函数 <a href="https://docs.python.org/zh-cn/3.8/library/functions.html#open" target="_blank" rel="noopener"><code>open()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.popen" target="_blank" rel="noopener"><code>popen()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fdopen" target="_blank" rel="noopener"><code>fdopen()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/sys.html#sys.stdout" target="_blank" rel="noopener"><code>sys.stdout</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#sys.stderr" target="_blank" rel="noopener"><code>sys.stderr</code></a> 返回的 “文件对象”，则应使用其相应的 <code>write()</code> 方法。 </p>
</blockquote>
<p> <em>在 3.5 版更改:</em> 如果系统调用被中断，但信号处理程序没有触发异常，此函数现在会重试系统调用，而不是触发 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#InterruptedError" target="_blank" rel="noopener"><code>InterruptedError</code></a> 异常 (原因详见 <a href="https://www.python.org/dev/peps/pep-0475" target="_blank" rel="noopener"><strong>PEP 475</strong></a>)。 </p>
</li>
<li><p><code>os.writev</code>(<em>fd</em>, <em>buffers</em>)</p>
<p>将缓冲区 <em>buffers</em> 的内容写入文件描述符 <em>fd</em>。缓冲区 <em>buffers</em> 必须是由 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-bytes-like-object" target="_blank" rel="noopener">字节类对象</a> 组成的序列。缓冲区以数组顺序处理。先写入第一个缓冲区的全部内容，再写入第二个缓冲区，照此继续。</p>
<p>返回实际写入的字节总数。</p>
<p>操作系统可能对允许使用的缓冲区数量有限制（使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.sysconf" target="_blank" rel="noopener"><code>sysconf()</code></a> 获取 <code>&#39;SC_IOV_MAX&#39;</code> 值）。</p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
<p><em>3.3 新版功能.</em></p>
</li>
</ul>
<h3 id="查询终端的尺寸"><a href="#查询终端的尺寸" class="headerlink" title="查询终端的尺寸"></a>查询终端的尺寸</h3><p><em>3.3 新版功能.</em></p>
<ul>
<li><p><code>os.get_terminal_size</code>(<em>fd=STDOUT_FILENO</em>)</p>
<p>返回终端窗口的尺寸，格式为 <code>(columns, lines)</code>，它是类型为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.terminal_size" target="_blank" rel="noopener"><code>terminal_size</code></a> 的元组。可选参数 <code>fd</code> （默认为 <code>STDOUT_FILENO</code> 或标准输出）指定应查询的文件描述符。如果文件描述符未连接到终端，则抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 异常。<a href="https://docs.python.org/zh-cn/3.8/library/shutil.html#shutil.get_terminal_size" target="_blank" rel="noopener"><code>shutil.get_terminal_size()</code></a> 是供常规使用的高阶函数，<code>os.get_terminal_size</code> 是其底层的实现。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix, Windows。</p>
</li>
<li><p><em>class</em> <code>os.terminal_size</code></p>
<p>元组的子类，存储终端窗口尺寸 <code>(columns, lines)</code>。<code>columns</code>终端窗口的宽度，单位为字符。<code>lines</code>终端窗口的高度，单位为字符。</p>
</li>
</ul>
<h3 id="文件描述符的继承"><a href="#文件描述符的继承" class="headerlink" title="文件描述符的继承"></a>文件描述符的继承</h3><p><em>3.4 新版功能.</em></p>
<p>每个文件描述符都有一个 “inheritable”（可继承）标志位，该标志位控制了文件描述符是否可以由子进程继承。从 Python 3.4 开始，由 Python 创建的文件描述符默认是不可继承的。</p>
<p>在 UNIX 上，执行新程序时，不可继承的文件描述符在子进程中是关闭的，其他文件描述符将被继承。</p>
<p>在 Windows 上，不可继承的句柄和文件描述符在子进程中是关闭的，但标准流（文件描述符 0、1 和 2 即标准输入、标准输出和标准错误）是始终继承的。如果使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnl" target="_blank" rel="noopener"><code>spawn*</code></a> 函数，所有可继承的句柄和文件描述符都将被继承。如果使用 <a href="https://docs.python.org/zh-cn/3.8/library/subprocess.html#module-subprocess" target="_blank" rel="noopener"><code>subprocess</code></a> 模块，将关闭除标准流以外的所有文件描述符，并且仅当 <em>close_fds</em> 参数为 <code>False</code> 时才继承可继承的句柄。</p>
<ul>
<li><p><code>os.get_inheritable</code>(<em>fd</em>)</p>
<p>获取指定文件描述符的“可继承”标志位（为布尔值）。</p>
</li>
<li><p><code>os.set_inheritable</code>(<em>fd</em>, <em>inheritable</em>)</p>
<p>设置指定文件描述符的“可继承”标志位。</p>
</li>
<li><p><code>os.get_handle_inheritable</code>(<em>handle</em>)</p>
<p>获取指定句柄的“可继承”标志位（为布尔值）。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Windows。</p>
</li>
<li><p><code>os.set_handle_inheritable</code>(<em>handle</em>, <em>inheritable</em>)</p>
<p>设置指定句柄的“可继承”标志位。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Windows。</p>
</li>
</ul>
<h2 id="文件和目录"><a href="#文件和目录" class="headerlink" title="文件和目录"></a>文件和目录</h2><p>在某些 Unix 平台上，许多函数支持以下一项或多项功能：</p>
<ul>
<li><p><strong>指定文件描述符为参数：</strong> 通常在 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#module-os" target="_blank" rel="noopener"><code>os</code></a> 模块中提供给函数的 <em>path</em> 参数必须是表示文件路径的字符串，但是，某些函数现在可以接受其 <em>path</em> 参数为打开文件描述符，该函数将对描述符指向的文件进行操作。（对于 POSIX 系统，Python 将调用以 <code>f</code> 开头的函数变体（如调用 <code>fchdir</code> 而不是 <code>chdir</code>）。）</p>
<p>可以用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.supports_fd" target="_blank" rel="noopener"><code>os.supports_fd</code></a> 检查某个函数在你的平台上是否支持将 <em>path</em> 参数指定为文件描述符。如果不支持，使用该功能将抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#NotImplementedError" target="_blank" rel="noopener"><code>NotImplementedError</code></a> 异常。</p>
<p>如果该函数还支持 <em>dir_fd</em> 或 <em>follow_symlinks</em> 参数，那么用文件描述符作为 <em>path</em> 后就不能再指定上述参数了。</p>
</li>
<li><p><strong>基于目录描述符的相对路径：</strong> 如果 <em>dir_fd</em> 不是 <code>None</code>，它就应该是一个指向目录的文件描述符，这时待操作的 path 应该是相对路径，相对路径是相对于前述目录的。如果 path 是绝对路径，则 <em>dir_fd</em> 将被忽略。（对于 POSIX 系统，Python 将调用该函数的变体，变体以 <code>at</code> 结尾，可能以 <code>f</code> 开头（如调用 <code>faccessat</code> 而不是 <code>access</code>）。</p>
<p>可以用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.supports_dir_fd" target="_blank" rel="noopener"><code>os.supports_dir_fd</code></a> 检查某个函数在你的平台上是否支持 <em>dir_fd</em>。如果不支持，使用该功能将抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#NotImplementedError" target="_blank" rel="noopener"><code>NotImplementedError</code></a> 异常。</p>
</li>
<li><p><strong>不跟踪符号链接：</strong> 如果 <em>follow_symlinks</em> 为 <code>False</code>，并且待操作路径的最后一个元素是符号链接，则该函数将在符号链接本身而不是链接所指向的文件上操作。（对于 POSIX 系统，Python 将调用该函数的 <code>l...</code> 变体。）</p>
<p>可以用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.supports_follow_symlinks" target="_blank" rel="noopener"><code>os.supports_follow_symlinks</code></a> 检查某个函数在你的平台上是否支持 <em>follow_symlinks</em>。如果不支持，使用该功能将抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#NotImplementedError" target="_blank" rel="noopener"><code>NotImplementedError</code></a> 异常。</p>
</li>
<li><p><code>os.access</code>(<em>path</em>, <em>mode</em>, <em>**, </em>dir_fd=None<em>, </em>effective_ids=False<em>, </em>follow_symlinks=True*)</p>
<p>使用 实际用户ID/用户组ID 测试对 <em>path</em> 的访问。请注意，大多数测试操作将使用 有效用户ID/用户组ID，因此可以在 suid/sgid 环境中运用此例程，来测试调用用户是否具有对 <em>path</em> 的指定访问权限。<em>mode</em> 为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.F_OK" target="_blank" rel="noopener"><code>F_OK</code></a> 时用于测试 <em>path</em> 是否存在，也可以对 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.R_OK" target="_blank" rel="noopener"><code>R_OK</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.W_OK" target="_blank" rel="noopener"><code>W_OK</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.X_OK" target="_blank" rel="noopener"><code>X_OK</code></a> 中的一个或多个进行“或”运算来测试指定权限。允许访问则返回 <a href="https://docs.python.org/zh-cn/3.8/library/constants.html#True" target="_blank" rel="noopener"><code>True</code></a>，否则返回 <a href="https://docs.python.org/zh-cn/3.8/library/constants.html#False" target="_blank" rel="noopener"><code>False</code></a>。更多信息请参见 Unix 手册页 <em><a href="https://manpages.debian.org/access(2" target="_blank" rel="noopener">access(2)</a>)</em>。本函数支持指定 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#dir-fd" target="_blank" rel="noopener">基于目录描述符的相对路径</a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#follow-symlinks" target="_blank" rel="noopener">不跟踪符号链接</a>。如果 <em>effective_ids</em> 为 <code>True</code>，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.access" target="_blank" rel="noopener"><code>access()</code></a> 将使用 有效用户ID/用户组ID 而非 实际用户ID/用户组ID 进行访问检查。您的平台可能不支持 <em>effective_ids</em>，您可以使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.supports_effective_ids" target="_blank" rel="noopener"><code>os.supports_effective_ids</code></a> 检查它是否可用。如果不可用，使用它时会抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#NotImplementedError" target="_blank" rel="noopener"><code>NotImplementedError</code></a> 异常。</p>
<blockquote>
<p>注解：使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.access" target="_blank" rel="noopener"><code>access()</code></a> 来检查用户是否具有某项权限（如打开文件的权限），然后再使用 <a href="https://docs.python.org/zh-cn/3.8/library/functions.html#open" target="_blank" rel="noopener"><code>open()</code></a> 打开文件，这样做存在一个安全漏洞，因为用户可能会在检查和打开文件之间的时间里做其他操作。推荐使用 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-eafp" target="_blank" rel="noopener">EAFP</a> 技术。如:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">if</span> os.access(<span class="string">"myfile"</span>, os.R_OK):</span><br><span class="line">&gt;     <span class="keyword">with</span> open(<span class="string">"myfile"</span>) <span class="keyword">as</span> fp:</span><br><span class="line">&gt;         <span class="keyword">return</span> fp.read()</span><br><span class="line">&gt; <span class="keyword">return</span> <span class="string">"some default data"</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<p>​      最好写成: </p>
<blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">try</span>:</span><br><span class="line">&gt;     fp = open(<span class="string">"myfile"</span>)</span><br><span class="line">&gt; <span class="keyword">except</span> PermissionError:</span><br><span class="line">&gt;     <span class="keyword">return</span> <span class="string">"some default data"</span></span><br><span class="line">&gt; <span class="keyword">else</span>:</span><br><span class="line">&gt;     <span class="keyword">with</span> fp:</span><br><span class="line">&gt;         <span class="keyword">return</span> fp.read()</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>即使 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.access" target="_blank" rel="noopener"><code>access()</code></a> 指示 I/O 操作会成功，但实际操作仍可能失败，尤其是对网络文件系统的操作，其权限语义可能超出常规的 POSIX 权限位模型。</p>
</blockquote>
<ul>
<li><p><code>os.F_OK</code></p>
</li>
<li><p><code>os.R_OK</code></p>
</li>
<li><p><code>os.W_OK</code></p>
</li>
<li><p><code>os.X_OK</code></p>
<p>作为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.access" target="_blank" rel="noopener"><code>access()</code></a> 的 <em>mode</em> 参数的可选值，分别测试 <em>path</em> 的存在性、可读性、可写性和可执行性。</p>
</li>
<li><p><code>os.chdir</code>(<em>path</em>)</p>
<p>将当前工作目录更改为 <em>path</em>。本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#path-fd" target="_blank" rel="noopener">指定文件描述符为参数</a>。其中，描述符必须指向打开的目录，不能是打开的文件。本函数可以抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 及其子类的异常，如 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#FileNotFoundError" target="_blank" rel="noopener"><code>FileNotFoundError</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#PermissionError" target="_blank" rel="noopener"><code>PermissionError</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#NotADirectoryError" target="_blank" rel="noopener"><code>NotADirectoryError</code></a> 异常。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.chdir</code>，附带参数 <code>path</code>。<em>3.3 新版功能:</em> 在某些平台上新增支持将 <em>path</em> 参数指定为文件描述符。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
<li><p><code>os.chflags</code>(<em>path</em>, <em>flags</em>, <em>**, </em>follow_symlinks=True*)</p>
<p>将 <em>path</em> 的 flags 设置为其他由数字表示的 <em>flags</em>。<em>flags</em> 可以用以下值按位或组合起来（以下值在 <a href="https://docs.python.org/zh-cn/3.8/library/stat.html#module-stat" target="_blank" rel="noopener"><code>stat</code></a> 模块中定义）：<a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.UF_NODUMP" target="_blank" rel="noopener"><code>stat.UF_NODUMP</code></a><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.UF_IMMUTABLE" target="_blank" rel="noopener"><code>stat.UF_IMMUTABLE</code></a><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.UF_APPEND" target="_blank" rel="noopener"><code>stat.UF_APPEND</code></a><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.UF_OPAQUE" target="_blank" rel="noopener"><code>stat.UF_OPAQUE</code></a><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.UF_NOUNLINK" target="_blank" rel="noopener"><code>stat.UF_NOUNLINK</code></a><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.UF_COMPRESSED" target="_blank" rel="noopener"><code>stat.UF_COMPRESSED</code></a><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.UF_HIDDEN" target="_blank" rel="noopener"><code>stat.UF_HIDDEN</code></a><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.SF_ARCHIVED" target="_blank" rel="noopener"><code>stat.SF_ARCHIVED</code></a><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.SF_IMMUTABLE" target="_blank" rel="noopener"><code>stat.SF_IMMUTABLE</code></a><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.SF_APPEND" target="_blank" rel="noopener"><code>stat.SF_APPEND</code></a><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.SF_NOUNLINK" target="_blank" rel="noopener"><code>stat.SF_NOUNLINK</code></a><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.SF_SNAPSHOT" target="_blank" rel="noopener"><code>stat.SF_SNAPSHOT</code></a>本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#follow-symlinks" target="_blank" rel="noopener">不跟踪符号链接</a>。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.chflags</code>，附带参数 <code>path</code>、<code>flags</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能:</em> <em>follow_symlinks</em> 参数。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
<li><p><code>os.chmod</code>(<em>path</em>, <em>mode</em>, <em>**, </em>dir_fd=None<em>, </em>follow_symlinks=True*)</p>
<p>将 <em>path</em> 的 mode 更改为其他由数字表示的 <em>mode</em>。<em>mode</em> 可以用以下值之一，也可以将它们按位或组合起来（以下值在 <a href="https://docs.python.org/zh-cn/3.8/library/stat.html#module-stat" target="_blank" rel="noopener"><code>stat</code></a> 模块中定义）：</p>
<ul>
<li><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_ISUID" target="_blank" rel="noopener"><code>stat.S_ISUID</code></a></li>
<li><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_ISGID" target="_blank" rel="noopener"><code>stat.S_ISGID</code></a></li>
<li><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_ENFMT" target="_blank" rel="noopener"><code>stat.S_ENFMT</code></a></li>
<li><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_ISVTX" target="_blank" rel="noopener"><code>stat.S_ISVTX</code></a></li>
<li><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_IREAD" target="_blank" rel="noopener"><code>stat.S_IREAD</code></a></li>
<li><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_IWRITE" target="_blank" rel="noopener"><code>stat.S_IWRITE</code></a></li>
<li><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_IEXEC" target="_blank" rel="noopener"><code>stat.S_IEXEC</code></a></li>
<li><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_IRWXU" target="_blank" rel="noopener"><code>stat.S_IRWXU</code></a></li>
<li><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_IRUSR" target="_blank" rel="noopener"><code>stat.S_IRUSR</code></a></li>
<li><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_IWUSR" target="_blank" rel="noopener"><code>stat.S_IWUSR</code></a></li>
<li><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_IXUSR" target="_blank" rel="noopener"><code>stat.S_IXUSR</code></a></li>
<li><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_IRWXG" target="_blank" rel="noopener"><code>stat.S_IRWXG</code></a></li>
<li><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_IRGRP" target="_blank" rel="noopener"><code>stat.S_IRGRP</code></a></li>
<li><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_IWGRP" target="_blank" rel="noopener"><code>stat.S_IWGRP</code></a></li>
<li><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_IXGRP" target="_blank" rel="noopener"><code>stat.S_IXGRP</code></a></li>
<li><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_IRWXO" target="_blank" rel="noopener"><code>stat.S_IRWXO</code></a></li>
<li><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_IROTH" target="_blank" rel="noopener"><code>stat.S_IROTH</code></a></li>
<li><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_IWOTH" target="_blank" rel="noopener"><code>stat.S_IWOTH</code></a></li>
<li><p><a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_IXOTH" target="_blank" rel="noopener"><code>stat.S_IXOTH</code></a></p>
<p>本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#path-fd" target="_blank" rel="noopener">指定文件描述符</a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#dir-fd" target="_blank" rel="noopener">指定基于目录描述符的相对路径</a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#follow-symlinks" target="_blank" rel="noopener">不跟踪符号链接</a>。 </p>
</li>
</ul>
<blockquote>
<p> 尽管 Windows 支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.chmod" target="_blank" rel="noopener"><code>chmod()</code></a>，但只能用它设置文件的只读标志（<code>stat.S_IWRITE</code> 和 <code>stat.S_IREAD</code> 常量或对应的整数值）。所有其他标志位都会被忽略。</p>
</blockquote>
</li>
</ul>
<p>引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.chmod</code>，附带参数 <code>path</code>、<code>mode</code>、<code>dir_fd</code>。</p>
<p><em>3.3 新版功能:</em> 添加了指定 <em>path</em> 为文件描述符的支持，以及 <em>dir_fd</em> 和 <em>follow_symlinks</em> 参数。</p>
<p><em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
<ul>
<li><p><code>os.chown</code>(<em>path</em>, <em>uid</em>, <em>gid</em>, <em>**, </em>dir_fd=None<em>, </em>follow_symlinks=True*)</p>
<p>将 <em>path</em> 的用户和组 ID 分别修改为数字形式的 <em>uid</em> 和 <em>gid</em>。若要使其中某个 ID 保持不变，请将其置为 -1。本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#path-fd" target="_blank" rel="noopener">指定文件描述符</a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#dir-fd" target="_blank" rel="noopener">指定基于目录描述符的相对路径</a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#follow-symlinks" target="_blank" rel="noopener">不跟踪符号链接</a>。参见更高阶的函数 <a href="https://docs.python.org/zh-cn/3.8/library/shutil.html#shutil.chown" target="_blank" rel="noopener"><code>shutil.chown()</code></a>，除了数字 ID 之外，它也接受名称。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.chown</code>，附带参数 <code>path</code>、<code>uid</code>、<code>gid</code>、<code>dir_fd</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能:</em> 添加了指定 <em>path</em> 为文件描述符的支持，以及 <em>dir_fd</em> 和 <em>follow_symlinks</em> 参数。<em>在 3.6 版更改:</em> 支持 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
<li><p><code>os.chroot</code>(<em>path</em>)</p>
<p>将当前进程的根目录更改为 <em>path</em>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
<li><p><code>os.fchdir</code>(<em>fd</em>)</p>
<p>将当前工作目录更改为文件描述符 <em>fd</em> 指向的目录。fd 必须指向打开的目录而非文件。从 Python 3.3 开始，它等效于 <code>os.chdir(fd)</code>。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.chdir</code>，附带参数 <code>path</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.getcwd</code>()</p>
<p>返回表示当前工作目录的字符串。</p>
</li>
<li><p><code>os.getcwdb</code>()</p>
<p>返回表示当前工作目录的字节串 (bytestring)。<em>在 3.8 版更改:</em> 在 Windows 上，本函数现在会使用 UTF-8 编码格式而不是 ANSI 代码页：请参看 <a href="https://www.python.org/dev/peps/pep-0529" target="_blank" rel="noopener"><strong>PEP 529</strong></a> 了解具体原因。 该函数在 Windows 上不再被弃用。</p>
</li>
<li><p><code>os.lchflags</code>(<em>path</em>, <em>flags</em>)</p>
<p>将 <em>path</em> 的 flags 设置为其他由数字表示的 <em>flags</em>，与 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.chflags" target="_blank" rel="noopener"><code>chflags()</code></a> 类似，但不跟踪符号链接。从 Python 3.3 开始，它等效于 <code>os.chflags(path, flags, follow_symlinks=False)</code>。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.chflags</code>，附带参数 <code>path</code>、<code>flags</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
<li><p><code>os.lchmod</code>(<em>path</em>, <em>mode</em>)</p>
<p>将 <em>path</em> 的权限状态修改为 <em>mode</em>。如果 path 是符号链接，则影响符号链接本身而非链接目标。可以参考 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.chmod" target="_blank" rel="noopener"><code>chmod()</code></a> 中列出 <em>mode</em> 的可用值。从 Python 3.3 开始，它等效于 <code>os.chmod(path, mode, follow_symlinks=False)</code>。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.chmod</code>，附带参数 <code>path</code>、<code>mode</code>、<code>dir_fd</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
<li><p><code>os.lchown</code>(<em>path</em>, <em>uid</em>, <em>gid</em>)</p>
<p>将 <em>path</em> 的用户和组 ID 分别修改为数字形式的 <em>uid</em> 和 <em>gid</em>，本函数不跟踪符号链接。从 Python 3.3 开始，它等效于 <code>os.chown(path, uid, gid, follow_symlinks=False)</code>。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.chown</code>，附带参数 <code>path</code>、<code>uid</code>、<code>gid</code>、<code>dir_fd</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
<li><p><code>os.link</code>(<em>src</em>, <em>dst</em>, <em>**, </em>src_dir_fd=None<em>, </em>dst_dir_fd=None<em>, </em>follow_symlinks=True*)</p>
<p>创建一个指向 <em>src</em> 的硬链接，名为 <em>dst</em>。本函数支持将 <em>src_dir_fd</em> 和 <em>dst_dir_fd</em> 中的一个或两个指定为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#dir-fd" target="_blank" rel="noopener">基于目录描述符的相对路径</a>，支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#follow-symlinks" target="_blank" rel="noopener">不跟踪符号链接</a>。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.link</code> 附带参数 <code>src</code>、<code>dst</code>、<code>src_dir_fd</code>、<code>dst_dir_fd</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix, Windows。<em>在 3.2 版更改:</em> 添加了对 Windows 的支持。<em>3.3 新版功能:</em> 添加 <em>src_dir_fd</em>、<em>dst_dir_fd</em> 和 <em>follow_symlinks</em> 参数。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a> 作为 <em>src</em> 和 <em>dst</em>。</p>
</li>
<li><p><code>os.listdir</code>(<em>path=’.’</em>)</p>
<p>返回一个列表，该列表包含了 <em>path</em> 中所有文件与目录的名称。该列表按任意顺序排列，并且不包含特殊条目 <code>&#39;.&#39;</code> 和 <code>&#39;..&#39;</code>，即使它们确实在目录中存在。<em>path</em> 可以是 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。如果 <em>path</em> 是（直接传入或通过 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PathLike" target="_blank" rel="noopener"><code>PathLike</code></a> 接口间接传入） <code>bytes</code> 类型，则返回的文件名也将是 <code>bytes</code> 类型，其他情况下是 <code>str</code> 类型。本函数也支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#path-fd" target="_blank" rel="noopener">指定文件描述符为参数</a>，其中描述符必须指向目录。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.listdir</code>，附带参数 <code>path</code>。</p>
<blockquote>
<p>要将 <code>str</code> 类型的文件名编码为 <code>bytes</code>，请使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fsencode" target="_blank" rel="noopener"><code>fsencode()</code></a>。</p>
</blockquote>
<p> <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.scandir" target="_blank" rel="noopener"><code>scandir()</code></a> 函数返回目录内文件名的同时，也返回文件属性信息，它在某些具体情况下能提供更好的性能。</p>
</li>
</ul>
<p><em>在 3.2 版更改:</em> <em>path</em> 变为可选参数。</p>
<p><em>3.3 新版功能:</em> 新增支持将 <em>path</em> 参数指定为打开的文件描述符。</p>
<p><em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
<ul>
<li><code>os.lstat</code>(<em>path</em>, <em>**, </em>dir_fd=None*)</li>
</ul>
<p>在给定路径上执行本函数，其操作相当于 <code>lstat()</code> 系统调用，类似于 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat" target="_blank" rel="noopener"><code>stat()</code></a> 但不跟踪符号链接。返回值是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result" target="_blank" rel="noopener"><code>stat_result</code></a> 对象。</p>
<p>在不支持符号链接的平台上，本函数是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat" target="_blank" rel="noopener"><code>stat()</code></a> 的别名。</p>
<p>从 Python 3.3 起，此功能等价于 <code>os.stat(path, dir_fd=dir_fd, follow_symlinks=False)</code>。</p>
<p>本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#dir-fd" target="_blank" rel="noopener">基于目录描述符的相对路径</a>。</p>
<p><em>在 3.2 版更改:</em> 添加对 Windows 6.0 (Vista) 符号链接的支持。</p>
<p><em>在 3.3 版更改:</em> 添加了 <em>dir_fd</em> 参数。</p>
<p><em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a> 作为 <em>src</em> 和 <em>dst</em>。</p>
<p><em>在 3.8 版更改:</em> 目前在 Windows 上，遇到表示另一个路径的重解析点（即名称代理，包括符号链接和目录结点），本函数将打开它。其他种类的重解析点由 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat" target="_blank" rel="noopener"><code>stat()</code></a> 交由操作系统解析。</p>
<ul>
<li><p><code>os.mkdir</code>(<em>path</em>, <em>mode=0o777</em>, <em>**, </em>dir_fd=None*)</p>
<p>创建一个名为 <em>path</em> 的目录，应用以数字表示的权限模式 <em>mode</em>。如果目录已存在，则抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#FileExistsError" target="_blank" rel="noopener"><code>FileExistsError</code></a> 异常。某些系统会忽略 <em>mode</em>。如果没有忽略它，那么将首先从它中减去当前的 umask 值。如果除最后 9 位（即 <em>mode</em> 八进制的最后 3 位）之外，还设置了其他位，则其他位的含义取决于各个平台。在某些平台上，它们会被忽略，应显式调用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.chmod" target="_blank" rel="noopener"><code>chmod()</code></a> 进行设置。本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#dir-fd" target="_blank" rel="noopener">基于目录描述符的相对路径</a>。如果需要创建临时目录，请参阅 <a href="https://docs.python.org/zh-cn/3.8/library/tempfile.html#module-tempfile" target="_blank" rel="noopener"><code>tempfile</code></a> 模块中的 <a href="https://docs.python.org/zh-cn/3.8/library/tempfile.html#tempfile.mkdtemp" target="_blank" rel="noopener"><code>tempfile.mkdtemp()</code></a> 函数。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.mkdir</code>，附带参数 <code>path</code>、<code>mode</code>、<code>dir_fd</code>。<em>3.3 新版功能:</em> <em>dir_fd</em> 参数。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
<li><p><code>os.makedirs</code>(<em>name</em>, <em>mode=0o777</em>, <em>exist_ok=False</em>)</p>
<p>递归目录创建函数。与 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.mkdir" target="_blank" rel="noopener"><code>mkdir()</code></a> 类似，但会自动创建到达最后一级目录所需要的中间目录。<em>mode</em> 参数会传递给 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.mkdir" target="_blank" rel="noopener"><code>mkdir()</code></a>，用来创建最后一级目录，对于该参数的解释，请参阅 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#mkdir-modebits" target="_blank" rel="noopener">mkdir() 中的描述</a>。要设置某些新建的父目录的权限，可以在调用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.makedirs" target="_blank" rel="noopener"><code>makedirs()</code></a> 之前设置 umask。现有父目录的权限不会更改。如果 <em>exist_ok</em> 为 <code>False</code> (默认值)，则如果目标目录已存在将引发 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#FileExistsError" target="_blank" rel="noopener"><code>FileExistsError</code></a>。</p>
<blockquote>
<p>如果要创建的路径元素包含 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.pardir" target="_blank" rel="noopener"><code>pardir</code></a> (如 UNIX 系统中的 “..”) <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.makedirs" target="_blank" rel="noopener"><code>makedirs()</code></a> 将无法明确目标。</p>
</blockquote>
</li>
</ul>
<p>本函数能正确处理 UNC 路径。</p>
<p>引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.mkdir</code>，附带参数 <code>path</code>、<code>mode</code>、<code>dir_fd</code>。</p>
<p><em>3.2 新版功能:</em> <em>exist_ok</em> 参数。</p>
<p><em>在 3.4.1 版更改:</em> 在 Python 3.4.1 以前，如果 <em>exist_ok</em> 为 <code>True</code>，且目录已存在，且 <em>mode</em> 与现有目录的权限不匹配，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.makedirs" target="_blank" rel="noopener"><code>makedirs()</code></a> 仍会抛出错误。由于无法安全地实现此行为，因此在 Python 3.4.1 中将该行为删除。请参阅 <a href="https://bugs.python.org/issue21082" target="_blank" rel="noopener">bpo-21082</a>。</p>
<p><em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
<p><em>在 3.7 版更改:</em> <em>mode</em> 参数不再影响新创建的中间目录的权限。</p>
<ul>
<li><p><code>os.mkfifo</code>(<em>path</em>, <em>mode=0o666</em>, <em>**, </em>dir_fd=None*)</p>
<p>创建一个名为 <em>path</em> 的 FIFO（命名管道，一种先进先出队列），具有以数字表示的权限状态 <em>mode</em>。将从 mode 中首先减去当前的 umask 值。本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#dir-fd" target="_blank" rel="noopener">基于目录描述符的相对路径</a>。FIFO 是可以像常规文件一样访问的管道。FIFO 如果没有被删除（如使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.unlink" target="_blank" rel="noopener"><code>os.unlink()</code></a>），会一直存在。通常，FIFO 用作“客户端”和“服务器”进程之间的汇合点：服务器打开 FIFO 进行读取，而客户端打开 FIFO 进行写入。请注意，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.mkfifo" target="_blank" rel="noopener"><code>mkfifo()</code></a> 不会打开 FIFO — 它只是创建汇合点。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能:</em> <em>dir_fd</em> 参数。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
<li><p><code>os.mknod</code>(<em>path</em>, <em>mode=0o600</em>, <em>device=0</em>, <em>**, </em>dir_fd=None*)</p>
<p>创建一个名为 <em>path</em> 的文件系统节点（文件，设备专用文件或命名管道）。<em>mode</em> 指定权限和节点类型，方法是将权限与下列节点类型 <code>stat.S_IFREG</code>、<code>stat.S_IFCHR</code>、<code>stat.S_IFBLK</code> 和 <code>stat.S_IFIFO</code> 之一（按位或）组合（这些常量可以在 <a href="https://docs.python.org/zh-cn/3.8/library/stat.html#module-stat" target="_blank" rel="noopener"><code>stat</code></a> 模块中找到）。对于 <code>stat.S_IFCHR</code> 和 <code>stat.S_IFBLK</code>，<em>device</em> 参数指定了新创建的设备专用文件（可能会用到 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.makedev" target="_blank" rel="noopener"><code>os.makedev()</code></a>），否则该参数将被忽略。本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#dir-fd" target="_blank" rel="noopener">基于目录描述符的相对路径</a>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能:</em> <em>dir_fd</em> 参数。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
<li><p><code>os.major</code>(<em>device</em>)</p>
<p>提取主设备号，提取自原始设备号（通常是 <code>stat</code> 中的 <code>st_dev</code> 或 <code>st_rdev</code> 字段）。</p>
</li>
<li><p><code>os.minor</code>(<em>device</em>)</p>
<p>提取次设备号，提取自原始设备号（通常是 <code>stat</code> 中的 <code>st_dev</code> 或 <code>st_rdev</code> 字段）。</p>
</li>
<li><p><code>os.makedev</code>(<em>major</em>, <em>minor</em>)</p>
<p>将主设备号和次设备号组合成原始设备号。</p>
</li>
<li><p><code>os.pathconf</code>(<em>path</em>, <em>name</em>)</p>
<p>返回所给名称的文件有关的系统配置信息。<em>name</em> 指定要查找的配置名称，它可以是字符串，是一个系统已定义的名称，这些名称定义在不同标准（POSIX.1，Unix 95，Unix 98 等）中。一些平台还定义了额外的其他名称。当前操作系统已定义的名称在 <code>pathconf_names</code> 字典中给出。对于未包含在该映射中的配置名称，也可以传递一个整数作为 <em>name</em>。如果 <em>name</em> 是一个字符串且不是已定义的名称，将抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#ValueError" target="_blank" rel="noopener"><code>ValueError</code></a> 异常。如果当前系统不支持 <em>name</em> 指定的配置名称，即使该名称存在于 <code>pathconf_names</code>，也会抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 异常，错误码为 <a href="https://docs.python.org/zh-cn/3.8/library/errno.html#errno.EINVAL" target="_blank" rel="noopener"><code>errno.EINVAL</code></a>。本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#path-fd" target="_blank" rel="noopener">指定文件描述符为参数</a>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
<li><p><code>os.pathconf_names</code></p>
<p>字典，表示映射关系，为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.pathconf" target="_blank" rel="noopener"><code>pathconf()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fpathconf" target="_blank" rel="noopener"><code>fpathconf()</code></a> 可接受名称与操作系统为这些名称定义的整数值之间的映射。这可用于判断系统已定义了哪些名称。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.readlink</code>(<em>path</em>, <em>**, </em>dir_fd=None*)</p>
<p>返回一个字符串，为符号链接指向的实际路径。其结果可以是绝对或相对路径。如果是相对路径，则可用 <code>os.path.join(os.path.dirname(path), result)</code> 转换为绝对路径。如果 <em>path</em> 是字符串对象（直接传入或通过 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PathLike" target="_blank" rel="noopener"><code>PathLike</code></a> 接口间接传入），则结果也将是字符串对象，且此类调用可能会引发 UnicodeDecodeError。如果 <em>path</em> 是字节对象（直接传入或间接传入），则结果将会是字节对象。本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#dir-fd" target="_blank" rel="noopener">基于目录描述符的相对路径</a>。当尝试解析的路径可能含有链接时，请改用 <a href="https://docs.python.org/zh-cn/3.8/library/os.path.html#os.path.realpath" target="_blank" rel="noopener"><code>realpath()</code></a> 以正确处理递归和平台差异。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix, Windows。<em>在 3.2 版更改:</em> 添加对 Windows 6.0 (Vista) 符号链接的支持。<em>3.3 新版功能:</em> <em>dir_fd</em> 参数。<em>在 3.6 版更改:</em> 在 Unix 上可以接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。<em>在 3.8 版更改:</em> 在 Windows 上接受 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a> 和字节对象。<em>在 3.8 版更改:</em> 增加了对目录链接的支持，且返回值改为了“替换路径”的形式（通常带有 <code>\\?\</code> 前缀），而不是先前那样返回可选的 “print name” 字段。</p>
</li>
<li><p><code>os.remove</code>(<em>path</em>, <em>**, </em>dir_fd=None*)</p>
<p>移除（删除）文件 <em>path</em>。如果 <em>path</em> 是目录，则抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#IsADirectoryError" target="_blank" rel="noopener"><code>IsADirectoryError</code></a> 异常。请使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.rmdir" target="_blank" rel="noopener"><code>rmdir()</code></a> 删除目录。本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#dir-fd" target="_blank" rel="noopener">基于目录描述符的相对路径</a>。在 Windows 上，尝试删除正在使用的文件会抛出异常。而在 Unix 上，虽然该文件的条目会被删除，但分配给文件的存储空间仍然不可用，直到原始文件不再使用为止。本函数在语义上与 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.unlink" target="_blank" rel="noopener"><code>unlink()</code></a> 相同。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.remove</code>，附带参数 <code>path</code>、<code>dir_fd</code>。<em>3.3 新版功能:</em> <em>dir_fd</em> 参数。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
<li><p><code>os.removedirs</code>(<em>name</em>)</p>
<p>递归删除目录。工作方式类似于 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.rmdir" target="_blank" rel="noopener"><code>rmdir()</code></a>，不同之处在于，如果成功删除了末尾一级目录，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.removedirs" target="_blank" rel="noopener"><code>removedirs()</code></a> 会尝试依次删除 <em>path</em> 中提到的每个父目录，直到抛出错误为止（但该错误会被忽略，因为这通常表示父目录不是空目录）。例如，<code>os.removedirs(&#39;foo/bar/baz&#39;)</code> 将首先删除目录 <code>&#39;foo/bar/baz&#39;</code>，然后如果 <code>&#39;foo/bar&#39;</code> 和 <code>&#39;foo&#39;</code> 为空，则继续删除它们。如果无法成功删除末尾一级目录，则抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 异常。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.remove</code>，附带参数 <code>path</code>、<code>dir_fd</code>。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
<li><p><code>os.rename</code>(<em>src</em>, <em>dst</em>, <em>**, </em>src_dir_fd=None<em>, </em>dst_dir_fd=None*)</p>
<p>将文件或目录 <em>src</em> 重命名为 <em>dst</em>。如果 <em>dst</em> 已存在，则下列情况下将会操作失败，并抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 的子类：在 Windows 上，如果 <em>dst</em> 已存在，则抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#FileExistsError" target="_blank" rel="noopener"><code>FileExistsError</code></a> 异常。在 Unix 上，如果 <em>src</em> 是文件而 <em>dst</em> 是目录，将抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#IsADirectoryError" target="_blank" rel="noopener"><code>IsADirectoryError</code></a> 异常，反之则抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#NotADirectoryError" target="_blank" rel="noopener"><code>NotADirectoryError</code></a> 异常。如果两者都是目录且 <em>dst</em> 为空，则 <em>dst</em> 将被静默替换。如果 <em>dst</em> 是非空目录，则抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 异常。如果两者都是文件，则在用户具有权限的情况下，将对 <em>dst</em> 进行静默替换。如果 <em>src</em> 和 <em>dst</em> 在不同的文件系统上，则本操作在某些 Unix 分支上可能会失败。如果成功，重命名操作将是一个原子操作（这是 POSIX 的要求）。本函数支持将 <em>src_dir_fd</em> 和 <em>dst_dir_fd</em> 中的一个或两个指定为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#dir-fd" target="_blank" rel="noopener">基于目录描述符的相对路径</a>。如果需要在不同平台上都能替换目标，请使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.replace" target="_blank" rel="noopener"><code>replace()</code></a>。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.rename</code> 附带参数 <code>src</code>、<code>dst</code>、<code>src_dir_fd</code>、<code>dst_dir_fd</code>。<em>3.3 新版功能:</em> <em>src_dir_fd</em> 和 <em>dst_dir_fd</em> 参数。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a> 作为 <em>src</em> 和 <em>dst</em>。</p>
</li>
<li><p><code>os.renames</code>(<em>old</em>, <em>new</em>)</p>
<p>递归重命名目录或文件。工作方式类似 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.rename" target="_blank" rel="noopener"><code>rename()</code></a>，除了会首先创建新路径所需的中间目录。重命名后，将调用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.removedirs" target="_blank" rel="noopener"><code>removedirs()</code></a> 删除旧路径中不需要的目录。注解 如果用户没有权限删除末级的目录或文件，则本函数可能会无法建立新的目录结构。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.rename</code> 附带参数 <code>src</code>、<code>dst</code>、<code>src_dir_fd</code>、<code>dst_dir_fd</code>。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a> 作为 <em>old</em> 和 <em>new</em>。</p>
</li>
<li><p><code>os.replace</code>(<em>src</em>, <em>dst</em>, <em>**, </em>src_dir_fd=None<em>, </em>dst_dir_fd=None*)</p>
<p>将文件或目录 <em>src</em> 重命名为 <em>dst</em>。如果 <em>dst</em> 是目录，将抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 异常。如果 <em>dst</em> 已存在且为文件，则在用户具有权限的情况下，将对其进行静默替换。如果 <em>src</em> 和 <em>dst</em> 在不同的文件系统上，本操作可能会失败。如果成功，重命名操作将是一个原子操作（这是 POSIX 的要求）。本函数支持将 <em>src_dir_fd</em> 和 <em>dst_dir_fd</em> 中的一个或两个指定为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#dir-fd" target="_blank" rel="noopener">基于目录描述符的相对路径</a>。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.rename</code> 附带参数 <code>src</code>、<code>dst</code>、<code>src_dir_fd</code>、<code>dst_dir_fd</code>。<em>3.3 新版功能.**在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a> 作为 <em>src</em> 和 <em>dst</em>。</p>
</li>
<li><p><code>os.rmdir</code>(<em>path</em>, <em>**, </em>dir_fd=None*)</p>
<p>移除（删除）目录 <em>path</em>。如果目录不存在或不为空，则会分别抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#FileNotFoundError" target="_blank" rel="noopener"><code>FileNotFoundError</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 异常。要删除整个目录树，可以使用 <a href="https://docs.python.org/zh-cn/3.8/library/shutil.html#shutil.rmtree" target="_blank" rel="noopener"><code>shutil.rmtree()</code></a>。本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#dir-fd" target="_blank" rel="noopener">基于目录描述符的相对路径</a>。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.rmdir</code>，附带参数 <code>path</code>、<code>dir_fd</code>。<em>3.3 新版功能:</em> <em>dir_fd</em> 参数。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
<li><p><code>os.scandir</code>(<em>path=’.’</em>)</p>
<p>返回一个迭代出 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.DirEntry" target="_blank" rel="noopener"><code>os.DirEntry</code></a> 对象的迭代器，这些对象对应于 <em>path</em> 目录中的条目。条目的生成顺序是任意的，特殊条目 <code>&#39;.&#39;</code> 和 <code>&#39;..&#39;</code> 不包括在内。如果需要文件类型或文件属性信息，使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.scandir" target="_blank" rel="noopener"><code>scandir()</code></a> 代替 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.listdir" target="_blank" rel="noopener"><code>listdir()</code></a> 可以大大提高这部分代码的性能，因为如果操作系统在扫描目录时返回的是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.DirEntry" target="_blank" rel="noopener"><code>os.DirEntry</code></a> 对象，则该对象包含了这些信息。所有 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.DirEntry" target="_blank" rel="noopener"><code>os.DirEntry</code></a> 的方法都可能执行一次系统调用，但是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.DirEntry.is_dir" target="_blank" rel="noopener"><code>is_dir()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.DirEntry.is_file" target="_blank" rel="noopener"><code>is_file()</code></a> 通常只在有符号链接时才执行一次系统调用。<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.DirEntry.stat" target="_blank" rel="noopener"><code>os.DirEntry.stat()</code></a> 在 Unix 上始终需要一次系统调用，而在 Windows 上只在有符号链接时才需要。<em>path</em> 可以是 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。如果 <em>path</em> 是（直接传入或通过 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PathLike" target="_blank" rel="noopener"><code>PathLike</code></a> 接口间接传入的） <code>bytes</code> 类型，那么每个 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.DirEntry" target="_blank" rel="noopener"><code>os.DirEntry</code></a> 的 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.DirEntry.name" target="_blank" rel="noopener"><code>name</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.DirEntry.path" target="_blank" rel="noopener"><code>path</code></a> 属性将是 <code>bytes</code> 类型，其他情况下是 <code>str</code> 类型。本函数也支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#path-fd" target="_blank" rel="noopener">指定文件描述符为参数</a>，其中描述符必须指向目录。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.scandir</code>，附带参数 <code>path</code>。<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.scandir" target="_blank" rel="noopener"><code>scandir()</code></a> 迭代器支持 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-context-manager" target="_blank" rel="noopener">上下文管理</a> 协议，并具有以下方法：<code>scandir.close</code>()关闭迭代器并释放占用的资源。当迭代器迭代完毕，或垃圾回收，或迭代过程出错时，将自动调用本方法。但仍建议显式调用它或使用 <a href="https://docs.python.org/zh-cn/3.8/reference/compound_stmts.html#with" target="_blank" rel="noopener"><code>with</code></a> 语句。</p>
<p><em>3.6 新版功能.</em></p>
<p>下面的例子演示了 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.scandir" target="_blank" rel="noopener"><code>scandir()</code></a> 的简单用法，用来显示给定 <em>path</em> 中所有不以 <code>&#39;.&#39;</code> 开头的文件（不包括目录）。<code>entry.is_file()</code> 通常不会增加一次额外的系统调用:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> os.scandir(path) <span class="keyword">as</span> it:</span><br><span class="line">    <span class="keyword">for</span> entry <span class="keyword">in</span> it:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> entry.name.startswith(<span class="string">'.'</span>) <span class="keyword">and</span> entry.is_file():</span><br><span class="line">            print(entry.name)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在基于 Unix 的系统上，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.scandir" target="_blank" rel="noopener"><code>scandir()</code></a> 使用系统的 <a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/opendir.html" target="_blank" rel="noopener">opendir()</a> 和 <a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/readdir_r.html" target="_blank" rel="noopener">readdir()</a> 函数。在 Windows 上，它使用 Win32 <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa364418(v=vs.85" target="_blank" rel="noopener">FindFirstFileW</a>.aspx) 和 <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa364428(v=vs.85" target="_blank" rel="noopener">FindNextFileW</a>.aspx) 函数。</p>
</blockquote>
<p><em>.5 新版功能.</em></p>
<p><em>3.6 新版功能:</em> 添加了对 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-context-manager" target="_blank" rel="noopener">上下文管理</a> 协议和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.scandir.close" target="_blank" rel="noopener"><code>close()</code></a> 方法的支持。如果 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.scandir" target="_blank" rel="noopener"><code>scandir()</code></a> 迭代器没有迭代完毕且没有显式关闭，其析构函数将发出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#ResourceWarning" target="_blank" rel="noopener"><code>ResourceWarning</code></a> 警告。</p>
<p>本函数接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
<p><em>在 3.7 版更改:</em> 在 Unix 上新增支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#path-fd" target="_blank" rel="noopener">指定文件描述符为参数</a>。</p>
</li>
<li><p><em>class</em> <code>os.DirEntry</code></p>
<p>由 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.scandir" target="_blank" rel="noopener"><code>scandir()</code></a> 生成的对象，用于显示目录内某个条目的文件路径和其他文件属性。</p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.scandir" target="_blank" rel="noopener"><code>scandir()</code></a> 将在不进行额外系统调用的情况下，提供尽可能多的此类信息。每次进行 <code>stat()</code> 或 <code>lstat()</code> 系统调用时，<code>os.DirEntry</code> 对象会将结果缓存下来。</p>
<p><code>os.DirEntry</code> 实例不适合存储在长期存在的数据结构中，如果你知道文件元数据已更改，或者自调用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.scandir" target="_blank" rel="noopener"><code>scandir()</code></a> 以来已经经过了很长时间，请调用 <code>os.stat(entry.path)</code> 来获取最新信息。</p>
<p>因为 <code>os.DirEntry</code> 方法可以进行系统调用，所以它也可能抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 异常。如需精确定位错误，可以逐个调用 <code>os.DirEntry</code> 中的方法来捕获 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a>，并适当处理。</p>
<p>为了能直接用作 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>，<code>os.DirEntry</code> 实现了 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PathLike" target="_blank" rel="noopener"><code>PathLike</code></a> 接口。</p>
<p><code>os.DirEntry</code> 实例所包含的属性和方法如下：</p>
<ul>
<li><p><code>name</code></p>
<p>本条目的基本文件名，是根据 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.scandir" target="_blank" rel="noopener"><code>scandir()</code></a> 的 <em>path</em> 参数得出的相对路径。如果 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.scandir" target="_blank" rel="noopener"><code>scandir()</code></a> 的 <em>path</em> 参数是 <code>bytes</code> 类型，则 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.name" target="_blank" rel="noopener"><code>name</code></a> 属性也是 <code>bytes</code> 类型，否则为 <code>str</code>。使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fsdecode" target="_blank" rel="noopener"><code>fsdecode()</code></a> 解码 byte 类型的文件名。</p>
</li>
<li><p><code>path</code></p>
<p>本条目的完整路径：等效于 <code>os.path.join(scandir_path, entry.name)</code>，其中 <em>scandir_path</em> 就是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.scandir" target="_blank" rel="noopener"><code>scandir()</code></a> 的 <em>path</em> 参数。仅当 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.scandir" target="_blank" rel="noopener"><code>scandir()</code></a> 的 <em>path</em> 参数为绝对路径时，本路径才是绝对路径。如果 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.scandir" target="_blank" rel="noopener"><code>scandir()</code></a> 的 <em>path</em> 参数是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#path-fd" target="_blank" rel="noopener">文件描述符</a>，则 <a href="https://docs.python.org/zh-cn/3.8/library/os.path.html#module-os.path" target="_blank" rel="noopener"><code>path</code></a> 属性与上述 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.name" target="_blank" rel="noopener"><code>name</code></a> 属性相同。如果 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.scandir" target="_blank" rel="noopener"><code>scandir()</code></a> 的 <em>path</em> 参数是 <code>bytes</code> 类型，则 <a href="https://docs.python.org/zh-cn/3.8/library/os.path.html#module-os.path" target="_blank" rel="noopener"><code>path</code></a> 属性也是 <code>bytes</code> 类型，否则为 <code>str</code>。使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fsdecode" target="_blank" rel="noopener"><code>fsdecode()</code></a> 解码 byte 类型的文件名。</p>
</li>
<li><p><code>inode</code>()</p>
<p>返回本条目的索引节点号 (inode number)。这一结果是缓存在 <code>os.DirEntry</code> 对象中的，请调用 <code>os.stat(entry.path, follow_symlinks=False).st_ino</code> 来获取最新信息。一开始没有缓存时，在 Windows 上需要一次系统调用，但在 Unix 上不需要。</p>
</li>
<li><p><code>is_dir</code>(<em>**, </em>follow_symlinks=True*)</p>
<p>如果本条目是目录，或是指向目录的符号链接，则返回 <code>True</code>。如果本条目是文件，或指向任何其他类型的文件，或该目录不再存在，则返回 <code>False</code>。如果 <em>follow_symlinks</em> 是 <code>False</code>，那么仅当本条目为目录时返回 <code>True</code> （不跟踪符号链接），如果本条目是任何类型的文件，或该文件不再存在，则返回 <code>False</code>。这一结果是缓存在 <code>os.DirEntry</code> 对象中的，且 <em>follow_symlinks</em> 为 <code>True</code> 和 <code>False</code> 时的缓存是分开的。请调用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat" target="_blank" rel="noopener"><code>os.stat()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/stat.html#stat.S_ISDIR" target="_blank" rel="noopener"><code>stat.S_ISDIR()</code></a> 来获取最新信息。一开始没有缓存时，大多数情况下不需要系统调用。特别是对于非符号链接，Windows 和 Unix 都不需要系统调用，除非某些 Unix 文件系统（如网络文件系统）返回了 <code>dirent.d_type == DT_UNKNOWN</code>。如果本条目是符号链接，则需要一次系统调用来跟踪它（除非 <em>follow_symlinks</em> 为 <code>False</code>）。本方法可能抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 异常，如 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#PermissionError" target="_blank" rel="noopener"><code>PermissionError</code></a> 异常，但 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#FileNotFoundError" target="_blank" rel="noopener"><code>FileNotFoundError</code></a> 异常会被内部捕获且不会抛出。</p>
</li>
<li><p><code>is_file</code>(<em>**, </em>follow_symlinks=True*)</p>
<p>如果本条目是文件，或是指向文件的符号链接，则返回 <code>True</code>。如果本条目是目录，或指向目录，或指向其他非文件条目，或该文件不再存在，则返回 <code>False</code>。如果 <em>follow_symlinks</em> 是 <code>False</code>，那么仅当本条目为文件时返回 <code>True</code> （不跟踪符号链接），如果本条目是目录或其他非文件条目，或该文件不再存在，则返回 <code>False</code>。这一结果是缓存在 <code>os.DirEntry</code> 对象中的。缓存、系统调用、异常抛出都与 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.DirEntry.is_dir" target="_blank" rel="noopener"><code>is_dir()</code></a> 一致。</p>
</li>
<li><p><code>is_symlink</code>()</p>
<p>如果本条目是符号链接（即使是断开的链接），返回 <code>True</code>。如果是目录或任何类型的文件，或本条目不再存在，返回 <code>False</code>。这一结果是缓存在 <code>os.DirEntry</code> 对象中的，请调用 <a href="https://docs.python.org/zh-cn/3.8/library/os.path.html#os.path.islink" target="_blank" rel="noopener"><code>os.path.islink()</code></a> 来获取最新信息。一开始没有缓存时，大多数情况下不需要系统调用。其实 Windows 和 Unix 都不需要系统调用，除非某些 Unix 文件系统（如网络文件系统）返回了 <code>dirent.d_type == DT_UNKNOWN</code>。本方法可能抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 异常，如 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#PermissionError" target="_blank" rel="noopener"><code>PermissionError</code></a> 异常，但 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#FileNotFoundError" target="_blank" rel="noopener"><code>FileNotFoundError</code></a> 异常会被内部捕获且不会抛出。</p>
</li>
<li><p><code>stat</code>(<em>**, </em>follow_symlinks=True*)</p>
<p>返回本条目对应的 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result" target="_blank" rel="noopener"><code>stat_result</code></a> 对象。本方法默认会跟踪符号链接，要获取符号链接本身的 stat，请添加 <code>follow_symlinks=False</code> 参数。在 Unix 上，本方法需要一次系统调用。在 Windows 上，仅在 <em>follow_symlinks</em> 为 <code>True</code> 且该条目是一个重解析点（如符号链接或目录结点）时，才需要一次系统调用。在 Windows 上，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result" target="_blank" rel="noopener"><code>stat_result</code></a> 的 <code>st_ino</code>、<code>st_dev</code> 和 <code>st_nlink</code> 属性总是为零。请调用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat" target="_blank" rel="noopener"><code>os.stat()</code></a> 以获得这些属性。这一结果是缓存在 <code>os.DirEntry</code> 对象中的，且 <em>follow_symlinks</em> 为 <code>True</code> 和 <code>False</code> 时的缓存是分开的。请调用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat" target="_blank" rel="noopener"><code>os.stat()</code></a> 来获取最新信息。</p>
</li>
</ul>
<p>注意，<code>os.DirEntry</code> 和 <a href="https://docs.python.org/zh-cn/3.8/library/pathlib.html#pathlib.Path" target="_blank" rel="noopener"><code>pathlib.Path</code></a> 的几个属性和方法之间存在很好的对应关系。具体来说是 <code>name</code> 属性，以及 <code>is_dir()</code>、<code>is_file()</code>、<code>is_symlink()</code> 和 <code>stat()</code> 方法，在两个类中具有相同的含义。</p>
<p><em>3.5 新版功能.</em></p>
<p><em>在 3.6 版更改:</em> 添加了对 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PathLike" target="_blank" rel="noopener"><code>PathLike</code></a> 接口的支持。在 Windows 上添加了对 <a href="https://docs.python.org/zh-cn/3.8/library/stdtypes.html#bytes" target="_blank" rel="noopener"><code>bytes</code></a> 类型路径的支持。</p>
</li>
<li><p><code>os.stat</code>(<em>path</em>, <em>**, </em>dir_fd=None<em>, </em>follow_symlinks=True*)</p>
<p>获取文件或文件描述符的状态。在所给路径上执行等效于 <code>stat()</code> 系统调用的操作。<em>path</em> 可以是字符串类型，或（直接传入或通过 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PathLike" target="_blank" rel="noopener"><code>PathLike</code></a> 接口间接传入的） bytes 类型，或打开的文件描述符。返回一个 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result" target="_blank" rel="noopener"><code>stat_result</code></a> 对象。</p>
<p>本函数默认会跟踪符号链接，要获取符号链接本身的 stat，请添加 <code>follow_symlinks=False</code> 参数，或使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.lstat" target="_blank" rel="noopener"><code>lstat()</code></a>。</p>
<p>本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#path-fd" target="_blank" rel="noopener">指定文件描述符为参数</a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#follow-symlinks" target="_blank" rel="noopener">不跟踪符号链接</a>。</p>
<p>在 Windows 上，传入 <code>follow_symlinks=False</code> 将禁用所有名称代理重解析点，其中包括符号链接和目录结点。其他类型的重解析点将直接打开，比如不像链接的或系统无法跟踪的重解析点。当多个链接形成一个链时，本方法可能会返回原始链接的 stat，无法完整遍历到非链接的对象。在这种情况下，要获取最终路径的 stat，请使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.path.html#os.path.realpath" target="_blank" rel="noopener"><code>os.path.realpath()</code></a> 函数尽可能地解析路径，并在解析结果上调用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.lstat" target="_blank" rel="noopener"><code>lstat()</code></a>。这不适用于空链接或交接点，否则会抛出异常。</p>
<p>示例:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>statinfo = os.stat(<span class="string">'somefile.txt'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>statinfo</span><br><span class="line">os.stat_result(st_mode=<span class="number">33188</span>, st_ino=<span class="number">7876932</span>, st_dev=<span class="number">234881026</span>,</span><br><span class="line">st_nlink=<span class="number">1</span>, st_uid=<span class="number">501</span>, st_gid=<span class="number">501</span>, st_size=<span class="number">264</span>, st_atime=<span class="number">1297230295</span>,</span><br><span class="line">st_mtime=<span class="number">1297230027</span>, st_ctime=<span class="number">1297230027</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>statinfo.st_size</span><br><span class="line"><span class="number">264</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p><a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fstat" target="_blank" rel="noopener"><code>fstat()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.lstat" target="_blank" rel="noopener"><code>lstat()</code></a> 函数。</p>
</blockquote>
<p><em>3.3 新版功能:</em> 增加 <em>dir_fd</em> 和 <em>follow_symlinks</em> 参数，可指定文件描述符代替路径。</p>
<p><em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
<p><em>在 3.8 版更改:</em> 在 Windows 上，本方法将跟踪系统能解析的所有重解析点，并且传入 <code>follow_symlinks=False</code> 会停止跟踪所有名称代理重解析点。现在，如果操作系统遇到无法跟踪的重解析点，<em>stat</em> 将返回原始路径的信息，就像已指定 <code>follow_symlinks=False</code> 一样，而不会抛出异常。</p>
<p><em>class</em> <code>os.stat_result</code></p>
<p>本对象的属性大致对应于 <code>stat</code> 结构体成员，主要作为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat" target="_blank" rel="noopener"><code>os.stat()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fstat" target="_blank" rel="noopener"><code>os.fstat()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.lstat" target="_blank" rel="noopener"><code>os.lstat()</code></a> 的返回值。</p>
<p>属性：</p>
<ul>
<li><p><code>st_mode</code></p>
<p>文件模式：包括文件类型和文件模式位（即权限位）。</p>
</li>
<li><p><code>st_ino</code></p>
<p>与平台有关，但如果不为零，则根据 <code>st_dev</code> 值唯一地标识文件。通常：在 Unix 上该值表示索引节点号 (inode number)。在 Windows 上该值表示 <a href="https://msdn.microsoft.com/en-us/library/aa363788" target="_blank" rel="noopener">文件索引号</a> 。</p>
</li>
<li><p><code>st_dev</code></p>
<p>该文件所在设备的标识符。</p>
</li>
<li><p><code>st_nlink</code></p>
<p>硬链接的数量。</p>
</li>
<li><p><code>st_uid</code></p>
<p>文件所有者的用户 ID。</p>
</li>
<li><p><code>st_gid</code></p>
<p>文件所有者的用户组 ID。</p>
</li>
<li><p><code>st_size</code></p>
<p>文件大小（以字节为单位），文件可以是常规文件或符号链接。符号链接的大小是它包含的路径的长度，不包括末尾的空字节。</p>
</li>
</ul>
<p>时间戳：</p>
<ul>
<li><p><code>st_atime</code></p>
<p>最近的访问时间，以秒为单位。</p>
</li>
<li><p><code>st_mtime</code></p>
<p>最近的修改时间，以秒为单位。</p>
</li>
<li><p><code>st_ctime</code></p>
<p>取决于平台：在 Unix 上表示最近的元数据更改时间，在 Windows 上表示创建时间，以秒为单位。</p>
</li>
<li><p><code>st_atime_ns</code></p>
<p>最近的访问时间，以纳秒表示，为整数。</p>
</li>
<li><p><code>st_mtime_ns</code></p>
<p>最近的修改时间，以纳秒表示，为整数。</p>
</li>
<li><p><code>st_ctime_ns</code></p>
<p>取决于平台：在 Unix 上表示最近的元数据更改时间，在 Windows 上表示创建时间，以纳秒表示，为整数。</p>
</li>
</ul>
<blockquote>
<p> <code>st_atime</code>](<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_atime)、[`st_mtime`](https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_mtime)" target="_blank" rel="noopener">https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_atime)、[`st_mtime`](https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_mtime)</a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_ctime" target="_blank" rel="noopener"><code>st_ctime</code></a> 属性的确切含义和分辨率取决于操作系统和文件系统。例如，在使用 FAT 或 FAT32 文件系统的 Windows 上，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_mtime" target="_blank" rel="noopener"><code>st_mtime</code></a> 有 2 秒的分辨率，而 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_atime" target="_blank" rel="noopener"><code>st_atime</code></a> 仅有 1 天的分辨率。详细信息请参阅操作系统文档。</p>
<p>类似地，尽管 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_atime_ns" target="_blank" rel="noopener"><code>st_atime_ns</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_mtime_ns" target="_blank" rel="noopener"><code>st_mtime_ns</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_ctime_ns" target="_blank" rel="noopener"><code>st_ctime_ns</code></a> 始终以纳秒表示，但许多系统并不提供纳秒精度。在确实提供纳秒精度的系统上，用于存储 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_atime" target="_blank" rel="noopener"><code>st_atime</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_mtime" target="_blank" rel="noopener"><code>st_mtime</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_ctime" target="_blank" rel="noopener"><code>st_ctime</code></a> 的浮点对象无法保留所有精度，因此不够精确。如果需要确切的时间戳，则应始终使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_atime_ns" target="_blank" rel="noopener"><code>st_atime_ns</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_mtime_ns" target="_blank" rel="noopener"><code>st_mtime_ns</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_ctime_ns" target="_blank" rel="noopener"><code>st_ctime_ns</code></a>。</p>
</blockquote>
<p>在某些 Unix 系统上（如 Linux 上），以下属性可能也可用：</p>
<ul>
<li><p><code>st_blocks</code></p>
<p>为文件分配的字节块数，每块 512 字节。文件是稀疏文件时，它可能小于 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_size" target="_blank" rel="noopener"><code>st_size</code></a>/512。</p>
</li>
<li><p><code>st_blksize</code></p>
<p>“首选的” 块大小，用于提高文件系统 I/O 效率。写入文件时块大小太小可能会导致读取-修改-重写效率低下。</p>
</li>
<li><p><code>st_rdev</code></p>
<p>设备类型（如果是 inode 设备）。</p>
</li>
<li><p><code>st_flags</code></p>
<p>用户定义的文件标志位。</p>
</li>
</ul>
<p>在其他 Unix 系统上（如 FreeBSD 上），以下属性可能可用（但仅当 root 使用它们时才被填充）：</p>
<ul>
<li><p><code>st_gen</code></p>
<p>文件生成号。</p>
</li>
<li><p><code>st_birthtime</code></p>
<p>文件创建时间。</p>
</li>
</ul>
<p>在 Solaris 及其衍生版本上，以下属性可能也可用：</p>
<ul>
<li><p><code>st_fstype</code></p>
<p>文件所在文件系统的类型的唯一标识，为字符串。</p>
</li>
</ul>
<p>在 Mac OS 系统上，以下属性可能也可用：</p>
<ul>
<li><p><code>st_rsize</code></p>
<p>文件的实际大小。</p>
</li>
<li><p><code>st_creator</code></p>
<p>文件的创建者。</p>
</li>
<li><p><code>st_type</code></p>
<p>文件类型。</p>
</li>
</ul>
<p>在 Windows 系统上，以下属性也可用：</p>
<ul>
<li><p><code>st_file_attributes</code></p>
<p>Windows 文件属性：<code>dwFileAttributes</code>，由 <code>GetFileInformationByHandle()</code> 返回的 <code>BY_HANDLE_FILE_INFORMATION</code> 结构体的成员之一。请参阅 <a href="https://docs.python.org/zh-cn/3.8/library/stat.html#module-stat" target="_blank" rel="noopener"><code>stat</code></a> 模块中的 <code>FILE_ATTRIBUTE_*</code> 常量。</p>
</li>
<li><p><code>st_reparse_tag</code></p>
<p>当 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_file_attributes" target="_blank" rel="noopener"><code>st_file_attributes</code></a> 存在 <code>FILE_ATTRIBUTE_REPARSE_POINT</code> 集合时，本字段包含重解析点类型标记。请参阅 <a href="https://docs.python.org/zh-cn/3.8/library/stat.html#module-stat" target="_blank" rel="noopener"><code>stat</code></a> 模块中的 <code>IO_REPARSE_TAG_*</code> 常量。</p>
</li>
</ul>
<p>标准模块 <a href="https://docs.python.org/zh-cn/3.8/library/stat.html#module-stat" target="_blank" rel="noopener"><code>stat</code></a> 中定义了函数和常量，这些函数和常量可用于从 <code>stat</code> 结构体中提取信息。（在 Windows 上，某些项填充的是虚值。）</p>
<p>为了向后兼容，一个 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result" target="_blank" rel="noopener"><code>stat_result</code></a> 实例还可以作为至少包含 10 个整数的元组访问，以提供 <code>stat</code> 结构中最重要（和可移植）的成员，整数顺序为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_mode" target="_blank" rel="noopener"><code>st_mode</code></a>, <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_ino" target="_blank" rel="noopener"><code>st_ino</code></a>, <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_dev" target="_blank" rel="noopener"><code>st_dev</code></a>, <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_nlink" target="_blank" rel="noopener"><code>st_nlink</code></a>, <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_uid" target="_blank" rel="noopener"><code>st_uid</code></a>, <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_gid" target="_blank" rel="noopener"><code>st_gid</code></a>, <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_size" target="_blank" rel="noopener"><code>st_size</code></a>, <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_atime" target="_blank" rel="noopener"><code>st_atime</code></a>, <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_mtime" target="_blank" rel="noopener"><code>st_mtime</code></a>, <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_ctime" target="_blank" rel="noopener"><code>st_ctime</code></a>。某些实现可能在末尾还有更多项。为了与旧版 Python 兼容，以元组形式访问 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result" target="_blank" rel="noopener"><code>stat_result</code></a> 始终返回整数。</p>
<p><em>3.3 新版功能:</em> 添加了 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_atime_ns" target="_blank" rel="noopener"><code>st_atime_ns</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_mtime_ns" target="_blank" rel="noopener"><code>st_mtime_ns</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_ctime_ns" target="_blank" rel="noopener"><code>st_ctime_ns</code></a> 成员。</p>
<p><em>3.5 新版功能:</em> 在 Windows 上添加了 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_file_attributes" target="_blank" rel="noopener"><code>st_file_attributes</code></a> 成员。</p>
<p><em>在 3.5 版更改:</em> 在 Windows 上，如果可用，会返回文件索引作为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_ino" target="_blank" rel="noopener"><code>st_ino</code></a> 的值。</p>
<p><em>3.7 新版功能:</em> 在 Solaris 及其衍生版本上添加了 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_fstype" target="_blank" rel="noopener"><code>st_fstype</code></a> 成员。</p>
<p><em>3.8 新版功能:</em> 在 Windows 上添加了 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_reparse_tag" target="_blank" rel="noopener"><code>st_reparse_tag</code></a> 成员。</p>
<p><em>在 3.8 版更改:</em> 在 Windows 上，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat_result.st_mode" target="_blank" rel="noopener"><code>st_mode</code></a> 成员现在可以根据需要将特殊文件标识为 <code>S_IFCHR</code>、<code>S_IFIFO</code> 或 <code>S_IFBLK</code>。</p>
<ul>
<li><p><code>os.statvfs</code>(<em>path</em>)</p>
<p>在所给的路径上执行 <code>statvfs()</code> 系统调用。返回值是一个对象，其属性描述了所给路径上的文件系统，并且与 <code>statvfs</code> 结构体的成员相对应，即：<code>f_bsize</code>, <code>f_frsize</code>, <code>f_blocks</code>, <code>f_bfree</code>, <code>f_bavail</code>, <code>f_files</code>, <code>f_ffree</code>, <code>f_favail</code>, <code>f_flag</code>, <code>f_namemax</code>, <code>f_fsid</code>。</p>
<p>为 <code>f_flag</code> 属性位定义了两个模块级常量：如果存在 <code>ST_RDONLY</code> 位，则文件系统以只读挂载；如果存在 <code>ST_NOSUID</code> 位，则文件系统禁用或不支持 setuid/setgid 位。</p>
<p>为基于 GNU/glibc 的系统还定义了额外的模块级常量。它们是 <code>ST_NODEV</code> （禁止访问设备专用文件），<code>ST_NOEXEC</code> （禁止执行程序），<code>ST_SYNCHRONOUS</code> （写入后立即同步），<code>ST_MANDLOCK</code> （允许文件系统上的强制锁定），<code>ST_WRITE</code> （写入文件/目录/符号链接），<code>ST_APPEND</code> （仅追加文件），<code>ST_IMMUTABLE</code> （不可变文件），<code>ST_NOATIME</code> （不更新访问时间），<code>ST_NODIRATIME</code> （不更新目录访问时间），<code>ST_RELATIME</code> （相对于 mtime/ctime 更新访问时间）。</p>
<p>本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#path-fd" target="_blank" rel="noopener">指定文件描述符为参数</a>。</p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
<p><em>在 3.2 版更改:</em> 添加了 <code>ST_RDONLY</code> 和 <code>ST_NOSUID</code> 常量。</p>
<p><em>3.3 新版功能:</em> 新增支持将 <em>path</em> 参数指定为打开的文件描述符。</p>
<p><em>在 3.4 版更改:</em> 添加了 <code>ST_NODEV</code>、<code>ST_NOEXEC</code>、<code>ST_SYNCHRONOUS</code>、<code>ST_MANDLOCK</code>、<code>ST_WRITE</code>、<code>ST_APPEND</code>、<code>ST_IMMUTABLE</code>、<code>ST_NOATIME</code>、<code>ST_NODIRATIME</code> 和 <code>ST_RELATIME</code> 常量。</p>
<p><em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
<p><em>3.7 新版功能:</em> 添加了 <code>f_fsid</code>。</p>
</li>
</ul>
<ul>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.supports_dir_fd</span><br></pre></td></tr></table></figure>
<p>一个 <a href="https://docs.python.org/zh-cn/3.8/library/stdtypes.html#set" target="_blank" rel="noopener"><code>set</code></a> 对象，指示 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#module-os" target="_blank" rel="noopener"><code>os</code></a> 模块中的哪些函数接受一个打开的文件描述符作为 <em>dir_fd</em> 参数。不同平台提供的功能不同，且 Python 用于实现 <em>dir_fd</em> 参数的底层函数并非在 Python 支持的所有平台上都可用。考虑到一致性，支持 <em>dir_fd</em> 的函数始终允许指定描述符，但如果在底层不支持时调用了该函数，则会抛出异常。（在所有平台上始终支持将 <em>dir_fd</em> 指定为 <code>None</code>。）</p>
<p>要检查某个函数是否接受打开的文件描述符作为 <em>dir_fd</em> 参数，请在 <code>supports_dir_fd</code> 前使用 <code>in</code> 运算符。例如，如果 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat" target="_blank" rel="noopener"><code>os.stat()</code></a> 在当前平台上接受打开的文件描述符作为 <em>dir_fd</em> 参数，则此表达式的计算结果为 <code>True</code>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.stat <span class="keyword">in</span> os.supports_dir_fd</span><br></pre></td></tr></table></figure>
<p>目前 <em>dir_fd</em> 参数仅在 Unix 平台上有效，在 Windows 上均无效。</p>
<p><em>3.3 新版功能.</em></p>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.supports_effective_ids</span><br></pre></td></tr></table></figure>
<p>一个 <a href="https://docs.python.org/zh-cn/3.8/library/stdtypes.html#set" target="_blank" rel="noopener"><code>set</code></a> 对象，指示 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.access" target="_blank" rel="noopener"><code>os.access()</code></a> 是否允许在当前平台上将其 <em>effective_ids</em> 参数指定为 <code>True</code>。（所有平台都支持将 <em>effective_ids</em> 指定为 <code>False</code>。）如果当前平台支持，则集合将包含 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.access" target="_blank" rel="noopener"><code>os.access()</code></a>，否则集合为空。</p>
<p>如果当前平台上的 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.access" target="_blank" rel="noopener"><code>os.access()</code></a> 支持 <code>effective_ids=True</code>，则此表达式的计算结果为 <code>True</code>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.access <span class="keyword">in</span> os.supports_effective_ids</span><br></pre></td></tr></table></figure>
<p>目前仅 Unix 平台支持 <em>effective_ids</em>，Windows 不支持。</p>
<p><em>3.3 新版功能.</em></p>
</li>
<li><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.supports_fd</span><br></pre></td></tr></table></figure>
<p>一个 <a href="https://docs.python.org/zh-cn/3.8/library/stdtypes.html#set" target="_blank" rel="noopener"><code>set</code></a> 对象，指示在当前平台上 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#module-os" target="_blank" rel="noopener"><code>os</code></a> 模块中的哪些函数接受一个打开的文件描述符作为 <em>path</em> 参数。不同平台提供的功能不同，且 Python 所使用到的底层函数（用于实现接受描述符作为 <em>path</em>）并非在 Python 支持的所有平台上都可用。</p>
<p>要判断某个函数是否接受打开的文件描述符作为 <em>path</em> 参数，请在 <code>supports_fd</code> 前使用 <code>in</code> 运算符。例如，如果 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.chdir" target="_blank" rel="noopener"><code>os.chdir()</code></a> 在当前平台上接受打开的文件描述符作为 <em>path</em> 参数，则此表达式的计算结果为 <code>True</code>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.chdir <span class="keyword">in</span> os.supports_fd</span><br></pre></td></tr></table></figure>
<p><em>3.3 新版功能.</em></p>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.supports_follow_symlinks</span><br></pre></td></tr></table></figure>
<p>一个 <a href="https://docs.python.org/zh-cn/3.8/library/stdtypes.html#set" target="_blank" rel="noopener"><code>set</code></a> 对象，指示在当前平台上 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#module-os" target="_blank" rel="noopener"><code>os</code></a> 模块中的哪些函数的 <em>follow_symlinks</em> 参数可指定为 <code>False</code>。不同平台提供的功能不同，且 Python 用于实现 <em>follow_symlinks</em> 的底层函数并非在 Python 支持的所有平台上都可用。考虑到一致性，支持 <em>follow_symlinks</em> 的函数始终允许将其指定为 <code>False</code>，但如果在底层不支持时调用了该函数，则会抛出异常。（在所有平台上始终支持将 <em>follow_symlinks</em> 指定为 <code>True</code>。）</p>
<p>要检查某个函数的 <em>follow_symlinks</em> 参数是否可以指定为 <code>False</code>，请在 <code>supports_follow_symlinks</code> 前使用 <code>in</code> 运算符。例如，如果在当前平台上调用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat" target="_blank" rel="noopener"><code>os.stat()</code></a> 时可以指定 <code>follow_symlinks=False</code>，则此表达式的计算结果为 <code>True</code>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.stat <span class="keyword">in</span> os.supports_follow_symlinks</span><br></pre></td></tr></table></figure>
<p><em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.symlink</code>(<em>src</em>, <em>dst</em>, <em>target_is_directory=False</em>, <em>**, </em>dir_fd=None*)</p>
<p>创建一个指向 <em>src</em> 的符号链接，名为 <em>dst</em>。</p>
<p>在 Windows 上，符号链接可以表示文件或目录两种类型，并且不会动态改变类型。如果目标存在，则新建链接的类型将与目标一致。否则，如果 <em>target_is_directory</em> 为 <code>True</code>，则符号链接将创建为目录链接，为 <code>False</code> （默认）将创建为文件链接。在非 Windows 平台上，<em>target_is_directory</em> 被忽略。</p>
<p>本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#dir-fd" target="_blank" rel="noopener">基于目录描述符的相对路径</a></p>
<blockquote>
<p>在 Windows 10 或更高版本上，如果启用了开发人员模式，非特权帐户可以创建符号链接。如果开发人员模式不可用/未启用，则需要 <em>SeCreateSymbolicLinkPrivilege</em> 权限，或者该进程必须以管理员身份运行。</p>
<p>当本函数由非特权账户调用时，抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 异常。</p>
</blockquote>
<p>引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.symlink</code>，附带参数 <code>src</code>、<code>dst</code>、<code>dir_fd</code>。</p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix, Windows。</p>
<p><em>在 3.2 版更改:</em> 添加对 Windows 6.0 (Vista) 符号链接的支持。</p>
<p><em>3.3 新版功能:</em> 添加了 <em>dir_fd</em> 参数，现在在非 Windows 平台上允许 <em>target_is_directory</em> 参数。</p>
<p><em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a> 作为 <em>src</em> 和 <em>dst</em>。</p>
<p><em>在 3.8 版更改:</em> 针对启用了开发人员模式的 Windows，添加了非特权账户创建符号链接的支持。</p>
</li>
<li><p><code>os.sync</code>()</p>
<p>强制将所有内容写入磁盘。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.truncate</code>(<em>path</em>, <em>length</em>)</p>
<p>截断 <em>path</em> 对应的文件，以使其最大为 <em>length</em> 字节。本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#path-fd" target="_blank" rel="noopener">指定文件描述符为参数</a>。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.truncate</code>，附带参数 <code>path</code>, <code>length</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix, Windows。<em>3.3 新版功能.**在 3.5 版更改:</em> 添加了 Windows 支持<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
<li><p><code>os.unlink</code>(<em>path</em>, <em>**, </em>dir_fd=None*)</p>
<p>移除（删除）文件 <em>path</em>。该函数在语义上与 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.remove" target="_blank" rel="noopener"><code>remove()</code></a> 相同，<code>unlink</code> 是其传统的 Unix 名称。请参阅 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.remove" target="_blank" rel="noopener"><code>remove()</code></a> 的文档以获取更多信息。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.remove</code>，附带参数 <code>path</code>、<code>dir_fd</code>。<em>3.3 新版功能:</em> <em>dir_fd</em> 参数。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
<li><p><code>os.utime</code>(<em>path</em>, <em>times=None</em>, <em>**, [</em>ns<em>, ]</em>dir_fd=None<em>, </em>follow_symlinks=True*)</p>
<p>设置文件 <em>path</em> 的访问时间和修改时间。<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.utime" target="_blank" rel="noopener"><code>utime()</code></a> 有 <em>times</em> 和 <em>ns</em> 两个可选参数，它们指定了设置给 <em>path</em> 的时间，用法如下：  </p>
<ul>
<li>如果指定 <em>ns</em>，它必须是一个 <code>(atime_ns, mtime_ns)</code> 形式的二元组，其中每个成员都是一个表示纳秒的整数。</li>
<li>如果 <em>times</em> 不为 <code>None</code>，则它必须是 <code>(atime, mtime)</code> 形式的二元组，其中每个成员都是一个表示秒的 int 或 float。</li>
<li>如果 <em>times</em> 为 <code>None</code> 且未指定 <em>ns</em>，则相当于指定 <code>ns=(atime_ns, mtime_ns)</code>，其中两个时间均为当前时间。</li>
</ul>
<p>同时为 <em>times</em> 和 <em>ns</em> 指定元组会出错。</p>
<p>注意，根据操作系统记录访问时间和修改时间的分辨率，后续的 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat" target="_blank" rel="noopener"><code>stat()</code></a> 调用可能不会返回此处设置的确切时间。请参阅 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat" target="_blank" rel="noopener"><code>stat()</code></a>。保留精确时间的最佳方法是使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat" target="_blank" rel="noopener"><code>os.stat()</code></a> 结果对象中的 <em>st_atime_ns</em> 和 <em>st_mtime_ns</em> 字段，并将 <em>ns</em> 参数设置为 utime。</p>
<p>本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#path-fd" target="_blank" rel="noopener">指定文件描述符</a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#dir-fd" target="_blank" rel="noopener">指定基于目录描述符的相对路径</a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#follow-symlinks" target="_blank" rel="noopener">不跟踪符号链接</a>。</p>
<p>引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.utime</code>，附带参数 <code>path</code>、<code>times</code>、<code>ns</code>、<code>dir_fd</code>。</p>
<p><em>3.3 新版功能:</em> 新增支持将 <em>path</em> 参数指定为打开的文件描述符，以及支持 <em>dir_fd</em>、<em>follow_symlinks</em> 和 <em>ns</em> 参数。</p>
<p><em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
<li><p><code>os.walk</code>(<em>top</em>, <em>topdown=True</em>, <em>onerror=None</em>, <em>followlinks=False</em>)</p>
<p>生成目录树中的文件名，方式是按上-&gt;下或下-&gt;上顺序浏览目录树。对于以 <em>top</em> 为根的目录树中的每个目录（包括 <em>top</em> 本身），它都会生成一个三元组 <code>(dirpath, dirnames, filenames)</code>。</p>
<p><em>dirpath</em> 是一个字符串，表示目录的路径。<em>dirnames</em> 是一个列表，内含 <em>dirpath</em> 中子目录的名称（不包括 <code>&#39;.&#39;</code> 和 <code>&#39;..&#39;</code> ）。<em>filenames</em> 也是列表，内含 <em>dirpath</em> 中文件（非目录）的名称。注意，列表中的名称不包含路径部分。要获取 <em>dirpath</em> 中文件或目录的完整路径（从 <em>top</em> 起始），请执行 <code>os.path.join(dirpath, name)</code>。</p>
<p>如果可选参数 <em>topdown</em> 为 <code>True</code> 或未指定，则在所有子目录的三元组之前生成父目录的三元组（目录是自上而下生成的）。如果 <em>topdown</em> 为 <code>False</code>，则在所有子目录的三元组生成之后再生成父目录的三元组（目录是自下而上生成的）。无论 <em>topdown</em> 为何值，在生成目录及其子目录的元组之前，都将检索全部子目录列表。</p>
<p>当 <em>topdown</em> 为 <code>True</code> 时，调用者可以就地修改 <em>dirnames</em> 列表（也许用到了 <a href="https://docs.python.org/zh-cn/3.8/reference/simple_stmts.html#del" target="_blank" rel="noopener"><code>del</code></a> 或切片），而 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.walk" target="_blank" rel="noopener"><code>walk()</code></a> 将仅仅递归到仍保留在 <em>dirnames</em> 中的子目录内。这可用于减少搜索、加入特定的访问顺序，甚至可在继续 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.walk" target="_blank" rel="noopener"><code>walk()</code></a> 之前告知 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.walk" target="_blank" rel="noopener"><code>walk()</code></a> 由调用者新建或重命名的目录的信息。当 <em>topdown</em> 为 <code>False</code> 时，修改 <em>dirnames</em> 对 walk 的行为没有影响，因为在自下而上模式中，<em>dirnames</em> 中的目录是在 <em>dirpath</em> 本身之前生成的。</p>
<p>默认将忽略 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.scandir" target="_blank" rel="noopener"><code>scandir()</code></a> 调用中的错误。如果指定了可选参数 <em>onerror</em>，它应该是一个函数。出错时它会被调用，参数是一个 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 实例。它可以报告错误然后继续遍历，或者抛出异常然后中止遍历。注意，可以从异常对象的 <code>filename</code> 属性中获取出错的文件名。</p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.walk" target="_blank" rel="noopener"><code>walk()</code></a> 默认不会递归进指向目录的符号链接。可以在支持符号链接的系统上将 <em>followlinks</em> 设置为 <code>True</code>，以访问符号链接指向的目录。</p>
<blockquote>
<p> 注意，如果链接指向自身的父目录，则将 <em>followlinks</em> 设置为 <code>True</code> 可能导致无限递归。<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.walk" target="_blank" rel="noopener"><code>walk()</code></a> 不会记录它已经访问过的目录。 </p>
<p> 如果传入的是相对路径，请不要在恢复 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.walk" target="_blank" rel="noopener"><code>walk()</code></a> 之间更改当前工作目录。<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.walk" target="_blank" rel="noopener"><code>walk()</code></a> 不会更改当前目录，并假定其调用者也不会更改当前目录。 </p>
</blockquote>
<p>下面的示例遍历起始目录内所有子目录，打印每个目录内的文件占用的字节数，CVS 子目录不会被遍历:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> os.path <span class="keyword">import</span> join, getsize</span><br><span class="line"><span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(<span class="string">'python/Lib/email'</span>):</span><br><span class="line">    print(root, <span class="string">"consumes"</span>, end=<span class="string">" "</span>)</span><br><span class="line">    print(sum(getsize(join(root, name)) <span class="keyword">for</span> name <span class="keyword">in</span> files), end=<span class="string">" "</span>)</span><br><span class="line">    print(<span class="string">"bytes in"</span>, len(files), <span class="string">"non-directory files"</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="string">'CVS'</span> <span class="keyword">in</span> dirs:</span><br><span class="line">        dirs.remove(<span class="string">'CVS'</span>)  <span class="comment"># don't visit CVS directories</span></span><br></pre></td></tr></table></figure>
<p>在下一个示例（<a href="https://docs.python.org/zh-cn/3.8/library/shutil.html#shutil.rmtree" target="_blank" rel="noopener"><code>shutil.rmtree()</code></a> 的简单实现）中，必须使树自下而上遍历，因为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.rmdir" target="_blank" rel="noopener"><code>rmdir()</code></a> 只允许在目录为空时删除目录:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Delete everything reachable from the directory named in "top",</span></span><br><span class="line"><span class="comment"># assuming there are no symbolic links.</span></span><br><span class="line"><span class="comment"># CAUTION:  This is dangerous!  For example, if top == '/', it</span></span><br><span class="line"><span class="comment"># could delete all your disk files.</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(top, topdown=<span class="literal">False</span>):</span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> files:</span><br><span class="line">        os.remove(os.path.join(root, name))</span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> dirs:</span><br><span class="line">        os.rmdir(os.path.join(root, name))</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><em>在 3.5 版更改:</em> 现在，本函数调用的是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.scandir" target="_blank" rel="noopener"><code>os.scandir()</code></a> 而不是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.listdir" target="_blank" rel="noopener"><code>os.listdir()</code></a>，从而减少了调用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.stat" target="_blank" rel="noopener"><code>os.stat()</code></a> 的次数而变得更快。</p>
<p><em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
<ul>
<li><p><code>os.fwalk</code>(<em>top=’.’</em>, <em>topdown=True</em>, <em>onerror=None</em>, <em>**, </em>follow_symlinks=False<em>, </em>dir_fd=None*)</p>
<p>本方法的行为与 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.walk" target="_blank" rel="noopener"><code>walk()</code></a> 完全一样，除了它产生的是 4 元组 <code>(dirpath, dirnames, filenames, dirfd)</code>，并且它支持 <code>dir_fd</code>。</p>
<p><em>dirpath</em>、<em>dirnames</em> 和 <em>filenames</em> 与 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.walk" target="_blank" rel="noopener"><code>walk()</code></a> 输出的相同，<em>dirfd</em> 是指向目录 <em>dirpath</em> 的文件描述符。</p>
<p>本函数始终支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#dir-fd" target="_blank" rel="noopener">基于目录描述符的相对路径</a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#follow-symlinks" target="_blank" rel="noopener">不跟踪符号链接</a>。但是请注意，与其他函数不同，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fwalk" target="_blank" rel="noopener"><code>fwalk()</code></a> 的 <em>follow_symlinks</em> 的默认值为 <code>False</code>。</p>
<blockquote>
<p> 由于 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fwalk" target="_blank" rel="noopener"><code>fwalk()</code></a> 会生成文件描述符，而它们仅在下一个迭代步骤前有效，因此如果要将描述符保留更久，则应复制它们（比如使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.dup" target="_blank" rel="noopener"><code>dup()</code></a>）。 </p>
</blockquote>
<p>下面的示例遍历起始目录内所有子目录，打印每个目录内的文件占用的字节数，CVS 子目录不会被遍历:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">for</span> root, dirs, files, rootfd <span class="keyword">in</span> os.fwalk(<span class="string">'python/Lib/email'</span>):</span><br><span class="line">    print(root, <span class="string">"consumes"</span>, end=<span class="string">""</span>)</span><br><span class="line">    print(sum([os.stat(name, dir_fd=rootfd).st_size <span class="keyword">for</span> name <span class="keyword">in</span> files]),</span><br><span class="line">          end=<span class="string">""</span>)</span><br><span class="line">    print(<span class="string">"bytes in"</span>, len(files), <span class="string">"non-directory files"</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="string">'CVS'</span> <span class="keyword">in</span> dirs:</span><br><span class="line">        dirs.remove(<span class="string">'CVS'</span>)  <span class="comment"># don't visit CVS directories</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>在下一个示例中，必须使树自下而上遍历，因为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.rmdir" target="_blank" rel="noopener"><code>rmdir()</code></a> 只允许在目录为空时删除目录:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Delete everything reachable from the directory named in "top",</span></span><br><span class="line"><span class="comment"># assuming there are no symbolic links.</span></span><br><span class="line"><span class="comment"># CAUTION:  This is dangerous!  For example, if top == '/', it</span></span><br><span class="line"><span class="comment"># could delete all your disk files.</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">for</span> root, dirs, files, rootfd <span class="keyword">in</span> os.fwalk(top, topdown=<span class="literal">False</span>):</span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> files:</span><br><span class="line">        os.unlink(name, dir_fd=rootfd)</span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> dirs:</span><br><span class="line">        os.rmdir(name, dir_fd=rootfd)</span><br></pre></td></tr></table></figure>
<p><a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
<p>3<em>.3 新版功能.</em></p>
<p><em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
<p><em>在 3.7 版更改:</em> 添加了对 <a href="https://docs.python.org/zh-cn/3.8/library/stdtypes.html#bytes" target="_blank" rel="noopener"><code>bytes</code></a> 类型路径的支持。</p>
<ul>
<li><p><code>os.memfd_create</code>(<em>name</em>[, <em>flags=os.MFD_CLOEXEC</em>])</p>
<p>创建一个匿名文件，返回指向该文件的文件描述符。<em>flags</em> 必须是系统上可用的 <code>os.MFD_*</code> 常量之一（或将它们按位“或”组合起来）。新文件描述符默认是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#fd-inheritance" target="_blank" rel="noopener">不可继承的</a>。</p>
<p><em>name</em> 提供的名称会被用作文件名，并且 <code>/proc/self/fd/</code> 目录中相应符号链接的目标将显示为该名称。显示的名称始终以 <code>memfd:</code> 为前缀，并且仅用于调试目的。名称不会影响文件描述符的行为，因此多个文件可以有相同的名称，不会有副作用。</p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>：Linux 3.17 或更高版本，且装有 glibc 2.27 或更高版本。</p>
<p><em>3.8 新版功能.</em> </p>
</li>
<li><p><code>os.MFD_CLOEXEC</code></p>
</li>
<li><p><code>os.MFD_ALLOW_SEALING</code></p>
</li>
<li><p><code>os.MFD_HUGETLB</code></p>
</li>
<li><p><code>os.MFD_HUGE_SHIFT</code></p>
</li>
<li><p><code>os.MFD_HUGE_MASK</code></p>
</li>
<li><p><code>os.MFD_HUGE_64KB</code></p>
</li>
<li><p><code>os.MFD_HUGE_512KB</code></p>
</li>
<li><p><code>os.MFD_HUGE_1MB</code></p>
</li>
<li><p><code>os.MFD_HUGE_2MB</code></p>
</li>
<li><p><code>os.MFD_HUGE_8MB</code></p>
</li>
<li><p><code>os.MFD_HUGE_16MB</code></p>
</li>
<li><p><code>os.MFD_HUGE_32MB</code></p>
</li>
<li><p><code>os.MFD_HUGE_256MB</code></p>
</li>
<li><p><code>os.MFD_HUGE_512MB</code></p>
</li>
<li><p><code>os.MFD_HUGE_1GB</code></p>
</li>
<li><p><code>os.MFD_HUGE_2GB</code></p>
</li>
<li><p><code>os.MFD_HUGE_16GB</code></p>
<p>以上标志位可以传递给 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.memfd_create" target="_blank" rel="noopener"><code>memfd_create()</code></a>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>：Linux 3.17 或更高版本，且装有 glibc 2.27 或更高版本。<code>MFD_HUGE*</code> 标志仅在 Linux 4.14 及以上可用。</p>
<p><em>3.8 新版功能.</em></p>
</li>
</ul>
<h3 id="Linux-扩展属性"><a href="#Linux-扩展属性" class="headerlink" title="Linux 扩展属性"></a>Linux 扩展属性</h3><p><em>3.3 新版功能.</em></p>
<p>这些函数仅在 Linux 上可用。</p>
<ul>
<li><p><code>os.getxattr</code>(<em>path</em>, <em>attribute</em>, <em>**, </em>follow_symlinks=True*)</p>
<p>返回 <em>path</em> 的扩展文件系统属性 <em>attribute</em> 的值。<em>attribute</em> 可以是 bytes 或 str （直接传入或通过 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PathLike" target="_blank" rel="noopener"><code>PathLike</code></a> 接口间接传入）。如果是 str，则使用文件系统编码来编码字符串。本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#path-fd" target="_blank" rel="noopener">指定文件描述符为参数</a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#follow-symlinks" target="_blank" rel="noopener">不跟踪符号链接</a>。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.getxattr</code>，附带参数 <code>path</code>、<code>attribute</code>。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a> 作为 <em>path</em> 和 <em>attribute</em>。</p>
</li>
<li><p><code>os.listxattr</code>(<em>path=None</em>, <em>**, </em>follow_symlinks=True*)</p>
<p>返回一个列表，包含 <em>path</em> 的所有扩展文件系统属性。列表中的属性都表示为字符串，它们是根据文件系统编码解码出来的。如果 <em>path</em> 为 <code>None</code>，则 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.listxattr" target="_blank" rel="noopener"><code>listxattr()</code></a> 将检查当前目录。本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#path-fd" target="_blank" rel="noopener">指定文件描述符为参数</a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#follow-symlinks" target="_blank" rel="noopener">不跟踪符号链接</a>。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.listxattr</code>，附带参数 <code>path</code>。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
<li><p><code>os.removexattr</code>(<em>path</em>, <em>attribute</em>, <em>**, </em>follow_symlinks=True*)</p>
<p>从 <em>path</em> 中删除扩展文件系统属性 <em>attribute</em>。<em>attribute</em> 应该是 bytes 或 str （直接传入或通过 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PathLike" target="_blank" rel="noopener"><code>PathLike</code></a> 接口间接传入）。如果是 str，则使用文件系统编码来编码字符串。本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#path-fd" target="_blank" rel="noopener">指定文件描述符为参数</a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#follow-symlinks" target="_blank" rel="noopener">不跟踪符号链接</a>。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.removexattr</code>，附带参数 <code>path</code>、<code>attribute</code>。<em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a> 作为 <em>path</em> 和 <em>attribute</em>。</p>
</li>
<li><p><code>os.setxattr</code>(<em>path</em>, <em>attribute</em>, <em>value</em>, <em>flags=0</em>, <em>**, </em>follow_symlinks=True*)</p>
<p>将 <em>path</em> 的扩展文件系统属性 <em>attribute</em> 设置为 <em>value</em>。<em>attribute</em> 必须是没有空字符的 bytes 或 str （直接传入或通过 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.PathLike" target="_blank" rel="noopener"><code>PathLike</code></a> 接口间接传入）。如果是 str，则应使用文件系统编码进行编码。<em>flags</em> 可以是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.XATTR_REPLACE" target="_blank" rel="noopener"><code>XATTR_REPLACE</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.XATTR_CREATE" target="_blank" rel="noopener"><code>XATTR_CREATE</code></a>。如果指定 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.XATTR_REPLACE" target="_blank" rel="noopener"><code>XATTR_REPLACE</code></a> 而该属性不存在，则抛出 <code>EEXISTS</code> 异常。如果指定 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.XATTR_CREATE" target="_blank" rel="noopener"><code>XATTR_CREATE</code></a> 而该属性已经存在，则不会创建该属性，抛出 <code>ENODATA</code> 异常。本函数支持 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#path-fd" target="_blank" rel="noopener">指定文件描述符为参数</a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#follow-symlinks" target="_blank" rel="noopener">不跟踪符号链接</a>。</p>
<blockquote>
<p> Linux kernel 2.6.39 以下版本的一个 bug 导致在某些文件系统上，flags 参数会被忽略。 </p>
</blockquote>
<p>引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.setxattr</code>，附带参数 <code>path</code>、<code>attribute</code>、<code>value</code>、<code>flags</code>。</p>
<p><em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a> 作为 <em>path</em> 和 <em>attribute</em>。</p>
</li>
<li><p><code>os.XATTR_SIZE_MAX</code></p>
<p>一条扩展属性的值的最大大小。在当前的 Linux 上是 64 KiB。</p>
</li>
<li><p><code>os.XATTR_CREATE</code></p>
<p>这是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.setxattr" target="_blank" rel="noopener"><code>setxattr()</code></a> 的 flags 参数的可取值，它表示该操作必须创建一个属性。</p>
</li>
<li><p><code>os.XATTR_REPLACE</code></p>
<p>这是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.setxattr" target="_blank" rel="noopener"><code>setxattr()</code></a> 的 flags 参数的可取值，它表示该操作必须替换现有属性。</p>
</li>
</ul>
<h2 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h2><p>下列函数可用于创建和管理进程。</p>
<p>所有 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execl" target="_blank" rel="noopener"><code>exec*</code></a> 函数都接受一个参数列表，用来给新程序加载到它的进程中。在所有情况下，传递给新程序的第一个参数是程序本身的名称，而不是用户在命令行上输入的参数。对于 C 程序员来说，这就是传递给 <code>main()</code> 函数的 <code>argv[0]</code>。例如，<code>os.execv(&#39;/bin/echo&#39;, [&#39;foo&#39;, &#39;bar&#39;])</code> 只会在标准输出上打印 <code>bar</code>，而 <code>foo</code> 会被忽略。</p>
<ul>
<li><p><code>os.abort</code>()</p>
<p>发送 <code>SIGABRT</code> 信号到当前进程。在 Unix 上，默认行为是生成一个核心转储。在 Windows 上，该进程立即返回退出代码 <code>3</code>。请注意，使用 <a href="https://docs.python.org/zh-cn/3.8/library/signal.html#signal.signal" target="_blank" rel="noopener"><code>signal.signal()</code></a> 可以为 <code>SIGABRT</code> 注册 Python 信号处理程序，而调用本函数将不会调用按前述方法注册的程序。</p>
</li>
<li><p><code>os.add_dll_directory</code>(<em>path</em>)</p>
<p>将路径添加到 DLL 搜索路径。当需要解析扩展模块的依赖时（扩展模块本身通过 sys.path 解析），会使用该搜索路径，<a href="https://docs.python.org/zh-cn/3.8/library/ctypes.html#module-ctypes" target="_blank" rel="noopener"><code>ctypes</code></a> 也会使用该搜索路径。要移除目录，可以在返回的对象上调用 <strong>close()</strong>，也可以在 <a href="https://docs.python.org/zh-cn/3.8/reference/compound_stmts.html#with" target="_blank" rel="noopener"><code>with</code></a> 语句内使用本方法。参阅 <a href="https://msdn.microsoft.com/44228cf2-6306-466c-8f16-f513cd3ba8b5" target="_blank" rel="noopener">Microsoft 文档</a> 获取如何加载 DLL 的信息。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.add_dll_directory</code>，附带参数 <code>path</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Windows。<em>3.8 新版功能:</em> 早期版本的 CPython 解析 DLL 时用的是当前进程的默认行为。这会导致不一致，比如不是每次都会去搜索 <code>PATH</code> 和当前工作目录，且系统函数（如 <code>AddDllDirectory</code> ）失效。在 3.8 中，DLL 的两种主要加载方式现在可以显式覆盖进程的行为，以确保一致性。请参阅 <a href="https://docs.python.org/zh-cn/3.8/whatsnew/3.8.html#bpo-36085-whatsnew" target="_blank" rel="noopener">移植说明</a> 了解如何更新你的库。</p>
</li>
<li><p><code>os.execl</code>(<em>path</em>, <em>arg0</em>, <em>arg1</em>, <em>…</em>)</p>
</li>
<li><p><code>os.execle</code>(<em>path</em>, <em>arg0</em>, <em>arg1</em>, <em>…</em>, <em>env</em>)</p>
</li>
<li><p><code>os.execlp</code>(<em>file</em>, <em>arg0</em>, <em>arg1</em>, <em>…</em>)</p>
</li>
<li><p><code>os.execlpe</code>(<em>file</em>, <em>arg0</em>, <em>arg1</em>, <em>…</em>, <em>env</em>)</p>
</li>
<li><p><code>os.execv</code>(<em>path</em>, <em>args</em>)</p>
</li>
<li><p><code>os.execve</code>(<em>path</em>, <em>args</em>, <em>env</em>)</p>
</li>
<li><p><code>os.execvp</code>(<em>file</em>, <em>args</em>)</p>
</li>
<li><p><code>os.execvpe</code>(<em>file</em>, <em>args</em>, <em>env</em>)</p>
<p>这些函数都将执行一个新程序，以替换当前进程。它们没有返回值。在 Unix 上，新程序会加载到当前进程中，且进程号与调用者相同。过程中的错误会被报告为 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 异常。</p>
<p>当前进程会被立即替换。打开的文件对象和描述符都不会刷新，因此如果这些文件上可能缓冲了数据，则应在调用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execl" target="_blank" rel="noopener"><code>exec*</code></a> 函数之前使用 <code>sys.stdout.flush()</code> 或 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fsync" target="_blank" rel="noopener"><code>os.fsync()</code></a> 刷新它们。</p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execl" target="_blank" rel="noopener"><code>exec*</code></a> 函数的 “l” 和 “v” 变体不同在于命令行参数的传递方式。如果在编码时固定了参数数量，则 “l” 变体可能是最方便的，各参数作为 <code>execl*()</code> 函数的附加参数传入即可。当参数数量可变时，”v” 变体更方便，参数以列表或元组的形式作为 <em>args</em> 参数传递。在这两种情况下，子进程的第一个参数都应该是即将运行的命令名称，但这不是强制性的。</p>
<p>结尾包含 “p” 的变体（<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execlp" target="_blank" rel="noopener"><code>execlp()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execlpe" target="_blank" rel="noopener"><code>execlpe()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execvp" target="_blank" rel="noopener"><code>execvp()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execvpe" target="_blank" rel="noopener"><code>execvpe()</code></a> ）将使用 <code>PATH</code> 环境变量来查找程序 <em>file</em>。当环境被替换时（使用下一段讨论的 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execl" target="_blank" rel="noopener"><code>exec*e</code></a> 变体之一），<code>PATH</code> 变量将来自于新环境。其他变体 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execl" target="_blank" rel="noopener"><code>execl()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execle" target="_blank" rel="noopener"><code>execle()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execv" target="_blank" rel="noopener"><code>execv()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execve" target="_blank" rel="noopener"><code>execve()</code></a> 不使用 <code>PATH</code> 变量来查找程序，因此 <em>path</em> 必须包含正确的绝对或相对路径。</p>
<p>对于 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execle" target="_blank" rel="noopener"><code>execle()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execlpe" target="_blank" rel="noopener"><code>execlpe()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execve" target="_blank" rel="noopener"><code>execve()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execvpe" target="_blank" rel="noopener"><code>execvpe()</code></a> （都以 “e” 结尾），<em>env</em> 参数是一个映射，用于定义新进程的环境变量（代替当前进程的环境变量）。而函数 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execl" target="_blank" rel="noopener"><code>execl()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execlp" target="_blank" rel="noopener"><code>execlp()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execv" target="_blank" rel="noopener"><code>execv()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execvp" target="_blank" rel="noopener"><code>execvp()</code></a> 会将当前进程的环境变量过继给新进程。</p>
<p>某些平台上的 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execve" target="_blank" rel="noopener"><code>execve()</code></a> 可以将 <em>path</em> 指定为打开的文件描述符。当前平台可能不支持此功能，可以使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.supports_fd" target="_blank" rel="noopener"><code>os.supports_fd</code></a> 检查它是否支持。如果不可用，则使用它会抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#NotImplementedError" target="_blank" rel="noopener"><code>NotImplementedError</code></a> 异常。</p>
<p>引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.exec</code>，附带参数 <code>path</code>、<code>args</code>、<code>env</code>。</p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix, Windows。</p>
<p><em>3.3 新版功能:</em> 新增支持将 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execve" target="_blank" rel="noopener"><code>execve()</code></a> 的 <em>path</em> 参数指定为打开的文件描述符。</p>
<p><em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
</li>
<li><p><code>os._exit</code>(<em>n</em>)</p>
<p>以状态码 <em>n</em> 退出进程，不会调用清理处理程序，不会刷新 stdio，等等。</p>
<blockquote>
<p> 退出的标准方法是使用 <code>sys.exit(n)</code>。而 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os._exit" target="_blank" rel="noopener"><code>_exit()</code></a> 通常只应在 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fork" target="_blank" rel="noopener"><code>fork()</code></a> 出的子进程中使用。 </p>
</blockquote>
<p> 以下是已定义的退出代码，可以用于 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os._exit" target="_blank" rel="noopener"><code>_exit()</code></a>，尽管它们不是必需的。这些退出代码通常用于 Python 编写的系统程序，例如邮件服务器的外部命令传递程序。 </p>
<blockquote>
<p> 其中部分退出代码在部分 Unix 平台上可能不可用，因为平台间存在差异。如果底层平台定义了这些常量，那上层也会定义。 </p>
</blockquote>
</li>
<li><p><code>os.EX_OK</code></p>
<p>退出代码，表示未发生任何错误。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.EX_USAGE</code></p>
<p>退出代码，表示命令使用不正确，如给出的参数数量有误。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.EX_DATAERR</code></p>
<p>退出代码，表示输入数据不正确。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.EX_NOINPUT</code></p>
<p>退出代码，表示某个输入文件不存在或不可读。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.EX_NOUSER</code></p>
<p>退出代码，表示指定的用户不存在。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.EX_NOHOST</code></p>
<p>退出代码，表示指定的主机不存在。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.EX_UNAVAILABLE</code></p>
<p>退出代码，表示所需的服务不可用。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.EX_SOFTWARE</code></p>
<p>退出代码，表示检测到内部软件错误。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.EX_OSERR</code></p>
<p>退出代码，表示检测到操作系统错误，例如无法 fork 或创建管道。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.EX_OSFILE</code></p>
<p>退出代码，表示某些系统文件不存在、无法打开或发生其他错误。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.EX_CANTCREAT</code></p>
<p>退出代码，表示无法创建用户指定的输出文件。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.EX_IOERR</code></p>
<p>退出代码，表示对某些文件进行读写时发生错误。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.EX_TEMPFAIL</code></p>
<p>退出代码，表示发生了暂时性故障。它可能并非意味着真正的错误，例如在可重试的情况下无法建立网络连接。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.EX_PROTOCOL</code></p>
<p>退出代码，表示协议交换是非法的、无效的或无法解读的。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.EX_NOPERM</code></p>
<p>退出代码，表示没有足够的权限执行该操作（但不适用于文件系统问题）。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.EX_CONFIG</code></p>
<p>退出代码，表示发生某种配置错误。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.EX_NOTFOUND</code></p>
<p>退出代码，表示的内容类似于“找不到条目”。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.fork</code>()</p>
<p>Fork 出一个子进程。在子进程中返回 <code>0</code>，在父进程中返回子进程的进程号。如果发生错误，则抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 异常。注意，当从线程中使用 <code>fork()</code> 时，某些平台（包括 FreeBSD &lt;= 6.3 和 Cygwin）存在已知问题。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.fork</code>，没有附带参数。<em>在 3.8 版更改:</em> 不再支持在子解释器中调用 <code>fork()</code> （将抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#RuntimeError" target="_blank" rel="noopener"><code>RuntimeError</code></a> 异常）</p>
<p> 有关 SSL 模块与 fork() 结合的应用，请参阅 <a href="https://docs.python.org/zh-cn/3.8/library/ssl.html#module-ssl" target="_blank" rel="noopener"><code>ssl</code></a>。 </p>
<p> <a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix </p>
</li>
<li><p><code>os.forkpty</code>()</p>
<p>Fork 出一个子进程，使用新的伪终端作为子进程的控制终端。返回一对 <code>(pid, fd)</code>，其中 <em>pid</em> 在子进程中为 <code>0</code>，这是父进程中新子进程的进程号，而 <em>fd</em> 是伪终端主设备的文件描述符。对于更便于移植的方法，请使用 <a href="https://docs.python.org/zh-cn/3.8/library/pty.html#module-pty" target="_blank" rel="noopener"><code>pty</code></a> 模块。如果发生错误，则抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 异常。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.forkpty</code>，没有附带参数。<em>在 3.8 版更改:</em> 不再支持在子解释器中调用 <code>forkpty()</code> （将抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#RuntimeError" target="_blank" rel="noopener"><code>RuntimeError</code></a> 异常）。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: 某些 Unix。</p>
</li>
<li><p><code>os.kill</code>(<em>pid</em>, <em>sig</em>)</p>
<p>将信号 <em>sig</em> 发送至进程 <em>pid</em>。特定平台上可用的信号常量定义在 <a href="https://docs.python.org/zh-cn/3.8/library/signal.html#module-signal" target="_blank" rel="noopener"><code>signal</code></a> 模块中。Windows： <a href="https://docs.python.org/zh-cn/3.8/library/signal.html#signal.CTRL_C_EVENT" target="_blank" rel="noopener"><code>signal.CTRL_C_EVENT</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/signal.html#signal.CTRL_BREAK_EVENT" target="_blank" rel="noopener"><code>signal.CTRL_BREAK_EVENT</code></a> 信号是特殊信号，只能发送给共享同一个控制台窗口的控制台进程，如某些子进程。<em>sig</em> 取任何其他值将导致该进程被 TerminateProcess API 无条件终止，且退出代码为 <em>sig</em>。Windows 版本的 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.kill" target="_blank" rel="noopener"><code>kill()</code></a> 还需要传入待结束进程的句柄。另请参阅 <a href="https://docs.python.org/zh-cn/3.8/library/signal.html#signal.pthread_kill" target="_blank" rel="noopener"><code>signal.pthread_kill()</code></a>。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.kill</code>，附带参数 <code>pid</code>、<code>sig</code>。<em>3.2 新版功能:</em> Windows 支持。</p>
</li>
<li><p><code>os.killpg</code>(<em>pgid</em>, <em>sig</em>)</p>
<p>将信号 <em>sig</em> 发送给进程组 <em>pgid</em>。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.killpg</code>，附带参数 <code>pgid</code>、<code>sig</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.nice</code>(<em>increment</em>)</p>
<p>将进程的优先级（nice 值）增加 <em>increment</em>，返回新的 nice 值。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.plock</code>(<em>op</em>)</p>
<p>将程序段锁定到内存中。<em>op</em> 的值（定义在  中）决定了哪些段被锁定。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.popen</code>(<em>cmd</em>, <em>mode=’r’</em>, <em>buffering=-1</em>)</p>
<p>打开一个管道，它通往 / 接受自命令 <em>cmd</em>。返回值是连接到管道的文件对象，根据 <em>mode</em> 是 <code>&#39;r&#39;</code> （默认）还是 <code>&#39;w&#39;</code> 决定该对象可以读取还是写入。<em>buffering</em> 参数与内置函数 <a href="https://docs.python.org/zh-cn/3.8/library/functions.html#open" target="_blank" rel="noopener"><code>open()</code></a> 相应的参数含义相同。返回的文件对象只能读写文本字符串，不能是字节类型。</p>
<p>如果子进程成功退出，则 <code>close</code> 方法返回 <a href="https://docs.python.org/zh-cn/3.8/library/constants.html#None" target="_blank" rel="noopener"><code>None</code></a>。如果发生错误，则返回子进程的返回码。在 POSIX 系统上，如果返回码为正，则它就是进程返回值左移一个字节后的值。如果返回码为负，则进程是被信号终止的，返回码取反后就是该信号。（例如，如果子进程被终止，则返回值可能是 <code>- signal.SIGKILL</code>。）在 Windows 系统上，返回值包含子进程的返回码（有符号整数）。</p>
<p>本方法是使用 <a href="https://docs.python.org/zh-cn/3.8/library/subprocess.html#subprocess.Popen" target="_blank" rel="noopener"><code>subprocess.Popen</code></a> 实现的，如需更强大的方法来管理和沟通子进程，请参阅该类的文档。</p>
</li>
<li><p><code>os.posix_spawn</code>(<em>path</em>, <em>argv</em>, <em>env</em>, <em>**, </em>file_actions=None<em>, </em>setpgroup=None<em>, </em>resetids=False<em>, </em>setsid=False<em>, </em>setsigmask=()<em>, </em>setsigdef=()<em>, </em>scheduler=None*)</p>
<p>包装 <code>posix_spawn()</code> C 库 API，使其可以从 Python 调用。</p>
<p>大多数用户应使用 <a href="https://docs.python.org/zh-cn/3.8/library/subprocess.html#subprocess.run" target="_blank" rel="noopener"><code>subprocess.run()</code></a> 代替 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.posix_spawn" target="_blank" rel="noopener"><code>posix_spawn()</code></a>。</p>
<p>仅位置参数 (Positional-only arguments) <em>path</em>、<em>args</em> 和 <em>env</em> 与 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execve" target="_blank" rel="noopener"><code>execve()</code></a> 中的类似。</p>
<p><em>path</em> 参数是可执行文件的路径，<em>path</em> 中应该包含目录。使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.posix_spawnp" target="_blank" rel="noopener"><code>posix_spawnp()</code></a> 可直接传入可执行文件名称，不带有目录。</p>
<p><em>file_actions</em> 参数可以是由元组组成的序列，序列描述了对子进程中指定文件描述符采取的操作，这些操作会在 C 库实现的 <code>fork()</code> 和 <code>exec()</code> 步骤间完成。每个元组的第一个元素必须是下面列出的三个类型指示符之一，用于描述元组剩余的元素：</p>
<ul>
<li><p><code>os.POSIX_SPAWN_OPEN</code></p>
<p>(<code>os.POSIX_SPAWN_OPEN</code>, <em>fd</em>, <em>path</em>, <em>flags</em>, <em>mode</em>)执行 <code>os.dup2(os.open(path, flags, mode), fd)</code>。</p>
</li>
<li><p><code>os.POSIX_SPAWN_CLOSE</code></p>
<p>(<code>os.POSIX_SPAWN_CLOSE</code>, <em>fd</em>)执行 <code>os.close(fd)</code>。</p>
</li>
<li><p><code>os.POSIX_SPAWN_DUP2</code></p>
<p>(<code>os.POSIX_SPAWN_DUP2</code>, <em>fd</em>, <em>new_fd</em>)执行 <code>os.dup2(fd, new_fd)</code>。</p>
</li>
</ul>
<p>这些元组对应于 C 库 <code>posix_spawn_file_actions_addopen()</code>， <code>posix_spawn_file_actions_addclose()</code> 和 <code>posix_spawn_file_actions_adddup2()</code> API 调用，它们为调用 <code>posix_spawn()</code> 自身做准备。</p>
<p><em>setpgroup</em> 参数将子进程的进程组设置为指定值。如果指定值为 0，则子进程的进程组 ID 将与其进程 ID 相同。如果未设置 <em>setpgroup</em> 值，则子进程将继承父进程的进程组 ID。本参数对应于 C 库 <code>POSIX_SPAWN_SETPGROUP</code> 标志。</p>
<p>如果 <em>resetids</em> 参数为 <code>True</code>，则会将子进程的有效用户 ID 和有效组 ID 重置为父进程的实际用户 ID 和实际组 ID。如果该参数为 <code>False</code>，则子进程保留父进程的有效用户 ID 和有效组 ID。无论哪种情况，若在可执行文件上启用了 “设置用户 ID” 和 “设置组 ID” 权限位，它们将覆盖有效用户 ID 和有效组 ID 的设置。本参数对应于 C 库 <code>POSIX_SPAWN_RESETIDS</code> 标志。</p>
<p>如果 <em>setsid</em> 参数为 <code>True</code>，它将为 posix_spawn 新建一个会话 ID。<em>setsid</em> 需要 <code>POSIX_SPAWN_SETSID</code> 或 <code>POSIX_SPAWN_SETSID_NP</code> 标志，否则会抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#NotImplementedError" target="_blank" rel="noopener"><code>NotImplementedError</code></a> 异常。</p>
<p><em>setsigmask</em> 参数将信号掩码设置为指定的信号集合。如果未使用该参数，则子进程将继承父进程的信号掩码。本参数对应于 C 库 <code>POSIX_SPAWN_SETSIGMASK</code> 标志。</p>
<p><em>sigdef</em> 参数将集合中所有信号的操作全部重置为默认。本参数对应于 C 库 <code>POSIX_SPAWN_SETSIGDEF</code> 标志。</p>
<p><em>scheduler</em> 参数必须是一个元组，其中包含调度器策略（可选）以及携带了调度器参数的 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.sched_param" target="_blank" rel="noopener"><code>sched_param</code></a> 实例。在调度器策略所在位置为 <code>None</code> 表示未提供该值。本参数是 C 库 <code>POSIX_SPAWN_SETSCHEDPARAM</code> 和 <code>POSIX_SPAWN_SETSCHEDULER</code> 标志的组合。</p>
<p>引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.posix_spawn</code>，附带参数 <code>path</code>、<code>argv</code>、<code>env</code>。</p>
<p><em>3.8 新版功能.</em></p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.posix_spawnp</code>(<em>path</em>, <em>argv</em>, <em>env</em>, <em>**, </em>file_actions=None<em>, </em>setpgroup=None<em>, </em>resetids=False<em>, </em>setsid=False<em>, </em>setsigmask=()<em>, </em>setsigdef=()<em>, </em>scheduler=None*)</p>
<p>包装 <code>posix_spawnp()</code> C 库 API，使其可以从 Python 调用。</p>
<p>与 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.posix_spawn" target="_blank" rel="noopener"><code>posix_spawn()</code></a> 相似，但是系统会在 <code>PATH</code> 环境变量指定的目录列表中搜索可执行文件 <em>executable</em> （与 <code>execvp(3)</code> 相同）。</p>
<p>引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.posix_spawn</code>，附带参数 <code>path</code>、<code>argv</code>、<code>env</code>。</p>
<p><em>3.8 新版功能.</em></p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: 请参阅 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.posix_spawn" target="_blank" rel="noopener"><code>posix_spawn()</code></a> 文档。</p>
</li>
<li><p><code>os.register_at_fork</code>(<em>**, </em>before=None<em>, </em>after_in_parent=None<em>, </em>after_in_child=None*)</p>
<p>注册可调用对象，在使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.fork" target="_blank" rel="noopener"><code>os.fork()</code></a> 或类似的进程克隆 API 派生新的子进程时，这些对象会运行。参数是可选的，且为仅关键字 (Keyword-only) 参数。每个参数指定一个不同的调用点。</p>
<ul>
<li><em>before</em> 是一个函数，在 fork 子进程前调用。</li>
<li><em>after_in_parent</em> 是一个函数，在 fork 子进程后从父进程调用。</li>
<li><em>after_in_child</em> 是一个函数，从子进程中调用。</li>
</ul>
<p>只有希望控制权回到 Python 解释器时，才进行这些调用。典型的 <a href="https://docs.python.org/zh-cn/3.8/library/subprocess.html#module-subprocess" target="_blank" rel="noopener"><code>子进程</code></a> 启动时不会触发它们，因为子进程不会重新进入解释器。</p>
<p>在注册的函数中，用于 fork 前运行的函数将按与注册相反的顺序调用。用于 fork 后（从父进程或子进程）运行的函数按注册顺序调用。</p>
<p>注意，第三方 C 代码的 <code>fork()</code> 调用可能不会调用这些函数，除非它显式调用了 <a href="https://docs.python.org/zh-cn/3.8/c-api/sys.html#c.PyOS_BeforeFork" target="_blank" rel="noopener"><code>PyOS_BeforeFork()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/c-api/sys.html#c.PyOS_AfterFork_Parent" target="_blank" rel="noopener"><code>PyOS_AfterFork_Parent()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/c-api/sys.html#c.PyOS_AfterFork_Child" target="_blank" rel="noopener"><code>PyOS_AfterFork_Child()</code></a>。</p>
<p>函数注册后无法注销。</p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
<p><em>3.7 新版功能.</em></p>
</li>
<li><p><code>os.spawnl</code>(<em>mode</em>, <em>path</em>, <em>…</em>)</p>
</li>
<li><p><code>os.spawnle</code>(<em>mode</em>, <em>path</em>, <em>…</em>, <em>env</em>)</p>
</li>
<li><p><code>os.spawnlp</code>(<em>mode</em>, <em>file</em>, <em>…</em>)</p>
</li>
<li><p><code>os.spawnlpe</code>(<em>mode</em>, <em>file</em>, <em>…</em>, <em>env</em>)</p>
</li>
<li><p><code>os.spawnv</code>(<em>mode</em>, <em>path</em>, <em>args</em>)</p>
</li>
<li><p><code>os.spawnve</code>(<em>mode</em>, <em>path</em>, <em>args</em>, <em>env</em>)</p>
</li>
<li><p><code>os.spawnvp</code>(<em>mode</em>, <em>file</em>, <em>args</em>)</p>
</li>
<li><p><code>os.spawnvpe</code>(<em>mode</em>, <em>file</em>, <em>args</em>, <em>env</em>)<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnvpe" target="_blank" rel="noopener">¶</a></p>
<p>在新进程中执行程序 <em>path</em>。</p>
<p>（注意，<a href="https://docs.python.org/zh-cn/3.8/library/subprocess.html#module-subprocess" target="_blank" rel="noopener"><code>subprocess</code></a> 模块提供了更强大的工具来生成新进程并跟踪执行结果，使用该模块比使用这些函数更好。尤其应当检查 <a href="https://docs.python.org/zh-cn/3.8/library/subprocess.html#subprocess-replacements" target="_blank" rel="noopener">Replacing Older Functions with the subprocess Module</a> 部分。）</p>
<p><em>mode</em> 为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.P_NOWAIT" target="_blank" rel="noopener"><code>P_NOWAIT</code></a> 时，本函数返回新进程的进程号。<em>mode</em> 为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.P_WAIT" target="_blank" rel="noopener"><code>P_WAIT</code></a> 时，如果进程正常退出，返回退出代码，如果被终止，返回 <code>-signal</code>，其中 <em>signal</em> 是终止进程的信号。在 Windows 上，进程号实际上是进程句柄，因此可以与 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.waitpid" target="_blank" rel="noopener"><code>waitpid()</code></a> 函数一起使用。</p>
<p>注意在 VxWorks 上，新进程被终止时，本函数不会返回 <code>-signal</code>，而是会抛出 OSError 异常。</p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnl" target="_blank" rel="noopener"><code>spawn*</code></a> 函数的 “l” 和 “v” 变体不同在于命令行参数的传递方式。如果在编码时固定了参数数量，则 “l” 变体可能是最方便的，各参数作为 <code>spawnl*()</code> 函数的附加参数传入即可。当参数数量可变时，”v” 变体更方便，参数以列表或元组的形式作为 <em>args</em> 参数传递。在这两种情况下，子进程的第一个参数都必须是即将运行的命令名称。</p>
<p>结尾包含第二个 “p” 的变体（<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnlp" target="_blank" rel="noopener"><code>spawnlp()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnlpe" target="_blank" rel="noopener"><code>spawnlpe()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnvp" target="_blank" rel="noopener"><code>spawnvp()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnvpe" target="_blank" rel="noopener"><code>spawnvpe()</code></a>）将使用 <code>PATH</code> 环境变量来查找程序 <em>file</em>。当环境被替换时（使用下一段讨论的 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnl" target="_blank" rel="noopener"><code>spawn*e</code></a> 变体之一），<code>PATH</code> 变量将来自于新环境。其他变体 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnl" target="_blank" rel="noopener"><code>spawnl()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnle" target="_blank" rel="noopener"><code>spawnle()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnv" target="_blank" rel="noopener"><code>spawnv()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnve" target="_blank" rel="noopener"><code>spawnve()</code></a> 不使用 <code>PATH</code> 变量来查找程序，因此 <em>path</em> 必须包含正确的绝对或相对路径。</p>
<p>对于 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnle" target="_blank" rel="noopener"><code>spawnle()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnlpe" target="_blank" rel="noopener"><code>spawnlpe()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnve" target="_blank" rel="noopener"><code>spawnve()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnvpe" target="_blank" rel="noopener"><code>spawnvpe()</code></a> （都以 “e” 结尾），<em>env</em> 参数是一个映射，用于定义新进程的环境变量（代替当前进程的环境变量）。而函数 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnl" target="_blank" rel="noopener"><code>spawnl()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnlp" target="_blank" rel="noopener"><code>spawnlp()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnv" target="_blank" rel="noopener"><code>spawnv()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnvp" target="_blank" rel="noopener"><code>spawnvp()</code></a> 会将当前进程的环境变量过继给新进程。注意，<em>env</em> 字典中的键和值必须是字符串。无效的键或值将导致函数出错，返回值为 <code>127</code>。</p>
<p>例如，以下对 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnlp" target="_blank" rel="noopener"><code>spawnlp()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnvpe" target="_blank" rel="noopener"><code>spawnvpe()</code></a> 的调用是等效的:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">  os.spawnlp(os.P_WAIT, <span class="string">'cp'</span>, <span class="string">'cp'</span>, <span class="string">'index.html'</span>, <span class="string">'/dev/null'</span>)</span><br><span class="line"></span><br><span class="line">  L = [<span class="string">'cp'</span>, <span class="string">'index.html'</span>, <span class="string">'/dev/null'</span>]</span><br><span class="line">os.spawnvpe(os.P_WAIT, <span class="string">'cp'</span>, L, os.environ)</span><br></pre></td></tr></table></figure>
<p>引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.spawn</code>，附带参数 <code>mode</code>、<code>path</code>、<code>args</code>、<code>env</code>。</p>
</li>
</ul>
<p><a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix, Windows。<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnlp" target="_blank" rel="noopener"><code>spawnlp()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnlpe" target="_blank" rel="noopener"><code>spawnlpe()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnvp" target="_blank" rel="noopener"><code>spawnvp()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnvpe" target="_blank" rel="noopener"><code>spawnvpe()</code></a> 在 Windows 上不可用。<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnle" target="_blank" rel="noopener"><code>spawnle()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnve" target="_blank" rel="noopener"><code>spawnve()</code></a> 在 Windows 上不是线程安全的，建议使用 <a href="https://docs.python.org/zh-cn/3.8/library/subprocess.html#module-subprocess" target="_blank" rel="noopener"><code>subprocess</code></a> 模块替代。</p>
<p><em>在 3.6 版更改:</em> 接受一个 <a href="https://docs.python.org/zh-cn/3.8/glossary.html#term-path-like-object" target="_blank" rel="noopener">类路径对象</a>。</p>
<ul>
<li><p><code>os.P_NOWAIT</code></p>
</li>
<li><p><code>os.P_NOWAITO</code></p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnl" target="_blank" rel="noopener"><code>spawn*</code></a> 系列函数的 <em>mode</em> 参数的可取值。如果给出这些值中的任何一个，则 <code>spawn*()</code> 函数将在创建新进程后立即返回，且返回值为进程号。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix, Windows。</p>
</li>
<li><p><code>os.P_WAIT</code></p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnl" target="_blank" rel="noopener"><code>spawn*</code></a> 系列函数的 <em>mode</em> 参数的可取值。如果将 <em>mode</em> 指定为该值，则 <code>spawn*()</code> 函数将在新进程运行完毕后返回，运行成功则返回进程的退出代码，被信号终止则返回 <code>-signal</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix, Windows。</p>
</li>
<li><p><code>os.P_DETACH</code></p>
</li>
<li><p><code>os.P_OVERLAY</code></p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnl" target="_blank" rel="noopener"><code>spawn*</code></a> 系列函数的 <em>mode</em> 参数的可取值。它们比上面列出的值可移植性差。<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.P_DETACH" target="_blank" rel="noopener"><code>P_DETACH</code></a> 与 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.P_NOWAIT" target="_blank" rel="noopener"><code>P_NOWAIT</code></a> 相似，但是新进程会与父进程的控制台脱离。使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.P_OVERLAY" target="_blank" rel="noopener"><code>P_OVERLAY</code></a> 则会替换当前进程，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnl" target="_blank" rel="noopener"><code>spawn*</code></a> 函数将不会返回。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Windows。</p>
</li>
<li><p><code>os.startfile</code>(<em>path</em>[, <em>operation</em>])</p>
<p>使用已关联的应用程序打开文件。当 <em>operation</em> 未指定或指定为 <code>&#39;open&#39;</code> 时，这类似于在 Windows 资源管理器中双击文件，或在交互式命令行中将文件名作为 <strong>start</strong> 命令的参数：通过扩展名相关联的应用程序（如果有）打开文件。当指定另一个 <em>operation</em> 时，它必须是一个“命令动词” (“command verb”)，该词指定对文件执行的操作。Microsoft 文档中的常用动词有 <code>&#39;print&#39;</code> 和 <code>&#39;edit&#39;</code> （用于文件），以及 <code>&#39;explore&#39;</code> 和 <code>&#39;find&#39;</code> （用于目录）。关联的应用程序启动后 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.startfile" target="_blank" rel="noopener"><code>startfile()</code></a> 就会立即返回。本函数没有等待应用程序关闭的选项，也没有办法检索应用程序的退出状态。<em>path</em> 参数是基于当前目录的相对路径。如果要使用绝对路径，请确保第一个字符不是斜杠 (<code>&#39;/&#39;</code>)，是斜杠的话底层的 Win32 <code>ShellExecute()</code> 函数将失效。使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.path.html#os.path.normpath" target="_blank" rel="noopener"><code>os.path.normpath()</code></a> 函数确保路径已针对 Win32 正确编码。为了减少解释器的启动开销，直到第一次调用本函数后，才解析 Win32 <code>ShellExecute()</code> 函数。如果无法解析该函数，则抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#NotImplementedError" target="_blank" rel="noopener"><code>NotImplementedError</code></a> 异常。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.startfile</code>，附带参数 <code>path</code>、<code>operation</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Windows。</p>
</li>
<li><p><code>os.system</code>(<em>command</em>)</p>
<p>在子 shell 中执行命令（字符串）。这是调用标准 C 函数 <code>system()</code> 来实现的，因此限制条件与该函数相同。对 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#sys.stdin" target="_blank" rel="noopener"><code>sys.stdin</code></a> 等的更改不会反映在执行命令的环境中。<em>command</em> 产生的任何输出将被发送到解释器标准输出流。在 Unix 上，返回值是进程的退出状态，编码格式与为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.wait" target="_blank" rel="noopener"><code>wait()</code></a> 指定的格式相同。注意，POSIX 没有指定 C 函数 <code>system()</code> 返回值的含义，因此 Python 函数的返回值与系统有关。在 Windows 上，返回值是运行 <em>command</em> 后系统 Shell 返回的值。该 Shell 由 Windows 环境变量 <code>COMSPEC</code>: 给出：通常是 <strong>cmd.exe</strong>，它会返回命令的退出状态。在使用非原生 Shell 的系统上，请查阅 Shell 的文档。<a href="https://docs.python.org/zh-cn/3.8/library/subprocess.html#module-subprocess" target="_blank" rel="noopener"><code>subprocess</code></a> 模块提供了更强大的工具来生成新进程并跟踪执行结果，使用该模块比使用本函数更好。参阅 <a href="https://docs.python.org/zh-cn/3.8/library/subprocess.html#module-subprocess" target="_blank" rel="noopener"><code>subprocess</code></a> 文档中的 <a href="https://docs.python.org/zh-cn/3.8/library/subprocess.html#subprocess-replacements" target="_blank" rel="noopener">Replacing Older Functions with the subprocess Module</a> 部分以获取有用的帮助。引发一个 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#auditing" target="_blank" rel="noopener">审计事件</a> <code>os.system</code>，附带参数 <code>command</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix, Windows。</p>
</li>
<li><p><code>os.times</code>()</p>
<p>返回当前的全局进程时间。返回值是一个有 5 个属性的对象：<code>user</code> - 用户时间<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.system" target="_blank" rel="noopener"><code>system</code></a> - 系统时间<code>children_user</code> - 所有子进程的用户时间<code>children_system</code> - 所有子进程的系统时间<code>elapsed</code> - 从过去的固定时间点起，经过的真实时间为了向后兼容，该对象的行为也类似于五元组，按照 <code>user</code>，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.system" target="_blank" rel="noopener"><code>system</code></a>，<code>children_user</code>，<code>children_system</code> 和 <code>elapsed</code> 顺序组成。在 Unix 上请参阅 <em><a href="https://manpages.debian.org/times(2" target="_blank" rel="noopener">times(2)</a>)</em> 和 <em><a href="https://manpages.debian.org/times(3" target="_blank" rel="noopener">times(3)</a>)</em> 手册页，在 Windows 上请参阅 <a href="https://docs.microsoft.com/windows/win32/api/processthreadsapi/nf-processthreadsapi-getprocesstimes" target="_blank" rel="noopener">the GetProcessTimes MSDN</a> 。在 Windows 上，只有 <code>user</code> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.system" target="_blank" rel="noopener"><code>system</code></a> 是已知的，其他属性均为零。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix, Windows。<em>在 3.3 版更改:</em> 返回结果的类型由元组变成一个类似元组的对象，同时具有命名的属性。</p>
</li>
<li><p><code>os.wait</code>()</p>
<p>等待子进程执行完毕，返回一个元组，包含其 pid 和退出状态指示：一个 16 位数字，其低字节是终止该进程的信号编号，高字节是退出状态码（信号编号为零的情况下），如果生成了核心文件，则低字节的高位会置位。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.waitid</code>(<em>idtype</em>, <em>id</em>, <em>options</em>)</p>
<p>等待一个或多个子进程执行完毕。<em>idtype</em> 可以是 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.P_PID" target="_blank" rel="noopener"><code>P_PID</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.P_PGID" target="_blank" rel="noopener"><code>P_PGID</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.P_ALL" target="_blank" rel="noopener"><code>P_ALL</code></a>。<em>id</em> 指定要等待的 pid。<em>options</em> 是由 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.WEXITED" target="_blank" rel="noopener"><code>WEXITED</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.WSTOPPED" target="_blank" rel="noopener"><code>WSTOPPED</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.WCONTINUED" target="_blank" rel="noopener"><code>WCONTINUED</code></a> 中的一个或多个进行或运算构造的，且额外可以与 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.WNOHANG" target="_blank" rel="noopener"><code>WNOHANG</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.WNOWAIT" target="_blank" rel="noopener"><code>WNOWAIT</code></a> 进行或运算。返回值是一个对象，对应着 <code>siginfo_t</code> 结构体中的数据，即： <code>si_pid</code>, <code>si_uid</code>, <code>si_signo</code>, <code>si_status</code>, <code>si_code</code> 或 <code>None</code> （如果指定了 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.WNOHANG" target="_blank" rel="noopener"><code>WNOHANG</code></a> 且没有子进程处于等待状态）。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.P_PID</code></p>
</li>
<li><p><code>os.P_PGID</code></p>
</li>
<li><p><code>os.P_ALL</code></p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.waitid" target="_blank" rel="noopener"><code>waitid()</code></a> 的 <em>idtype</em> 参数的可取值。它们影响 <em>id</em> 的解释方式。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.WEXITED</code></p>
</li>
<li><p><code>os.WSTOPPED</code></p>
</li>
<li><p><code>os.WNOWAIT</code></p>
<p>用于 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.waitid" target="_blank" rel="noopener"><code>waitid()</code></a> 的 <em>options</em> 参数的标志位，指定要等待的子进程信号。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.CLD_EXITED</code></p>
</li>
<li><p><code>os.CLD_DUMPED</code></p>
</li>
<li><p><code>os.CLD_TRAPPED</code></p>
</li>
<li><p><code>os.CLD_CONTINUED</code></p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.waitid" target="_blank" rel="noopener"><code>waitid()</code></a> 返回的结果中，<code>si_code</code> 的可取值。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。<em>3.3 新版功能.</em></p>
</li>
<li><p><code>os.waitpid</code>(<em>pid</em>, <em>options</em>)</p>
<p>本函数的细节在 Unix 和 Windows 上有不同之处。</p>
<p>在 Unix 上：等待进程号为 <em>pid</em> 的子进程执行完毕，返回一个元组，内含其进程 ID 和退出状态指示（编码与 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.wait" target="_blank" rel="noopener"><code>wait()</code></a> 相同）。调用的语义受整数 <em>options</em> 的影响，常规操作下该值应为 <code>0</code>。</p>
<p>如果 <em>pid</em> 大于 <code>0</code>，则 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.waitpid" target="_blank" rel="noopener"><code>waitpid()</code></a> 会获取该指定进程的状态信息。如果 <em>pid</em> 为 <code>0</code>，则获取当前进程所在进程组中的所有子进程的状态。如果 <em>pid</em> 为 <code>-1</code>，则获取当前进程的子进程状态。如果 <em>pid</em> 小于 <code>-1</code>，则获取进程组 <code>-pid</code> （ <em>pid</em> 的绝对值）中所有进程的状态。</p>
<p>当系统调用返回 -1 时，将抛出带有错误码的 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 异常。</p>
<p>在 Windows 上：等待句柄为 <em>pid</em> 的进程执行完毕，返回一个元组，内含 <em>pid</em> 以及左移 8 位后的退出状态码（移位简化了跨平台使用本函数）。小于或等于 <code>0</code> 的 <em>pid</em> 在 Windows 上没有特殊含义，且会抛出异常。整数值 <em>options</em> 无效。<em>pid</em> 可以指向任何 ID 已知的进程，不一定是子进程。调用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnl" target="_blank" rel="noopener"><code>spawn*</code></a> 函数时传入 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.P_NOWAIT" target="_blank" rel="noopener"><code>P_NOWAIT</code></a> 将返回合适的进程句柄。</p>
<p><em>在 3.5 版更改:</em> 如果系统调用被中断，但信号处理程序没有触发异常，此函数现在会重试系统调用，而不是触发 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#InterruptedError" target="_blank" rel="noopener"><code>InterruptedError</code></a> 异常 (原因详见 <a href="https://www.python.org/dev/peps/pep-0475" target="_blank" rel="noopener"><strong>PEP 475</strong></a>)。</p>
</li>
<li><p><code>os.wait3</code>(<em>options</em>)</p>
<p>与 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.waitpid" target="_blank" rel="noopener"><code>waitpid()</code></a> 相似，差别在于没有进程 ID 参数，且返回一个 3 元组，其中包括子进程 ID，退出状态指示和资源使用信息。关于资源使用信息的详情，请参考 <a href="https://docs.python.org/zh-cn/3.8/library/resource.html#module-resource" target="_blank" rel="noopener"><code>resource</code></a>.<a href="https://docs.python.org/zh-cn/3.8/library/resource.html#resource.getrusage" target="_blank" rel="noopener"><code>getrusage()</code></a>。option 参数与传入 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.waitpid" target="_blank" rel="noopener"><code>waitpid()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.wait4" target="_blank" rel="noopener"><code>wait4()</code></a> 的相同。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.wait4</code>(<em>pid</em>, <em>options</em>)</p>
<p>与 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.waitpid" target="_blank" rel="noopener"><code>waitpid()</code></a> 相似，差别在本方法返回一个 3 元组，其中包括子进程 ID，退出状态指示和资源使用信息。关于资源使用信息的详情，请参考 <a href="https://docs.python.org/zh-cn/3.8/library/resource.html#module-resource" target="_blank" rel="noopener"><code>resource</code></a>.<a href="https://docs.python.org/zh-cn/3.8/library/resource.html#resource.getrusage" target="_blank" rel="noopener"><code>getrusage()</code></a>。<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.wait4" target="_blank" rel="noopener"><code>wait4()</code></a> 的参数与 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.waitpid" target="_blank" rel="noopener"><code>waitpid()</code></a> 的参数相同。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.WNOHANG</code></p>
<p>用于 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.waitpid" target="_blank" rel="noopener"><code>waitpid()</code></a> 的选项，如果没有立即可用的子进程状态，则立即返回。在这种情况下，函数返回 <code>(0, 0)</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.WCONTINUED</code></p>
<p>被任务控制 (job control) 停止的子进程，如果上次报告状态后已恢复运行，则此选项将报告这些子进程。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: 部分 Unix 系统。</p>
</li>
<li><p><code>os.WUNTRACED</code></p>
<p>已停止的子进程，如果自停止以来尚未报告其当前状态，则此选项将报告这些子进程。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
</ul>
<p>下列函数采用进程状态码作为参数，状态码由 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.system" target="_blank" rel="noopener"><code>system()</code></a>、<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.wait" target="_blank" rel="noopener"><code>wait()</code></a> 或 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.waitpid" target="_blank" rel="noopener"><code>waitpid()</code></a> 返回。它们可用于确定进程上发生的操作。</p>
<ul>
<li><p><code>os.WCOREDUMP</code>(<em>status</em>)</p>
<p>如果为该进程生成了核心转储，返回 <code>True</code>，否则返回 <code>False</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.WIFCONTINUED</code>(<em>status</em>)</p>
<p>如果进程被任务控制 (job control) 停止后，又重新继续运行，返回 <code>True</code>，否则返回 <code>False</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.WIFSTOPPED</code>(<em>status</em>)</p>
<p>如果进程已停止，返回 <code>True</code>，否则返回 <code>False</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.WIFSIGNALED</code>(<em>status</em>)</p>
<p>如果进程由于信号而退出，返回 <code>True</code>，否则返回 <code>False</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.WIFEXITED</code>(<em>status</em>)</p>
<p>如果进程使用 <em><a href="https://manpages.debian.org/exit(2" target="_blank" rel="noopener">exit(2)</a>)</em> 系统调用退出，返回 <code>True</code>，否则返回 <code>False</code>。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.WEXITSTATUS</code>(<em>status</em>)</p>
<p>如果 <code>WIFEXITED(status)</code> 为值，则将整数形参返回给 <em><a href="https://manpages.debian.org/exit(2" target="_blank" rel="noopener">exit(2)</a>)</em> 系统调用。 否则，返回值将没有任何意义。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.WSTOPSIG</code>(<em>status</em>)</p>
<p>返回导致进程停止的信号。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.WTERMSIG</code>(<em>status</em>)</p>
<p>返回导致进程退出的信号。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
</ul>
<h2 id="调度器接口"><a href="#调度器接口" class="headerlink" title="调度器接口"></a>调度器接口</h2><p>这些函数控制操作系统如何为进程分配 CPU 时间。 它们仅在某些 Unix 平台上可用。 更多细节信息请查阅你所用 Unix 的指南页面。</p>
<p><em>3.3 新版功能.</em></p>
<p>以下调度策略如果被操作系统支持就会对外公开。</p>
<ul>
<li><p><code>os.SCHED_OTHER</code></p>
<p>默认调度策略。</p>
</li>
<li><p><code>os.SCHED_BATCH</code></p>
<p>用于 CPU 密集型进程的调度策略，它会尽量为计算机中的其余任务保留交互性。</p>
</li>
<li><p><code>os.SCHED_IDLE</code></p>
<p>用于极低优先级的后台任务的调度策略。</p>
</li>
<li><p><code>os.SCHED_SPORADIC</code></p>
<p>用于偶发型服务程序的调度策略。</p>
</li>
<li><p><code>os.SCHED_FIFO</code></p>
<p>先进先出的调度策略。</p>
</li>
<li><p><code>os.SCHED_RR</code></p>
<p>循环式的调度策略。</p>
</li>
<li><p><code>os.SCHED_RESET_ON_FORK</code></p>
<p>此旗标可与任何其他调度策略进行 OR 运算。 当带有此旗标的进程设置分叉时，其子进程的调度策略和优先级会被重置为默认值。</p>
</li>
<li><p><em>class</em> <code>os.sched_param</code>(<em>sched_priority</em>)</p>
<p>这个类表示在 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.sched_setparam" target="_blank" rel="noopener"><code>sched_setparam()</code></a>, <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.sched_setscheduler" target="_blank" rel="noopener"><code>sched_setscheduler()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.sched_getparam" target="_blank" rel="noopener"><code>sched_getparam()</code></a> 中使用的可修改调度形参。 它属于不可变对象。目前它只有一个可能的形参：<code>sched_priority</code>一个调度策略的调度优先级。</p>
</li>
<li><p><code>os.sched_get_priority_min</code>(<em>policy</em>)</p>
<p>获取 <em>policy</em> 的最小优先级数值。 <em>policy</em> 是以上调度策略常量之一。</p>
</li>
<li><p><code>os.sched_get_priority_max</code>(<em>policy</em>)</p>
<p>获取 <em>policy</em> 的最高优先级数值。 <em>policy</em> 是以上调度策略常量之一。</p>
</li>
<li><p><code>os.sched_setscheduler</code>(<em>pid</em>, <em>policy</em>, <em>param</em>)</p>
<p>设置 PID 为 <em>pid</em> 的进程的调度策略。<em>pid</em> 为 0 指的是调用本方法的进程。<em>policy</em> 是以上调度策略常量之一。<em>param</em> 是一个 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.sched_param" target="_blank" rel="noopener"><code>sched_param</code></a> 实例。</p>
</li>
<li><p><code>os.sched_getscheduler</code>(<em>pid</em>)</p>
<p>返回 PID 为 <em>pid</em> 的进程的调度策略。<em>pid</em> 为 0 指的是调用本方法的进程。返回的结果是以上调度策略常量之一。</p>
</li>
<li><p><code>os.sched_setparam</code>(<em>pid</em>, <em>param</em>)</p>
<p>设置 PID 为 <em>pid</em> 的进程的某个调度参数。<em>pid</em> 为 0 指的是调用本方法的进程。<em>param</em> 是一个 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.sched_param" target="_blank" rel="noopener"><code>sched_param</code></a> 实例。</p>
</li>
<li><p><code>os.sched_getparam</code>(<em>pid</em>)</p>
<p>返回 PID 为 <em>pid</em> 的进程的调度参数为一个 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.sched_param" target="_blank" rel="noopener"><code>sched_param</code></a> 实例。<em>pid</em> 为 0 指的是调用本方法的进程。</p>
</li>
<li><p><code>os.sched_rr_get_interval</code>(<em>pid</em>)</p>
<p>返回 PID 为 <em>pid</em> 的进程在时间片轮转调度下的时间片长度（单位为秒）。<em>pid</em> 为 0 指的是调用本方法的进程。</p>
</li>
<li><p><code>os.sched_yield</code>()</p>
<p>自愿放弃 CPU。</p>
</li>
<li><p><code>os.sched_setaffinity</code>(<em>pid</em>, <em>mask</em>)</p>
<p>将 PID 为 <em>pid</em> 的进程（为零则为当前进程）限制到一组 CPU 上。<em>mask</em> 是整数的可迭代对象，表示应将进程限制在其中的一组 CPU。</p>
</li>
<li><p><code>os.sched_getaffinity</code>(<em>pid</em>)</p>
<p>返回 PID 为 <em>pid</em> 的进程（为零则为当前进程）被限制到的那一组 CPU。</p>
</li>
</ul>
<h2 id="其他系统信息"><a href="#其他系统信息" class="headerlink" title="其他系统信息"></a>其他系统信息</h2><ul>
<li><p><code>os.confstr</code>(<em>name</em>)</p>
<p>返回字符串格式的系统配置信息。<em>name</em> 指定要查找的配置名称，它可以是字符串，是一个系统已定义的名称，这些名称定义在不同标准（POSIX，Unix 95，Unix 98 等）中。一些平台还定义了额外的其他名称。当前操作系统已定义的名称在 <code>confstr_names</code> 字典的键中给出。对于未包含在该映射中的配置名称，也可以传递一个整数作为 <em>name</em>。</p>
<p>如果 <em>name</em> 指定的配置值未定义，返回 <code>None</code>。</p>
<p>如果 <em>name</em> 是一个字符串且不是已定义的名称，将抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#ValueError" target="_blank" rel="noopener"><code>ValueError</code></a> 异常。如果当前系统不支持 <em>name</em> 指定的配置名称，即使该名称存在于 <code>confstr_names</code>，也会抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 异常，错误码为 <a href="https://docs.python.org/zh-cn/3.8/library/errno.html#errno.EINVAL" target="_blank" rel="noopener"><code>errno.EINVAL</code></a>。</p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>s.confstr_names</code></p>
<p>字典，表示映射关系，为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.confstr" target="_blank" rel="noopener"><code>confstr()</code></a> 可接受名称与操作系统为这些名称定义的整数值之间的映射。这可用于判断系统已定义了哪些名称。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.cpu_count</code>()</p>
<p>返回系统的 CPU 数量。不确定则返回 <code>None</code>。该数量不同于当前进程可以使用的CPU数量。可用的CPU数量可以由 <code>len(os.sched_getaffinity(0))</code> 方法获得。<em>3.4 新版功能.</em></p>
</li>
<li><p><code>os.getloadavg</code>()</p>
<p>返回系统运行队列中最近 1、5 和 15 分钟内的平均进程数。无法获得平均负载则抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#OSError" target="_blank" rel="noopener"><code>OSError</code></a> 异常。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.sysconf</code>(<em>name</em>)</p>
<p>返回整数格式的系统配置信息。如果 <em>name</em> 指定的配置值未定义，返回 <code>-1</code>。对 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.confstr" target="_blank" rel="noopener"><code>confstr()</code></a> 的 <em>name</em> 参数的注释在此处也适用。当前已知的配置名称在 <code>sysconf_names</code> 字典中提供。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
<li><p><code>os.sysconf_names</code></p>
<p>字典，表示映射关系，为 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.sysconf" target="_blank" rel="noopener"><code>sysconf()</code></a> 可接受名称与操作系统为这些名称定义的整数值之间的映射。这可用于判断系统已定义了哪些名称。<a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>: Unix。</p>
</li>
</ul>
<p>以下数据值用于支持对路径本身的操作。所有平台都有定义。</p>
<p>对路径的高级操作在 <a href="https://docs.python.org/zh-cn/3.8/library/os.path.html#module-os.path" target="_blank" rel="noopener"><code>os.path</code></a> 模块中定义。</p>
<ul>
<li><p><code>os.curdir</code></p>
<p>操作系统用来表示当前目录的常量字符串。在 Windows 和 POSIX 上是 <code>&#39;.&#39;</code>。在 <a href="https://docs.python.org/zh-cn/3.8/library/os.path.html#module-os.path" target="_blank" rel="noopener"><code>os.path</code></a> 中也可用。</p>
</li>
</ul>
<ul>
<li><p><code>os.pardir</code></p>
<p>操作系统用来表示父目录的常量字符串。在 Windows 和 POSIX 上是 <code>&#39;..&#39;</code>。在 <a href="https://docs.python.org/zh-cn/3.8/library/os.path.html#module-os.path" target="_blank" rel="noopener"><code>os.path</code></a> 中也可用。</p>
</li>
</ul>
<ul>
<li><p><code>os.defpath</code></p>
<p>在环境变量没有 <code>&#39;PATH&#39;</code> 键的情况下，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.execl" target="_blank" rel="noopener"><code>exec*p*</code></a> and <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.spawnl" target="_blank" rel="noopener"><code>spawn*p*</code></a> 使用的默认搜索路径。在 <a href="https://docs.python.org/zh-cn/3.8/library/os.path.html#module-os.path" target="_blank" rel="noopener"><code>os.path</code></a> 中也可用。</p>
</li>
<li><p><code>os.linesep</code></p>
<p>当前平台用于分隔（或终止）行的字符串。它可以是单个字符，如 POSIX 上是 <code>&#39;\n&#39;</code>，也可以是多个字符，如 Windows 上是 <code>&#39;\r\n&#39;</code>。在写入以文本模式（默认模式）打开的文件时，请不要使用 <em>os.linesep</em> 作为行终止符，请在所有平台上都使用一个 <code>&#39;\n&#39;</code> 代替。</p>
</li>
<li><p><code>os.devnull</code></p>
<p>空设备的文件路径。如 POSIX 上为 <code>&#39;/dev/null&#39;</code>，Windows 上为 <code>&#39;nul&#39;</code>。在 <a href="https://docs.python.org/zh-cn/3.8/library/os.path.html#module-os.path" target="_blank" rel="noopener"><code>os.path</code></a> 中也可用。</p>
</li>
<li><p><code>os.RTLD_LAZY</code></p>
</li>
<li><p><code>os.RTLD_NOW</code></p>
</li>
<li><p><code>os.RTLD_GLOBAL</code></p>
</li>
<li><p><code>os.RTLD_LOCAL</code></p>
</li>
<li><p><code>os.RTLD_NODELETE</code></p>
</li>
<li><p><code>os.RTLD_NOLOAD</code></p>
</li>
<li><p><code>os.RTLD_DEEPBIND</code></p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/sys.html#sys.setdlopenflags" target="_blank" rel="noopener"><code>setdlopenflags()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/sys.html#sys.getdlopenflags" target="_blank" rel="noopener"><code>getdlopenflags()</code></a> 函数所使用的标志。请参阅 Unix 手册页 <em><a href="https://manpages.debian.org/dlopen(3" target="_blank" rel="noopener">dlopen(3)</a>)</em> 获取不同标志的含义。<em>3.3 新版功能.</em></p>
</li>
</ul>
<h2 id="随机数"><a href="#随机数" class="headerlink" title="随机数"></a>随机数</h2><ul>
<li><p><code>os.getrandom</code>(<em>size</em>, <em>flags=0</em>)</p>
<p>获得最多为 <em>size</em> 的随机字节。本函数返回的字节数可能少于请求的字节数。</p>
<p>这些字节可用于为用户空间的随机数生成器提供种子，或用于加密目的。</p>
<p><code>getrandom()</code> 依赖于从设备驱动程序和其他环境噪声源收集的熵。不必要地读取大量数据将对使用 <code>/dev/random</code> 和 <code>/dev/urandom</code> 设备的其他用户产生负面影响。</p>
<p>flags 参数是一个位掩码，可以是零个或多个下列值以或运算组合： <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.GRND_RANDOM" target="_blank" rel="noopener"><code>os.GRND_RANDOM</code></a> 和 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.GRND_NONBLOCK" target="_blank" rel="noopener"><code>GRND_NONBLOCK</code></a>。</p>
<p>另请参阅 <a href="http://man7.org/linux/man-pages/man2/getrandom.2.html" target="_blank" rel="noopener">Linux getrandom() 手册页</a> 。</p>
<p><a href="https://docs.python.org/zh-cn/3.8/library/intro.html#availability" target="_blank" rel="noopener">可用性</a>：Linux 3.17 或更高版本。</p>
<p><em>3.6 新版功能.</em></p>
</li>
<li><p><code>os.urandom</code>(<em>size</em>)</p>
<p>返回大小为 <em>size</em> 的字符串，它是适合加密使用的随机字节。本函数从系统指定的随机源获取随机字节。对于加密应用程序，返回的数据应有足够的不可预测性，尽管其确切的品质取决于操作系统的实现。在 Linux 上，如果 <code>getrandom()</code> 系统调用可用，它将以阻塞模式使用：阻塞直到系统的 urandom 熵池初始化完毕（内核收集了 128 位熵）。原理请参阅 <a href="https://www.python.org/dev/peps/pep-0524" target="_blank" rel="noopener"><strong>PEP 524</strong></a>。在 Linux 上，<a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.getrandom" target="_blank" rel="noopener"><code>getrandom()</code></a> 可以以非阻塞模式（使用 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.GRND_NONBLOCK" target="_blank" rel="noopener"><code>GRND_NONBLOCK</code></a> 标志）获取随机字节，或者轮询直到系统的 urandom 熵池初始化完毕。在类 Unix 系统上，随机字节是从 <code>/dev/urandom</code> 设备读取的。如果 <code>/dev/urandom</code> 设备不可用或不可读，则抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#NotImplementedError" target="_blank" rel="noopener"><code>NotImplementedError</code></a> 异常。在 Windows 上将使用 <code>CryptGenRandom()</code>。参见 <a href="https://docs.python.org/zh-cn/3.8/library/secrets.html#module-secrets" target="_blank" rel="noopener"><code>secrets</code></a> 模块提供了更高级的功能。所在平台会提供随机数生成器，有关其易于使用的接口，请参阅 <a href="https://docs.python.org/zh-cn/3.8/library/random.html#random.SystemRandom" target="_blank" rel="noopener"><code>random.SystemRandom</code></a>。<em>在 3.6.0 版更改:</em> 在 Linux 上，<code>getrandom()</code> 现在以阻塞模式使用，以提高安全性。<em>在 3.5.2 版更改:</em> 在 Linux 上，如果 <code>getrandom()</code> 系统调用阻塞（urandom 熵池尚未初始化完毕），则退回一步读取 <code>/dev/urandom</code>。<em>在 3.5 版更改:</em> 在 Linux 3.17 和更高版本上，现在使用 <code>getrandom()</code> 系统调用（如果可用）。在 OpenBSD 5.6 和更高版本上，现在使用 <code>getentropy()</code> C 函数。这些函数避免了使用内部文件描述符。</p>
</li>
<li><p><code>os.GRND_NONBLOCK</code></p>
<p>默认情况下，从 <code>/dev/random</code> 读取时，如果没有可用的随机字节，则 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.getrandom" target="_blank" rel="noopener"><code>getrandom()</code></a> 会阻塞；从 <code>/dev/urandom</code> 读取时，如果熵池尚未初始化，则会阻塞。如果设置了 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.GRND_NONBLOCK" target="_blank" rel="noopener"><code>GRND_NONBLOCK</code></a> 标志，则这些情况下 <a href="https://docs.python.org/zh-cn/3.8/library/os.html#os.getrandom" target="_blank" rel="noopener"><code>getrandom()</code></a> 不会阻塞，而是立即抛出 <a href="https://docs.python.org/zh-cn/3.8/library/exceptions.html#BlockingIOError" target="_blank" rel="noopener"><code>BlockingIOError</code></a> 异常。<em>3.6 新版功能.</em></p>
</li>
<li><p><code>os.GRND_RANDOM</code></p>
<p>如果设置了此标志位，那么将从 <code>/dev/random</code> 池而不是 <code>/dev/urandom</code> 池中提取随机字节。</p>
<p><em>3.6 新版功能.</em></p>
</li>
</ul>

      
    </div>

    
      


    

    
    
    

    

    
      
    
    
      <div>
        <div id="reward-container">
  <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
  <button id="reward-button" disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">

    
      
      
        
      
      <div style="display: inline-block">
        <img src="/images/wechat_pay.jpg" alt="Jeff Sui 微信支付">
        <p>微信支付</p>
      </div>
    
      
      
        
      
      <div style="display: inline-block">
        <img src="/images/alipay.jpg" alt="Jeff Sui 支付宝">
        <p>支付宝</p>
      </div>
    

  </div>
</div>

      </div>
    

    
      <div>
        




  



<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Jeff Sui</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    
    <a href="https://pinghailinfeng.gitee.io/2020/02/20/python-standard-library-os/" title="python standard library os">https://pinghailinfeng.gitee.io/2020/02/20/python-standard-library-os/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/python/" rel="tag"># python</a>
          
            <a href="/tags/standard-library/" rel="tag"># standard_library</a>
          
            <a href="/tags/os/" rel="tag"># os</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/02/19/python-standard-library-shutil/" rel="next" title="python standard library shutil">
                <i class="fa fa-chevron-left"></i> python standard library shutil
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/02/21/python-standard-library-cmd/" rel="prev" title="python standard library cmd">
                python standard library cmd <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="Jeff Sui">
            
              <p class="site-author-name" itemprop="name">Jeff Sui</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">120</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">21</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">135</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/jeffsui" title="GitHub &rarr; https://github.com/jeffsui" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:215687736@qq.com" title="E-Mail &rarr; mailto:215687736@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#python-标准库-os"><span class="nav-number">1.</span> <span class="nav-text">python 标准库 os</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#文件名，命令行参数，以及环境变量。"><span class="nav-number">1.1.</span> <span class="nav-text">文件名，命令行参数，以及环境变量。</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#进程参数"><span class="nav-number">1.2.</span> <span class="nav-text">进程参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建文件对象"><span class="nav-number">1.3.</span> <span class="nav-text">创建文件对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件描述符操作"><span class="nav-number">1.4.</span> <span class="nav-text">文件描述符操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#常量"><span class="nav-number">1.4.1.</span> <span class="nav-text">常量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查询终端的尺寸"><span class="nav-number">1.4.2.</span> <span class="nav-text">查询终端的尺寸</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件描述符的继承"><span class="nav-number">1.4.3.</span> <span class="nav-text">文件描述符的继承</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件和目录"><span class="nav-number">1.5.</span> <span class="nav-text">文件和目录</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux-扩展属性"><span class="nav-number">1.5.1.</span> <span class="nav-text">Linux 扩展属性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#进程管理"><span class="nav-number">1.6.</span> <span class="nav-text">进程管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#调度器接口"><span class="nav-number">1.7.</span> <span class="nav-text">调度器接口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#其他系统信息"><span class="nav-number">1.8.</span> <span class="nav-text">其他系统信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#随机数"><span class="nav-number">1.9.</span> <span class="nav-text">随机数</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

  
<script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
<script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
<div class="widget-wrap">
    <div id="myCanvasContainer" class="widget tagcloud">
        <canvas width="250" height="250" id="resCanvas" style="width=100%">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/2to3/">2to3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Boolean/">Boolean</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Exception/">Exception</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GIL/">GIL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitGutter/">GitGutter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tkinter/">Tkinter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XML/">XML</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/all/">__all__</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thread/">_thread</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/app/">app</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/argparse/">argparse</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/array/">array</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/atexit/">atexit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bisect/">bisect</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/calendar/">calendar</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos/">centos</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/checkbox/">checkbox</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cmath/">cmath</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cmd/">cmd</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/code/">code</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/collections-abc/">collections.abc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/concurrent/">concurrent</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/context-manager-types/">context-manager-types</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cookies/">cookies</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/copy/">copy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/coroutines/">coroutines</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/csv/">csv</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cygwin/">cygwin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dataclasses/">dataclasses</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dbm/">dbm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dict/">dict</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dictionary/">dictionary</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/difflib/">difflib</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dis/">dis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/doctest/">doctest</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dom/">dom</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eclipse/">eclipse</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/enum/">enum</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ffmpeg/">ffmpeg</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/filecmp/">filecmp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fileinput/">fileinput</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fractions/">fractions</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/functools/">functools</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/futures/">futures</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gc/">gc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/generator/">generator</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitcafe/">gitcafe</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/glob/">glob</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heapq/">heapq</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html-parser/">html.parser</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http-server/">http.server</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios/">ios</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iterator/">iterator</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/itertools/">itertools</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javaweb/">javaweb</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdk/">jdk</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/json/">json</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/juypter/">juypter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/keyword/">keyword</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linecache/">linecache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/m3u8/">m3u8</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/">maven</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/minidom/">minidom</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/modulefinder/">modulefinder</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nbextension/">nbextension</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oop/">oop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/operator/">operator</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/os/">os</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/os-path/">os.path</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/photo/">photo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pickle/">pickle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pprint/">pprint</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pwd/">pwd</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">84</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python3/">python3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/queue/">queue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/re/">re</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/readline/">readline</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/registry/">registry</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/registry-ui/">registry-ui</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reprlib/">reprlib</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sax/">sax</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sched/">sched</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/select/">select</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/selectors/">selectors</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/selenium/">selenium</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shutil/">shutil</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socket/">socket</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sort/">sort</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlite3/">sqlite3</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/standar-library/">standar_library</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/standard-library/">standard_library</a><span class="tag-list-count">78</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/string/">string</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime/">sublime</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tempfile/">tempfile</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thread/">thread</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/timeit/">timeit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/turtle/">turtle</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/types/">types</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/unittest/">unittest</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/urllib-robotparser/">urllib.robotparser</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/uuid/">uuid</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/venv/">venv</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/">vscode</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/weakref/">weakref</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web-test/">web test</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webbrowser/">webbrowser</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/">windows</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xml/">xml</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/二维码/">二维码</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/博客/">博客</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/坑/">坑</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/字典/">字典</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/异步/">异步</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/持续集成/">持续集成</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/搭建/">搭建</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/搭建博客/">搭建博客</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文章/">文章</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/杂记/">杂记</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/版本管理/">版本管理</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/短网址/">短网址</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/笔记/">笔记</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网易音乐/">网易音乐</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/美化/">美化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/软件工程/">软件工程</a><span class="tag-list-count">1</span></li></ul>
        </canvas>
    </div>
</div>


           <div>
              <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="210" height="110" src="//music.163.com/outchain/player?type=2&id=1331901657&auto=0&height=66"></iframe>
           </div>
        

    </div>
  </aside>
  




        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2015 – <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jeff Sui</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">871k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">13:12</span>
  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.1</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>












  













  



  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script src="/lib/fancybox/source/jquery.fancybox.pack.js"></script>

  
  <script src="/lib/reading_progress/reading_progress.js"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/js/affix.js?v=7.1.1"></script>

  <script src="/js/schemes/pisces.js?v=7.1.1"></script>




  
  <script src="/js/scrollspy.js?v=7.1.1"></script>
<script src="/js/post-details.js?v=7.1.1"></script>



  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  

  

  


  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

  

  

  

  

  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body>
</html>
